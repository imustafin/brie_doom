<!DOCTYPE html>
<html>
<head>
<meta name="generator" content="ISE EiffelStudio version 19.05.10.3187 GPL Edition - unix">
<meta name="description" content="p_map.c  Movement, collision handling. Shooting and aiming"/>
<meta name="keywords" content="Eiffel class"/>
<meta name="keywords" content="Eiffel class"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css?family=PT+Sans" rel="stylesheet">
<title>p_map Text</title>
<link rel="stylesheet" href="../default.css" type="text/css">
<script type="text/javascript" src="../goto.html"></script>
</head>
<body>
<pre></pre><form class="nav" onsubmit="go_to('../',this.c.value);return false;">
<div class="nav">
<a class="nav hierarchy" href="../class_list.html">Classes</a>
<a class="nav hierarchy" href="../cluster_list.html">Clusters</a>
<a class="nav hierarchy" href="../cluster_hierarchy.html">Cluster hierarchy</a>
<a class="nav class" href="p_map_chart.html">Chart</a>
<a class="nav class" href="p_map_links.html">Relations</a>
<span class="nav class selected">Text</span>
<span class="nav class goto">Go to: <input name="c" value="p_map"></span>
</div></form><pre><span class="ekeyword">note</span>
	<span class="eitag">description</span><span class="esymbol">:</span> <span class="estring">&quot;</span><span class="estring">[</span>
		<span class="estring">p_map.c</span>
		
		<span class="estring">Movement, collision handling.</span>
		<span class="estring">Shooting and aiming</span>
	<span class="estring">]</span><span class="estring">&quot;</span>

<span class="ekeyword">class</span> 
	<a class="eclass" href="../brie_doom/p_map.html">P_MAP</a>

<span class="ekeyword">inherit</span>
	<a class="eclass" href="../brie_doom/mobjflag_t.html">MOBJFLAG_T</a>

	<a class="eclass" href="../brie_doom/mobjtype_t.html">MOBJTYPE_T</a>

<span class="ekeyword">create</span> 
	<a class="efeature" href="../brie_doom/p_map.html#f_make">make</a>

<span class="ekeyword">feature</span> 

	<a name="f_i_main"></a><a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/i_main.html">I_MAIN</a>

	<a name="f_make"></a><a class="efeature" href="../brie_doom/p_map.html#f_make">make</a> <span class="esymbol">(</span><span class="elocal">a_i_main</span><span class="esymbol">:</span> <span class="ekeyword">like</span> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="esymbol">)</span>
		<span class="ekeyword">do</span>
			<a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a> <span class="esymbol">:=</span> <span class="elocal">a_i_main</span>
			<span class="ekeyword">create</span> <a class="efeature" href="../brie_doom/p_map.html#f_spechit">spechit</a><span class="edot">.</span><a class="efeature" href="../base/array.html#f_make_filled">make_filled</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="ekeyword">Void</span><span class="esymbol">,</span> <span class="enumber">0</span><span class="esymbol">,</span> <a class="efeature" href="../brie_doom/p_map.html#f_maxspecialcross">Maxspecialcross</a> <a class="esymbol" href="../base/integer_32.html#f_minus">-</a> <span class="enumber">1</span><span class="esymbol">)</span>
			<span class="ekeyword">create</span> <a class="efeature" href="../brie_doom/p_map.html#f_tmbbox">tmbbox</a><span class="edot">.</span><a class="efeature" href="../base/array.html#f_make_filled">make_filled</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="enumber">0</span><span class="esymbol">,</span> <span class="enumber">0</span><span class="esymbol">,</span> <span class="enumber">3</span><span class="esymbol">)</span>
		<span class="ekeyword">end</span>
	
<span class="ekeyword">feature</span> 

	<a name="f_ceilingline"></a><a class="efeature" href="../brie_doom/p_map.html#f_ceilingline">ceilingline</a><span class="esymbol">:</span> <span class="ekeyword">detachable</span> <a class="eclass" href="../brie_doom/render/line_t.html">LINE_T</a>
			<span class="ecomment">--</span><span class="ecomment"> keep track of the line that lowers the ceiling,</span>
			<span class="ecomment">--</span><span class="ecomment"> so missiles don't explode against sky hack walls</span>

	<a name="f_floatok"></a><a class="efeature" href="../brie_doom/p_map.html#f_floatok">floatok</a><span class="esymbol">:</span> <a class="eclass" href="../base/boolean.html">BOOLEAN</a>
			<span class="ecomment">--</span><span class="ecomment"> If true, move would be ok</span>
			<span class="ecomment">--</span><span class="ecomment"> if within </span><span class="equoted">tmfloorz - tmceilingz</span>

	<a name="f_tmbbox"></a><a class="efeature" href="../brie_doom/p_map.html#f_tmbbox">tmbbox</a><span class="esymbol">:</span> <a class="eclass" href="../base/array.html">ARRAY</a> <span class="esymbol">[</span><a class="eclass" href="../base/integer_32.html">INTEGER_32</a><span class="esymbol">]</span>

	<a name="f_tmthing"></a><a class="efeature" href="../brie_doom/p_map.html#f_tmthing">tmthing</a><span class="esymbol">:</span> <span class="ekeyword">detachable</span> <a class="eclass" href="../brie_doom/mobj_t.html">MOBJ_T</a>

	<a name="f_tmflags"></a><a class="efeature" href="../brie_doom/p_map.html#f_tmflags">tmflags</a><span class="esymbol">:</span> <a class="eclass" href="../base/integer_32.html">INTEGER_32</a>

	<a name="f_tmx"></a><a class="efeature" href="../brie_doom/p_map.html#f_tmx">tmx</a><span class="esymbol">:</span> <a class="eclass" href="../base/integer_32.html">INTEGER_32</a>

	<a name="f_tmy"></a><a class="efeature" href="../brie_doom/p_map.html#f_tmy">tmy</a><span class="esymbol">:</span> <a class="eclass" href="../base/integer_32.html">INTEGER_32</a>

	<a name="f_tmfloorz"></a><a class="efeature" href="../brie_doom/p_map.html#f_tmfloorz">tmfloorz</a><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a>

	<a name="f_tmceilingz"></a><a class="efeature" href="../brie_doom/p_map.html#f_tmceilingz">tmceilingz</a><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a>

	<a name="f_tmdropoffz"></a><a class="efeature" href="../brie_doom/p_map.html#f_tmdropoffz">tmdropoffz</a><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a>

	<a name="f_numspechit"></a><a class="efeature" href="../brie_doom/p_map.html#f_numspechit">numspechit</a><span class="esymbol">:</span> <a class="eclass" href="../base/integer_32.html">INTEGER_32</a> <span class="ekeyword">assign</span> <a class="efeature" href="../brie_doom/p_map.html#f_set_numspechit">set_numspechit</a>

	<a name="f_set_numspechit"></a><a class="efeature" href="../brie_doom/p_map.html#f_set_numspechit">set_numspechit</a> <span class="esymbol">(</span><span class="elocal">a_numspechit</span><span class="esymbol">:</span> <span class="ekeyword">like</span> <a class="efeature" href="../brie_doom/p_map.html#f_numspechit">numspechit</a><span class="esymbol">)</span>
		<span class="ekeyword">do</span>
			<a class="efeature" href="../brie_doom/p_map.html#f_numspechit">numspechit</a> <span class="esymbol">:=</span> <span class="elocal">a_numspechit</span>
		<span class="ekeyword">end</span>

	<a name="f_spechit"></a><a class="efeature" href="../brie_doom/p_map.html#f_spechit">spechit</a><span class="esymbol">:</span> <a class="eclass" href="../base/array.html">ARRAY</a> <span class="esymbol">[</span><span class="ekeyword">detachable</span> <a class="eclass" href="../brie_doom/render/line_t.html">LINE_T</a><span class="esymbol">]</span>

	<a name="f_maxspecialcross"></a><a class="efeature" href="../brie_doom/p_map.html#f_maxspecialcross">Maxspecialcross</a><span class="esymbol">:</span> <a class="eclass" href="../base/integer_32.html">INTEGER_32</a> <span class="esymbol">=</span> <span class="enumber">8</span>
	
<span class="ekeyword">feature</span> 

	<a name="f_usething"></a><a class="efeature" href="../brie_doom/p_map.html#f_usething">usething</a><span class="esymbol">:</span> <span class="ekeyword">detachable</span> <a class="eclass" href="../brie_doom/mobj_t.html">MOBJ_T</a>

	<a name="f_p_uselines"></a><a class="efeature" href="../brie_doom/p_map.html#f_p_uselines">p_uselines</a> <span class="esymbol">(</span><span class="elocal">player</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/player_t.html">PLAYER_T</a><span class="esymbol">)</span>
			<span class="ecomment">--</span><span class="ecomment"> Looks for special lines in front of the player to activate</span>
		<span class="ekeyword">require</span>
				<span class="elocal">player</span><span class="edot">.</span><a class="efeature" href="../brie_doom/player_t.html#f_mo">mo</a> <span class="esymbol">/=</span> <span class="ekeyword">Void</span>
		<span class="ekeyword">local</span>
			<span class="elocal">angle</span><span class="esymbol">:</span> <a class="eclass" href="../base/integer_32.html">INTEGER_32</a>
			<span class="elocal">x1</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a>
			<span class="elocal">y1</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a>
			<span class="elocal">x2</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a>
			<span class="elocal">y2</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a>
		<span class="ekeyword">do</span>
			<span class="ekeyword">check</span>
					<span class="ekeyword">attached</span> <span class="elocal">player</span><span class="edot">.</span><a class="efeature" href="../brie_doom/player_t.html#f_mo">mo</a> <span class="ekeyword">as</span> mo
			<span class="ekeyword">then</span>
				<a class="efeature" href="../brie_doom/p_map.html#f_usething">usething</a> <span class="esymbol">:=</span> <span class="elocal">mo</span>
				<span class="elocal">angle</span> <span class="esymbol">:=</span> <span class="elocal">mo</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_angle">angle</a> <a class="esymbol" href="../base/natural_32_ref.html#f_bit_shift_right">|&gt;&gt;</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/tables.html">TABLES</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/tables.html#f_angletofineshift">angletofineshift</a><span class="edot">.</span><a class="efeature" href="../base/natural_32_ref.html#f_as_integer_32">as_integer_32</a>
				<span class="elocal">x1</span> <span class="esymbol">:=</span> <span class="elocal">mo</span><span class="edot">.</span><a class="efeature" href="../brie_doom/degenmobj_t.html#f_x">x</a>
				<span class="elocal">y1</span> <span class="esymbol">:=</span> <span class="elocal">mo</span><span class="edot">.</span><a class="efeature" href="../brie_doom/degenmobj_t.html#f_y">y</a>
				<span class="elocal">x2</span> <span class="esymbol">:=</span> <span class="elocal">x1</span> <a class="esymbol" href="../base/integer_32_ref.html#f_plus">+</a> <span class="ekeyword">create</span> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/fixed_t.html#f_from_integer">from_integer</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="esymbol">(</span><span class="esymbol">{</span><a class="eclass" href="../brie_doom/p_local.html">P_LOCAL</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/p_local.html#f_userange">userange</a> <a class="esymbol" href="../base/integer_32.html#f_bit_shift_right">|&gt;&gt;</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/m_fixed.html">M_FIXED</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/m_fixed.html#f_fracbits">fracbits</a><span class="esymbol">)</span> <a class="esymbol" href="../base/integer_32.html#f_product">*</a> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_r_main">R_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/render/r_main.html#f_finecosine">Finecosine</a> <a class="esymbol" href="../base/array.html#f_item">[</a><span class="elocal">angle</span><a class="esymbol" href="../base/array.html#f_item">]</a><span class="edot">.</span><a class="efeature" href="../base/integer_32_ref.html#f_as_integer_32">as_integer_32</a><span class="esymbol">)</span>
				<span class="elocal">y2</span> <span class="esymbol">:=</span> <span class="elocal">y1</span> <a class="esymbol" href="../base/integer_32_ref.html#f_plus">+</a> <span class="ekeyword">create</span> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/fixed_t.html#f_from_integer">from_integer</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="esymbol">(</span><span class="esymbol">{</span><a class="eclass" href="../brie_doom/p_local.html">P_LOCAL</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/p_local.html#f_userange">userange</a> <a class="esymbol" href="../base/integer_32.html#f_bit_shift_right">|&gt;&gt;</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/m_fixed.html">M_FIXED</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/m_fixed.html#f_fracbits">fracbits</a><span class="esymbol">)</span> <a class="esymbol" href="../base/integer_32.html#f_product">*</a> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_r_main">R_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/tables.html#f_finesine">Finesine</a> <a class="esymbol" href="../base/array.html#f_item">[</a><span class="elocal">angle</span><a class="esymbol" href="../base/array.html#f_item">]</a><span class="esymbol">)</span>
				<span class="ekeyword">if</span> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_maputl">P_maputl</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_maputl.html#f_p_pathtraverse">p_pathtraverse</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">x1</span><span class="esymbol">,</span> <span class="elocal">y1</span><span class="esymbol">,</span> <span class="elocal">x2</span><span class="esymbol">,</span> <span class="elocal">y2</span><span class="esymbol">,</span> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/p_local.html">P_LOCAL</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/p_local.html#f_pt_addlines">pt_addlines</a><span class="esymbol">,</span> <span class="ekeyword">agent</span> <a class="efeature" href="../brie_doom/p_map.html#f_ptr_usetraverse">ptr_usetraverse</a><span class="esymbol">)</span> <span class="ekeyword">then</span>
				<span class="ekeyword">end</span>
			<span class="ekeyword">end</span>
		<span class="ekeyword">end</span>

	<a name="f_ptr_usetraverse"></a><a class="efeature" href="../brie_doom/p_map.html#f_ptr_usetraverse">ptr_usetraverse</a> <span class="esymbol">(</span><span class="elocal">in</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/intercept_t.html">INTERCEPT_T</a><span class="esymbol">)</span><span class="esymbol">:</span> <a class="eclass" href="../base/boolean.html">BOOLEAN</a>
		<span class="ekeyword">require</span>
				<a class="efeature" href="../brie_doom/p_map.html#f_usething">usething</a> <span class="esymbol">/=</span> <span class="ekeyword">Void</span>
		<span class="ekeyword">local</span>
			<span class="elocal">side</span><span class="esymbol">:</span> <a class="eclass" href="../base/integer_32.html">INTEGER_32</a>
		<span class="ekeyword">do</span>
			<span class="ekeyword">check</span>
					<span class="ekeyword">attached</span> <span class="elocal">in</span><span class="edot">.</span><a class="efeature" href="../brie_doom/intercept_t.html#f_line">line</a> <span class="ekeyword">as</span> line <a class="ekeyword" href="../base/boolean.html#f_conjuncted_semistrict">and then</a> <span class="ekeyword">attached</span> <a class="efeature" href="../brie_doom/p_map.html#f_usething">usething</a> <span class="ekeyword">as</span> ut
			<span class="ekeyword">then</span>
				<span class="ekeyword">if</span> <span class="elocal">line</span><span class="edot">.</span><a class="efeature" href="../brie_doom/render/line_t.html#f_special">special</a> <span class="esymbol">=</span> <span class="enumber">0</span> <span class="ekeyword">then</span>
					<a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_maputl">P_maputl</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_maputl.html#f_p_lineopening">p_lineopening</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">line</span><span class="esymbol">)</span>
					<span class="ekeyword">if</span> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_maputl">P_maputl</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_maputl.html#f_openrange">openrange</a> <a class="esymbol" href="../base/comparable.html#f_is_less_equal">&lt;=</a> <span class="ekeyword">create</span> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/fixed_t.html#f_from_integer">from_integer</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="enumber">0</span><span class="esymbol">)</span> <span class="ekeyword">then</span>
						<a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_s_sound">S_sound</a><span class="edot">.</span><a class="efeature" href="../brie_doom/sound/s_sound.html#f_s_startsound">s_startsound</a><span class="esymbol"> </span><span class="esymbol">(</span><a class="efeature" href="../brie_doom/p_map.html#f_usething">usething</a><span class="esymbol">,</span> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/sound/sfxenum_t.html">SFXENUM_T</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/sound/sfxenum_t.html#f_sfx_noway">sfx_noway</a><span class="esymbol">)</span>
						<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">False</span>
					<span class="ekeyword">else</span>
						<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
					<span class="ekeyword">end</span>
				<span class="ekeyword">else</span>
					<span class="elocal">side</span> <span class="esymbol">:=</span> <span class="enumber">0</span>
					<span class="ekeyword">if</span> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_maputl">P_maputl</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_maputl.html#f_p_pointonlineside">p_pointonlineside</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">ut</span><span class="edot">.</span><a class="efeature" href="../brie_doom/degenmobj_t.html#f_x">x</a><span class="esymbol">,</span> <span class="elocal">ut</span><span class="edot">.</span><a class="efeature" href="../brie_doom/degenmobj_t.html#f_y">y</a><span class="esymbol">,</span> <span class="elocal">line</span><span class="esymbol">)</span> <span class="esymbol">=</span> <span class="enumber">1</span> <span class="ekeyword">then</span>
						<span class="elocal">side</span> <span class="esymbol">:=</span> <span class="enumber">1</span>
					<span class="ekeyword">end</span>
					<span class="ekeyword">if</span> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_switch">P_switch</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_switch.html#f_p_usespecialline">p_usespecialline</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">ut</span><span class="esymbol">,</span> <span class="elocal">line</span><span class="esymbol">,</span> <span class="elocal">side</span><span class="esymbol">)</span> <span class="ekeyword">then</span>
					<span class="ekeyword">end</span>
					<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">False</span>
				<span class="ekeyword">end</span>
			<span class="ekeyword">end</span>
		<span class="ekeyword">end</span>

	<a name="f_p_trymove"></a><a class="efeature" href="../brie_doom/p_map.html#f_p_trymove">p_trymove</a> <span class="esymbol">(</span><span class="elocal">thing</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/mobj_t.html">MOBJ_T</a><span class="esymbol">;</span> <span class="elocal">x</span><span class="esymbol">,</span> <span class="elocal">y</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a><span class="esymbol">)</span><span class="esymbol">:</span> <a class="eclass" href="../base/boolean.html">BOOLEAN</a>
			<span class="ecomment">--</span><span class="ecomment"> Attempt to move to a new position,</span>
			<span class="ecomment">--</span><span class="ecomment"> crossing special lines unless MF_TELEPORT is set</span>
		<span class="ekeyword">local</span>
			<span class="elocal">oldx</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a>
			<span class="elocal">oldy</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a>
			<span class="elocal">side</span><span class="esymbol">:</span> <a class="eclass" href="../base/integer_32.html">INTEGER_32</a>
			<span class="elocal">oldside</span><span class="esymbol">:</span> <a class="eclass" href="../base/integer_32.html">INTEGER_32</a>
			<span class="elocal">ld</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/render/line_t.html">LINE_T</a>
			<span class="elocal">returned</span><span class="esymbol">:</span> <a class="eclass" href="../base/boolean.html">BOOLEAN</a>
		<span class="ekeyword">do</span>
			<a class="efeature" href="../brie_doom/p_map.html#f_floatok">floatok</a> <span class="esymbol">:=</span> <span class="ekeyword">False</span>
			<span class="ekeyword">if</span> <a class="ekeyword" href="../base/boolean.html#f_negated">not</a> <a class="efeature" href="../brie_doom/p_map.html#f_p_checkposition">p_checkposition</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">thing</span><span class="esymbol">,</span> <span class="elocal">x</span><span class="esymbol">,</span> <span class="elocal">y</span><span class="esymbol">)</span> <span class="ekeyword">then</span>
				<span class="elocal">returned</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
				<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">False</span>
			<span class="ekeyword">end</span>
			<span class="ekeyword">if</span> <a class="ekeyword" href="../base/boolean.html#f_negated">not</a> <span class="elocal">returned</span> <span class="ekeyword">then</span>
				<span class="ekeyword">if</span> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_flags">flags</a> <a class="esymbol" href="../base/integer_32.html#f_bit_and">&#38;</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/mobjflag_t.html">MOBJFLAG_T</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobjflag_t.html#f_mf_noclip">mf_noclip</a> <span class="esymbol">=</span> <span class="enumber">0</span> <span class="ekeyword">then</span>
					<span class="ekeyword">if</span> <a class="efeature" href="../brie_doom/p_map.html#f_tmceilingz">tmceilingz</a> <a class="esymbol" href="../base/integer_32_ref.html#f_minus">-</a> <a class="efeature" href="../brie_doom/p_map.html#f_tmfloorz">tmfloorz</a> <a class="esymbol" href="../base/integer_32_ref.html#f_is_less">&lt;</a> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_height">height</a> <span class="ekeyword">then</span>
						<span class="elocal">returned</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
						<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">False</span>
					<span class="ekeyword">end</span>
					<span class="ekeyword">if</span> <a class="ekeyword" href="../base/boolean.html#f_negated">not</a> <span class="elocal">returned</span> <span class="ekeyword">then</span>
						<a class="efeature" href="../brie_doom/p_map.html#f_floatok">floatok</a> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
						<span class="ekeyword">if</span> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_flags">flags</a> <a class="esymbol" href="../base/integer_32.html#f_bit_and">&#38;</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/mobjflag_t.html">MOBJFLAG_T</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobjflag_t.html#f_mf_teleport">mf_teleport</a> <span class="esymbol">=</span> <span class="enumber">0</span> <a class="ekeyword" href="../base/boolean.html#f_conjuncted">and</a> <a class="efeature" href="../brie_doom/p_map.html#f_tmceilingz">tmceilingz</a> <a class="esymbol" href="../base/integer_32_ref.html#f_minus">-</a> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/degenmobj_t.html#f_z">z</a> <a class="esymbol" href="../base/integer_32_ref.html#f_is_less">&lt;</a> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_height">height</a> <span class="ekeyword">then</span>
							<span class="elocal">returned</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
							<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">False</span>
						<span class="ekeyword">end</span>
					<span class="ekeyword">end</span>
					<span class="ekeyword">if</span> <a class="ekeyword" href="../base/boolean.html#f_negated">not</a> <span class="elocal">returned</span> <span class="ekeyword">then</span>
						<span class="ekeyword">if</span> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_flags">flags</a> <a class="esymbol" href="../base/integer_32.html#f_bit_and">&#38;</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/mobjflag_t.html">MOBJFLAG_T</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobjflag_t.html#f_mf_teleport">mf_teleport</a> <span class="esymbol">=</span> <span class="enumber">0</span> <a class="ekeyword" href="../base/boolean.html#f_conjuncted">and</a> <a class="efeature" href="../brie_doom/p_map.html#f_tmfloorz">tmfloorz</a> <a class="esymbol" href="../base/integer_32_ref.html#f_minus">-</a> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/degenmobj_t.html#f_z">z</a> <a class="esymbol" href="../base/comparable.html#f_is_greater">&gt;</a> <span class="ekeyword">create</span> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/fixed_t.html#f_from_integer">from_integer</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="enumber">24</span> <a class="esymbol" href="../base/integer_32.html#f_product">*</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/m_fixed.html">M_FIXED</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/m_fixed.html#f_fracunit">fracunit</a><span class="esymbol">)</span> <span class="ekeyword">then</span>
							<span class="elocal">returned</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
							<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">False</span>
						<span class="ekeyword">end</span>
					<span class="ekeyword">end</span>
					<span class="ekeyword">if</span> <a class="ekeyword" href="../base/boolean.html#f_negated">not</a> <span class="elocal">returned</span> <span class="ekeyword">then</span>
						<span class="ekeyword">if</span> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_flags">flags</a> <a class="esymbol" href="../base/integer_32.html#f_bit_and">&#38;</a> <span class="esymbol">(</span><span class="esymbol">{</span><a class="eclass" href="../brie_doom/mobjflag_t.html">MOBJFLAG_T</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobjflag_t.html#f_mf_dropoff">mf_dropoff</a> <a class="esymbol" href="../base/integer_32.html#f_bit_or">|</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/mobjflag_t.html">MOBJFLAG_T</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobjflag_t.html#f_mf_float">mf_float</a><span class="esymbol">)</span> <span class="esymbol">=</span> <span class="enumber">0</span> <a class="ekeyword" href="../base/boolean.html#f_conjuncted">and</a> <a class="efeature" href="../brie_doom/p_map.html#f_tmfloorz">tmfloorz</a> <a class="esymbol" href="../base/integer_32_ref.html#f_minus">-</a> <a class="efeature" href="../brie_doom/p_map.html#f_tmdropoffz">tmdropoffz</a> <a class="esymbol" href="../base/comparable.html#f_is_greater">&gt;</a> <span class="ekeyword">create</span> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/fixed_t.html#f_from_integer">from_integer</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="enumber">24</span> <a class="esymbol" href="../base/integer_32.html#f_product">*</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/m_fixed.html">M_FIXED</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/m_fixed.html#f_fracunit">fracunit</a><span class="esymbol">)</span> <span class="ekeyword">then</span>
							<span class="elocal">returned</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
							<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">False</span>
						<span class="ekeyword">end</span>
					<span class="ekeyword">end</span>
				<span class="ekeyword">end</span>
			<span class="ekeyword">end</span>
			<span class="ekeyword">if</span> <a class="ekeyword" href="../base/boolean.html#f_negated">not</a> <span class="elocal">returned</span> <span class="ekeyword">then</span>
				<a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_maputl">P_maputl</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_maputl.html#f_p_unsetthingposition">p_unsetthingposition</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">thing</span><span class="esymbol">)</span>
				<span class="elocal">oldx</span> <span class="esymbol">:=</span> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/degenmobj_t.html#f_x">x</a>
				<span class="elocal">oldy</span> <span class="esymbol">:=</span> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/degenmobj_t.html#f_y">y</a>
				<span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_floorz">floorz</a> <span class="esymbol">:=</span> <a class="efeature" href="../brie_doom/p_map.html#f_tmfloorz">tmfloorz</a>
				<span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_ceilingz">ceilingz</a> <span class="esymbol">:=</span> <a class="efeature" href="../brie_doom/p_map.html#f_tmceilingz">tmceilingz</a>
				<span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/degenmobj_t.html#f_x">x</a> <span class="esymbol">:=</span> <span class="elocal">x</span>
				<span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/degenmobj_t.html#f_y">y</a> <span class="esymbol">:=</span> <span class="elocal">y</span>
				<a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_maputl">P_maputl</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_maputl.html#f_p_setthingposition">p_setthingposition</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">thing</span><span class="esymbol">)</span>
				<span class="ekeyword">if</span> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_flags">flags</a> <a class="esymbol" href="../base/integer_32.html#f_bit_and">&#38;</a> <span class="esymbol">(</span><span class="esymbol">{</span><a class="eclass" href="../brie_doom/mobjflag_t.html">MOBJFLAG_T</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobjflag_t.html#f_mf_teleport">mf_teleport</a> <a class="esymbol" href="../base/integer_32.html#f_bit_or">|</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/mobjflag_t.html">MOBJFLAG_T</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobjflag_t.html#f_mf_noclip">mf_noclip</a><span class="esymbol">)</span> <span class="esymbol">=</span> <span class="enumber">0</span> <span class="ekeyword">then</span>
					<span class="ekeyword">from</span>
					<span class="ekeyword">until</span>
						<a class="efeature" href="../brie_doom/p_map.html#f_numspechit">numspechit</a> <a class="esymbol" href="../base/comparable.html#f_is_less_equal">&lt;=</a> <span class="enumber">0</span>
					<span class="ekeyword">loop</span>
						<a class="efeature" href="../brie_doom/p_map.html#f_numspechit">numspechit</a> <span class="esymbol">:=</span> <a class="efeature" href="../brie_doom/p_map.html#f_numspechit">numspechit</a> <a class="esymbol" href="../base/integer_32.html#f_minus">-</a> <span class="enumber">1</span>
						<span class="elocal">ld</span> <span class="esymbol">:=</span> <a class="efeature" href="../brie_doom/p_map.html#f_spechit">spechit</a> <a class="esymbol" href="../base/array.html#f_item">[</a><a class="efeature" href="../brie_doom/p_map.html#f_numspechit">numspechit</a><a class="esymbol" href="../base/array.html#f_item">]</a>
						<span class="ekeyword">check</span>
								<span class="ekeyword">attached</span> <span class="elocal">ld</span>
						<span class="ekeyword">then</span>
							<span class="elocal">side</span> <span class="esymbol">:=</span> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_maputl">P_maputl</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_maputl.html#f_p_pointonlineside">p_pointonlineside</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/degenmobj_t.html#f_x">x</a><span class="esymbol">,</span> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/degenmobj_t.html#f_y">y</a><span class="esymbol">,</span> <span class="elocal">ld</span><span class="esymbol">)</span>
							<span class="elocal">oldside</span> <span class="esymbol">:=</span> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_maputl">P_maputl</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_maputl.html#f_p_pointonlineside">p_pointonlineside</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">oldx</span><span class="esymbol">,</span> <span class="elocal">oldy</span><span class="esymbol">,</span> <span class="elocal">ld</span><span class="esymbol">)</span>
							<span class="ekeyword">if</span> <span class="elocal">side</span> <span class="esymbol">/=</span> <span class="elocal">oldside</span> <span class="ekeyword">then</span>
								<span class="ekeyword">if</span> <span class="elocal">ld</span><span class="edot">.</span><a class="efeature" href="../brie_doom/render/line_t.html#f_special">special</a> <span class="esymbol">/=</span> <span class="enumber">0</span> <span class="ekeyword">then</span>
									<a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_spec">P_spec</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_spec.html#f_p_crossspecialline">p_crossspecialline</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="esymbol">{</span><a class="eclass" href="../brie_doom/utils.html">UTILS</a> <span class="esymbol">[</span><a class="eclass" href="../brie_doom/render/line_t.html">LINE_T</a><span class="esymbol">]</span><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/utils.html#f_first_index">first_index</a> <span class="esymbol">(</span><a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_setup">P_setup</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_setup.html#f_lines">lines</a><span class="esymbol">,</span> <span class="elocal">ld</span><span class="esymbol">)</span><span class="esymbol">,</span> <span class="elocal">oldside</span><span class="esymbol">,</span> <span class="elocal">thing</span><span class="esymbol">)</span>
								<span class="ekeyword">end</span>
							<span class="ekeyword">end</span>
						<span class="ekeyword">end</span>
					<span class="ekeyword">end</span>
				<span class="ekeyword">end</span>
				<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
			<span class="ekeyword">end</span>
		<span class="ekeyword">ensure</span>
				<span class="esymbol">(</span><a class="ekeyword" href="../base/boolean.html#f_negated">not</a> <span class="ekeyword">Result</span><span class="esymbol">)</span> <a class="ekeyword" href="../base/boolean.html#f_implication">implies</a> <span class="elocal">thing</span> <span class="esymbol">~</span> <span class="ekeyword">old</span> <span class="elocal">thing</span>
		<span class="ekeyword">end</span>

	<a name="f_p_checkposition"></a><a class="efeature" href="../brie_doom/p_map.html#f_p_checkposition">p_checkposition</a> <span class="esymbol">(</span><span class="elocal">thing</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/mobj_t.html">MOBJ_T</a><span class="esymbol">;</span> <span class="elocal">x</span><span class="esymbol">,</span> <span class="elocal">y</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a><span class="esymbol">)</span><span class="esymbol">:</span> <a class="eclass" href="../base/boolean.html">BOOLEAN</a>
		<span class="ekeyword">local</span>
			<span class="elocal">xl</span><span class="esymbol">:</span> <a class="eclass" href="../base/integer_32.html">INTEGER_32</a>
			<span class="elocal">xh</span><span class="esymbol">:</span> <a class="eclass" href="../base/integer_32.html">INTEGER_32</a>
			<span class="elocal">yl</span><span class="esymbol">:</span> <a class="eclass" href="../base/integer_32.html">INTEGER_32</a>
			<span class="elocal">yh</span><span class="esymbol">:</span> <a class="eclass" href="../base/integer_32.html">INTEGER_32</a>
			<span class="elocal">bx</span><span class="esymbol">:</span> <a class="eclass" href="../base/integer_32.html">INTEGER_32</a>
			<span class="elocal">by</span><span class="esymbol">:</span> <a class="eclass" href="../base/integer_32.html">INTEGER_32</a>
			<span class="elocal">newsubsec</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/subsector_t.html">SUBSECTOR_T</a>
			<span class="elocal">returned</span><span class="esymbol">:</span> <a class="eclass" href="../base/boolean.html">BOOLEAN</a>
		<span class="ekeyword">do</span>
			<a class="efeature" href="../brie_doom/p_map.html#f_tmthing">tmthing</a> <span class="esymbol">:=</span> <span class="elocal">thing</span>
			<a class="efeature" href="../brie_doom/p_map.html#f_tmflags">tmflags</a> <span class="esymbol">:=</span> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_flags">flags</a>
			<a class="efeature" href="../brie_doom/p_map.html#f_tmx">tmx</a> <span class="esymbol">:=</span> <span class="elocal">x</span><span class="edot">.</span><a class="efeature" href="../base/integer_32_ref.html#f_to_integer_32">to_integer_32</a>
			<a class="efeature" href="../brie_doom/p_map.html#f_tmy">tmy</a> <span class="esymbol">:=</span> <span class="elocal">y</span><span class="edot">.</span><a class="efeature" href="../base/integer_32_ref.html#f_to_integer_32">to_integer_32</a>
			<a class="efeature" href="../brie_doom/p_map.html#f_tmbbox">tmbbox</a> <a class="esymbol" href="../base/array.html#f_item">[</a><span class="esymbol">{</span><a class="eclass" href="../brie_doom/m_bbox.html">M_BBOX</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/m_bbox.html#f_boxtop">boxtop</a><a class="esymbol" href="../base/array.html#f_item">]</a> <span class="esymbol">:=</span> <span class="esymbol">(</span><span class="elocal">y</span> <a class="esymbol" href="../base/integer_32_ref.html#f_plus">+</a> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_radius">radius</a><span class="esymbol">)</span><span class="edot">.</span><a class="efeature" href="../base/integer_32_ref.html#f_to_integer_32">to_integer_32</a>
			<a class="efeature" href="../brie_doom/p_map.html#f_tmbbox">tmbbox</a> <a class="esymbol" href="../base/array.html#f_item">[</a><span class="esymbol">{</span><a class="eclass" href="../brie_doom/m_bbox.html">M_BBOX</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/m_bbox.html#f_boxbottom">boxbottom</a><a class="esymbol" href="../base/array.html#f_item">]</a> <span class="esymbol">:=</span> <span class="esymbol">(</span><span class="elocal">y</span> <a class="esymbol" href="../base/integer_32_ref.html#f_minus">-</a> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_radius">radius</a><span class="esymbol">)</span><span class="edot">.</span><a class="efeature" href="../base/integer_32_ref.html#f_to_integer_32">to_integer_32</a>
			<a class="efeature" href="../brie_doom/p_map.html#f_tmbbox">tmbbox</a> <a class="esymbol" href="../base/array.html#f_item">[</a><span class="esymbol">{</span><a class="eclass" href="../brie_doom/m_bbox.html">M_BBOX</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/m_bbox.html#f_boxright">boxright</a><a class="esymbol" href="../base/array.html#f_item">]</a> <span class="esymbol">:=</span> <span class="esymbol">(</span><span class="elocal">x</span> <a class="esymbol" href="../base/integer_32_ref.html#f_plus">+</a> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_radius">radius</a><span class="esymbol">)</span><span class="edot">.</span><a class="efeature" href="../base/integer_32_ref.html#f_to_integer_32">to_integer_32</a>
			<a class="efeature" href="../brie_doom/p_map.html#f_tmbbox">tmbbox</a> <a class="esymbol" href="../base/array.html#f_item">[</a><span class="esymbol">{</span><a class="eclass" href="../brie_doom/m_bbox.html">M_BBOX</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/m_bbox.html#f_boxleft">boxleft</a><a class="esymbol" href="../base/array.html#f_item">]</a> <span class="esymbol">:=</span> <span class="esymbol">(</span><span class="elocal">x</span> <a class="esymbol" href="../base/integer_32_ref.html#f_minus">-</a> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_radius">radius</a><span class="esymbol">)</span><span class="edot">.</span><a class="efeature" href="../base/integer_32_ref.html#f_to_integer_32">to_integer_32</a>
			<a class="efeature" href="../brie_doom/p_map.html#f_ceilingline">ceilingline</a> <span class="esymbol">:=</span> <span class="ekeyword">Void</span>
			<span class="elocal">newsubsec</span> <span class="esymbol">:=</span> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_r_main">R_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/render/r_main.html#f_r_pointinsubsector">r_pointinsubsector</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">x</span><span class="esymbol">,</span> <span class="elocal">y</span><span class="esymbol">)</span>
			<span class="ekeyword">check</span>
					<span class="ekeyword">attached</span> <span class="elocal">newsubsec</span><span class="edot">.</span><a class="efeature" href="../brie_doom/subsector_t.html#f_sector">sector</a> <span class="ekeyword">as</span> sector
			<span class="ekeyword">then</span>
				<a class="efeature" href="../brie_doom/p_map.html#f_tmfloorz">tmfloorz</a> <span class="esymbol">:=</span> <span class="elocal">sector</span><span class="edot">.</span><a class="efeature" href="../brie_doom/render/sector_t.html#f_floorheight">floorheight</a>
				<a class="efeature" href="../brie_doom/p_map.html#f_tmdropoffz">tmdropoffz</a> <span class="esymbol">:=</span> <a class="efeature" href="../brie_doom/p_map.html#f_tmfloorz">tmfloorz</a>
				<a class="efeature" href="../brie_doom/p_map.html#f_tmceilingz">tmceilingz</a> <span class="esymbol">:=</span> <span class="elocal">sector</span><span class="edot">.</span><a class="efeature" href="../brie_doom/render/sector_t.html#f_ceilingheight">ceilingheight</a>
			<span class="ekeyword">end</span>
			<a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_r_main">R_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/render/r_main.html#f_validcount">validcount</a> <span class="esymbol">:=</span> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_r_main">R_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/render/r_main.html#f_validcount">validcount</a> <a class="esymbol" href="../base/integer_32.html#f_plus">+</a> <span class="enumber">1</span>
			<a class="efeature" href="../brie_doom/p_map.html#f_numspechit">numspechit</a> <span class="esymbol">:=</span> <span class="enumber">0</span>
			<span class="ekeyword">if</span> <a class="efeature" href="../brie_doom/p_map.html#f_tmflags">tmflags</a> <a class="esymbol" href="../base/integer_32.html#f_bit_and">&#38;</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/mobjflag_t.html">MOBJFLAG_T</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobjflag_t.html#f_mf_noclip">mf_noclip</a> <span class="esymbol">/=</span> <span class="enumber">0</span> <span class="ekeyword">then</span>
				<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
				<span class="elocal">returned</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
			<span class="ekeyword">end</span>
			<span class="ekeyword">if</span> <a class="ekeyword" href="../base/boolean.html#f_negated">not</a> <span class="elocal">returned</span> <span class="ekeyword">then</span>
				<span class="elocal">xl</span> <span class="esymbol">:=</span> <span class="esymbol">(</span><a class="efeature" href="../brie_doom/p_map.html#f_tmbbox">tmbbox</a> <a class="esymbol" href="../base/array.html#f_item">[</a><span class="esymbol">{</span><a class="eclass" href="../brie_doom/m_bbox.html">M_BBOX</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/m_bbox.html#f_boxleft">boxleft</a><a class="esymbol" href="../base/array.html#f_item">]</a> <a class="esymbol" href="../base/integer_32.html#f_minus">-</a> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_setup">P_setup</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_setup.html#f_bmaporgx">bmaporgx</a><span class="edot">.</span><a class="efeature" href="../base/integer_32_ref.html#f_as_integer_32">as_integer_32</a> <a class="esymbol" href="../base/integer_32.html#f_minus">-</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/p_local.html">P_LOCAL</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/p_local.html#f_maxradius">maxradius</a><span class="esymbol">)</span> <a class="esymbol" href="../base/integer_32.html#f_bit_shift_right">|&gt;&gt;</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/p_local.html">P_LOCAL</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/p_local.html#f_mapblockshift">mapblockshift</a>
				<span class="elocal">xh</span> <span class="esymbol">:=</span> <span class="esymbol">(</span><a class="efeature" href="../brie_doom/p_map.html#f_tmbbox">tmbbox</a> <a class="esymbol" href="../base/array.html#f_item">[</a><span class="esymbol">{</span><a class="eclass" href="../brie_doom/m_bbox.html">M_BBOX</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/m_bbox.html#f_boxright">boxright</a><a class="esymbol" href="../base/array.html#f_item">]</a> <a class="esymbol" href="../base/integer_32.html#f_minus">-</a> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_setup">P_setup</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_setup.html#f_bmaporgx">bmaporgx</a><span class="edot">.</span><a class="efeature" href="../base/integer_32_ref.html#f_as_integer_32">as_integer_32</a> <a class="esymbol" href="../base/integer_32.html#f_plus">+</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/p_local.html">P_LOCAL</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/p_local.html#f_maxradius">maxradius</a><span class="esymbol">)</span> <a class="esymbol" href="../base/integer_32.html#f_bit_shift_right">|&gt;&gt;</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/p_local.html">P_LOCAL</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/p_local.html#f_mapblockshift">mapblockshift</a>
				<span class="elocal">yl</span> <span class="esymbol">:=</span> <span class="esymbol">(</span><a class="efeature" href="../brie_doom/p_map.html#f_tmbbox">tmbbox</a> <a class="esymbol" href="../base/array.html#f_item">[</a><span class="esymbol">{</span><a class="eclass" href="../brie_doom/m_bbox.html">M_BBOX</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/m_bbox.html#f_boxbottom">boxbottom</a><a class="esymbol" href="../base/array.html#f_item">]</a> <a class="esymbol" href="../base/integer_32.html#f_minus">-</a> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_setup">P_setup</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_setup.html#f_bmaporgy">bmaporgy</a><span class="edot">.</span><a class="efeature" href="../base/integer_32_ref.html#f_as_integer_32">as_integer_32</a> <a class="esymbol" href="../base/integer_32.html#f_minus">-</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/p_local.html">P_LOCAL</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/p_local.html#f_maxradius">maxradius</a><span class="esymbol">)</span> <a class="esymbol" href="../base/integer_32.html#f_bit_shift_right">|&gt;&gt;</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/p_local.html">P_LOCAL</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/p_local.html#f_mapblockshift">mapblockshift</a>
				<span class="elocal">yh</span> <span class="esymbol">:=</span> <span class="esymbol">(</span><a class="efeature" href="../brie_doom/p_map.html#f_tmbbox">tmbbox</a> <a class="esymbol" href="../base/array.html#f_item">[</a><span class="esymbol">{</span><a class="eclass" href="../brie_doom/m_bbox.html">M_BBOX</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/m_bbox.html#f_boxtop">boxtop</a><a class="esymbol" href="../base/array.html#f_item">]</a> <a class="esymbol" href="../base/integer_32.html#f_minus">-</a> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_setup">P_setup</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_setup.html#f_bmaporgy">bmaporgy</a><span class="edot">.</span><a class="efeature" href="../base/integer_32_ref.html#f_as_integer_32">as_integer_32</a> <a class="esymbol" href="../base/integer_32.html#f_plus">+</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/p_local.html">P_LOCAL</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/p_local.html#f_maxradius">maxradius</a><span class="esymbol">)</span> <a class="esymbol" href="../base/integer_32.html#f_bit_shift_right">|&gt;&gt;</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/p_local.html">P_LOCAL</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/p_local.html#f_mapblockshift">mapblockshift</a>
				<span class="ekeyword">from</span>
					<span class="elocal">bx</span> <span class="esymbol">:=</span> <span class="elocal">xl</span>
				<span class="ekeyword">until</span>
					<span class="elocal">returned</span> <a class="ekeyword" href="../base/boolean.html#f_disjuncted">or</a> <span class="elocal">bx</span> <a class="esymbol" href="../base/comparable.html#f_is_greater">&gt;</a> <span class="elocal">xh</span>
				<span class="ekeyword">loop</span>
					<span class="ekeyword">from</span>
						<span class="elocal">by</span> <span class="esymbol">:=</span> <span class="elocal">yl</span>
					<span class="ekeyword">until</span>
						<span class="elocal">returned</span> <a class="ekeyword" href="../base/boolean.html#f_disjuncted">or</a> <span class="elocal">by</span> <a class="esymbol" href="../base/comparable.html#f_is_greater">&gt;</a> <span class="elocal">yh</span>
					<span class="ekeyword">loop</span>
						<span class="ekeyword">if</span> <a class="ekeyword" href="../base/boolean.html#f_negated">not</a> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_maputl">P_maputl</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_maputl.html#f_p_blockthingsiterator">p_blockthingsiterator</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">bx</span><span class="esymbol">,</span> <span class="elocal">by</span><span class="esymbol">,</span> <span class="ekeyword">agent</span> <a class="efeature" href="../brie_doom/p_map.html#f_pit_checkthing">pit_checkthing</a><span class="esymbol">)</span> <span class="ekeyword">then</span>
							<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">False</span>
							<span class="elocal">returned</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
						<span class="ekeyword">end</span>
						<span class="elocal">by</span> <span class="esymbol">:=</span> <span class="elocal">by</span> <a class="esymbol" href="../base/integer_32.html#f_plus">+</a> <span class="enumber">1</span>
					<span class="ekeyword">end</span>
					<span class="elocal">bx</span> <span class="esymbol">:=</span> <span class="elocal">bx</span> <a class="esymbol" href="../base/integer_32.html#f_plus">+</a> <span class="enumber">1</span>
				<span class="ekeyword">end</span>
			<span class="ekeyword">end</span>
			<span class="ekeyword">if</span> <a class="ekeyword" href="../base/boolean.html#f_negated">not</a> <span class="elocal">returned</span> <span class="ekeyword">then</span>
				<span class="elocal">xl</span> <span class="esymbol">:=</span> <span class="esymbol">(</span><a class="efeature" href="../brie_doom/p_map.html#f_tmbbox">tmbbox</a> <a class="esymbol" href="../base/array.html#f_item">[</a><span class="esymbol">{</span><a class="eclass" href="../brie_doom/m_bbox.html">M_BBOX</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/m_bbox.html#f_boxleft">boxleft</a><a class="esymbol" href="../base/array.html#f_item">]</a> <a class="esymbol" href="../base/integer_32.html#f_minus">-</a> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_setup">P_setup</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_setup.html#f_bmaporgx">bmaporgx</a><span class="edot">.</span><a class="efeature" href="../base/integer_32_ref.html#f_as_integer_32">as_integer_32</a><span class="esymbol">)</span> <a class="esymbol" href="../base/integer_32.html#f_bit_shift_right">|&gt;&gt;</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/p_local.html">P_LOCAL</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/p_local.html#f_mapblockshift">mapblockshift</a>
				<span class="elocal">xh</span> <span class="esymbol">:=</span> <span class="esymbol">(</span><a class="efeature" href="../brie_doom/p_map.html#f_tmbbox">tmbbox</a> <a class="esymbol" href="../base/array.html#f_item">[</a><span class="esymbol">{</span><a class="eclass" href="../brie_doom/m_bbox.html">M_BBOX</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/m_bbox.html#f_boxright">boxright</a><a class="esymbol" href="../base/array.html#f_item">]</a> <a class="esymbol" href="../base/integer_32.html#f_minus">-</a> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_setup">P_setup</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_setup.html#f_bmaporgx">bmaporgx</a><span class="edot">.</span><a class="efeature" href="../base/integer_32_ref.html#f_as_integer_32">as_integer_32</a><span class="esymbol">)</span> <a class="esymbol" href="../base/integer_32.html#f_bit_shift_right">|&gt;&gt;</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/p_local.html">P_LOCAL</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/p_local.html#f_mapblockshift">mapblockshift</a>
				<span class="elocal">yl</span> <span class="esymbol">:=</span> <span class="esymbol">(</span><a class="efeature" href="../brie_doom/p_map.html#f_tmbbox">tmbbox</a> <a class="esymbol" href="../base/array.html#f_item">[</a><span class="esymbol">{</span><a class="eclass" href="../brie_doom/m_bbox.html">M_BBOX</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/m_bbox.html#f_boxbottom">boxbottom</a><a class="esymbol" href="../base/array.html#f_item">]</a> <a class="esymbol" href="../base/integer_32.html#f_minus">-</a> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_setup">P_setup</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_setup.html#f_bmaporgy">bmaporgy</a><span class="edot">.</span><a class="efeature" href="../base/integer_32_ref.html#f_as_integer_32">as_integer_32</a><span class="esymbol">)</span> <a class="esymbol" href="../base/integer_32.html#f_bit_shift_right">|&gt;&gt;</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/p_local.html">P_LOCAL</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/p_local.html#f_mapblockshift">mapblockshift</a>
				<span class="elocal">yh</span> <span class="esymbol">:=</span> <span class="esymbol">(</span><a class="efeature" href="../brie_doom/p_map.html#f_tmbbox">tmbbox</a> <a class="esymbol" href="../base/array.html#f_item">[</a><span class="esymbol">{</span><a class="eclass" href="../brie_doom/m_bbox.html">M_BBOX</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/m_bbox.html#f_boxtop">boxtop</a><a class="esymbol" href="../base/array.html#f_item">]</a> <a class="esymbol" href="../base/integer_32.html#f_minus">-</a> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_setup">P_setup</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_setup.html#f_bmaporgy">bmaporgy</a><span class="edot">.</span><a class="efeature" href="../base/integer_32_ref.html#f_as_integer_32">as_integer_32</a><span class="esymbol">)</span> <a class="esymbol" href="../base/integer_32.html#f_bit_shift_right">|&gt;&gt;</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/p_local.html">P_LOCAL</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/p_local.html#f_mapblockshift">mapblockshift</a>
				<span class="ekeyword">from</span>
					<span class="elocal">bx</span> <span class="esymbol">:=</span> <span class="elocal">xl</span>
				<span class="ekeyword">until</span>
					<span class="elocal">returned</span> <a class="ekeyword" href="../base/boolean.html#f_disjuncted">or</a> <span class="elocal">bx</span> <a class="esymbol" href="../base/comparable.html#f_is_greater">&gt;</a> <span class="elocal">xh</span>
				<span class="ekeyword">loop</span>
					<span class="ekeyword">from</span>
						<span class="elocal">by</span> <span class="esymbol">:=</span> <span class="elocal">yl</span>
					<span class="ekeyword">until</span>
						<span class="elocal">returned</span> <a class="ekeyword" href="../base/boolean.html#f_disjuncted">or</a> <span class="elocal">by</span> <a class="esymbol" href="../base/comparable.html#f_is_greater">&gt;</a> <span class="elocal">yh</span>
					<span class="ekeyword">loop</span>
						<span class="ekeyword">if</span> <a class="ekeyword" href="../base/boolean.html#f_negated">not</a> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_maputl">P_maputl</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_maputl.html#f_p_blocklinesiterator">p_blocklinesiterator</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">bx</span><span class="esymbol">,</span> <span class="elocal">by</span><span class="esymbol">,</span> <span class="ekeyword">agent</span> <a class="efeature" href="../brie_doom/p_map.html#f_pit_checkline">pit_checkline</a><span class="esymbol">)</span> <span class="ekeyword">then</span>
							<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">False</span>
							<span class="elocal">returned</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
						<span class="ekeyword">end</span>
						<span class="elocal">by</span> <span class="esymbol">:=</span> <span class="elocal">by</span> <a class="esymbol" href="../base/integer_32.html#f_plus">+</a> <span class="enumber">1</span>
					<span class="ekeyword">end</span>
					<span class="elocal">bx</span> <span class="esymbol">:=</span> <span class="elocal">bx</span> <a class="esymbol" href="../base/integer_32.html#f_plus">+</a> <span class="enumber">1</span>
				<span class="ekeyword">end</span>
			<span class="ekeyword">end</span>
			<span class="ekeyword">if</span> <a class="ekeyword" href="../base/boolean.html#f_negated">not</a> <span class="elocal">returned</span> <span class="ekeyword">then</span>
				<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
			<span class="ekeyword">end</span>
		<span class="ekeyword">end</span>

	<a name="f_pit_checkthing"></a><a class="efeature" href="../brie_doom/p_map.html#f_pit_checkthing">pit_checkthing</a> <span class="esymbol">(</span><span class="elocal">thing</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/mobj_t.html">MOBJ_T</a><span class="esymbol">)</span><span class="esymbol">:</span> <a class="eclass" href="../base/boolean.html">BOOLEAN</a>
		<span class="ekeyword">local</span>
			<span class="elocal">blockdist</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a>
			<span class="elocal">solid</span><span class="esymbol">:</span> <a class="eclass" href="../base/boolean.html">BOOLEAN</a>
			<span class="elocal">damage</span><span class="esymbol">:</span> <a class="eclass" href="../base/integer_32.html">INTEGER_32</a>
			<span class="elocal">returned</span><span class="esymbol">:</span> <a class="eclass" href="../base/boolean.html">BOOLEAN</a>
		<span class="ekeyword">do</span>
			<span class="ekeyword">if</span> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_flags">flags</a> <a class="esymbol" href="../base/integer_32.html#f_bit_and">&#38;</a> <span class="esymbol">(</span><a class="efeature" href="../brie_doom/mobjflag_t.html#f_mf_solid">Mf_solid</a> <a class="esymbol" href="../base/integer_32.html#f_bit_or">|</a> <a class="efeature" href="../brie_doom/mobjflag_t.html#f_mf_special">Mf_special</a> <a class="esymbol" href="../base/integer_32.html#f_bit_or">|</a> <a class="efeature" href="../brie_doom/mobjflag_t.html#f_mf_shootable">Mf_shootable</a><span class="esymbol">)</span> <span class="esymbol">=</span> <span class="enumber">0</span> <span class="ekeyword">then</span>
				<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
				<span class="elocal">returned</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
			<span class="ekeyword">end</span>
			<span class="ekeyword">if</span> <a class="ekeyword" href="../base/boolean.html#f_negated">not</a> <span class="elocal">returned</span> <span class="ekeyword">then</span>
				<span class="ekeyword">check</span>
						<span class="ekeyword">attached</span> <a class="efeature" href="../brie_doom/p_map.html#f_tmthing">tmthing</a> <span class="ekeyword">as</span> tmt
				<span class="ekeyword">then</span>
					<span class="elocal">blockdist</span> <span class="esymbol">:=</span> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_radius">radius</a> <a class="esymbol" href="../base/integer_32_ref.html#f_plus">+</a> <span class="elocal">tmt</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_radius">radius</a>
				<span class="ekeyword">end</span>
				<span class="ekeyword">if</span> <span class="esymbol">(</span><span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/degenmobj_t.html#f_x">x</a> <a class="esymbol" href="../base/integer_32_ref.html#f_minus">-</a> <span class="ekeyword">create</span> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/fixed_t.html#f_from_integer">from_integer</a><span class="esymbol"> </span><span class="esymbol">(</span><a class="efeature" href="../brie_doom/p_map.html#f_tmx">tmx</a><span class="esymbol">)</span><span class="esymbol">)</span><span class="edot">.</span><a class="efeature" href="../base/integer_32_ref.html#f_abs">abs</a> <a class="esymbol" href="../base/comparable.html#f_is_greater_equal">&gt;=</a> <span class="elocal">blockdist</span><span class="edot">.</span><a class="efeature" href="../base/integer_32_ref.html#f_as_integer_32">as_integer_32</a> <a class="ekeyword" href="../base/boolean.html#f_disjuncted">or</a> <span class="esymbol">(</span><span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/degenmobj_t.html#f_y">y</a> <a class="esymbol" href="../base/integer_32_ref.html#f_minus">-</a> <span class="ekeyword">create</span> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/fixed_t.html#f_from_integer">from_integer</a><span class="esymbol"> </span><span class="esymbol">(</span><a class="efeature" href="../brie_doom/p_map.html#f_tmy">tmy</a><span class="esymbol">)</span><span class="esymbol">)</span><span class="edot">.</span><a class="efeature" href="../base/integer_32_ref.html#f_abs">abs</a> <a class="esymbol" href="../base/comparable.html#f_is_greater_equal">&gt;=</a> <span class="elocal">blockdist</span><span class="edot">.</span><a class="efeature" href="../base/integer_32_ref.html#f_as_integer_32">as_integer_32</a> <span class="ekeyword">then</span>
					<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
					<span class="elocal">returned</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
				<span class="ekeyword">end</span>
			<span class="ekeyword">end</span>
			<span class="ekeyword">if</span> <a class="ekeyword" href="../base/boolean.html#f_negated">not</a> <span class="elocal">returned</span> <span class="ekeyword">then</span>
				<span class="ekeyword">if</span> <span class="elocal">thing</span> <span class="esymbol">=</span> <a class="efeature" href="../brie_doom/p_map.html#f_tmthing">tmthing</a> <span class="ekeyword">then</span>
					<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
					<span class="elocal">returned</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
				<span class="ekeyword">end</span>
			<span class="ekeyword">end</span>
			<span class="ekeyword">if</span> <a class="ekeyword" href="../base/boolean.html#f_negated">not</a> <span class="elocal">returned</span> <span class="ekeyword">then</span>
				<span class="ekeyword">check</span>
						<span class="ekeyword">attached</span> <a class="efeature" href="../brie_doom/p_map.html#f_tmthing">tmthing</a> <span class="ekeyword">as</span> tmt
				<span class="ekeyword">then</span>
					<span class="ekeyword">if</span> <span class="elocal">tmt</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_flags">flags</a> <a class="esymbol" href="../base/integer_32.html#f_bit_and">&#38;</a> <a class="efeature" href="../brie_doom/mobjflag_t.html#f_mf_skullfly">Mf_skullfly</a> <span class="esymbol">/=</span> <span class="enumber">0</span> <span class="ekeyword">then</span>
						<span class="ekeyword">check</span>
								<span class="ekeyword">attached</span> <span class="elocal">tmt</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_info">info</a> <span class="ekeyword">as</span> info
						<span class="ekeyword">then</span>
							<span class="elocal">damage</span> <span class="esymbol">:=</span> <span class="esymbol">(</span><span class="esymbol">(</span><a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_m_random">M_random</a><span class="edot">.</span><a class="efeature" href="../brie_doom/m_random.html#f_p_random">p_random</a> <a class="esymbol" href="../base/integer_32.html#f_integer_remainder">\\</a> <span class="enumber">8</span><span class="esymbol">)</span> <a class="esymbol" href="../base/integer_32.html#f_plus">+</a> <span class="enumber">1</span><span class="esymbol">)</span> <a class="esymbol" href="../base/integer_32.html#f_product">*</a> <span class="elocal">info</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobjinfo_t.html#f_damage">damage</a>
							<a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_inter">P_inter</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_inter.html#f_p_damagemobj">p_damagemobj</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">thing</span><span class="esymbol">,</span> <a class="efeature" href="../brie_doom/p_map.html#f_tmthing">tmthing</a><span class="esymbol">,</span> <a class="efeature" href="../brie_doom/p_map.html#f_tmthing">tmthing</a><span class="esymbol">,</span> <span class="elocal">damage</span><span class="esymbol">)</span>
							<span class="elocal">tmt</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_flags">flags</a> <span class="esymbol">:=</span> <span class="elocal">tmt</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_flags">flags</a> <a class="esymbol" href="../base/integer_32.html#f_bit_and">&#38;</a> <a class="efeature" href="../brie_doom/mobjflag_t.html#f_mf_skullfly">Mf_skullfly</a><span class="edot">.</span><a class="efeature" href="../base/integer_32.html#f_bit_not">bit_not</a>
							<span class="elocal">tmt</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_momx">momx</a> <span class="esymbol">:=</span> <span class="ekeyword">create</span> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/fixed_t.html#f_from_integer">from_integer</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="enumber">0</span><span class="esymbol">)</span>
							<span class="elocal">tmt</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_momy">momy</a> <span class="esymbol">:=</span> <span class="ekeyword">create</span> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/fixed_t.html#f_from_integer">from_integer</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="enumber">0</span><span class="esymbol">)</span>
							<span class="elocal">tmt</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_momz">momz</a> <span class="esymbol">:=</span> <span class="ekeyword">create</span> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/fixed_t.html#f_from_integer">from_integer</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="enumber">0</span><span class="esymbol">)</span>
							<span class="ekeyword">if</span> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_mobj">P_mobj</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_mobj.html#f_p_setmobjstate">p_setmobjstate</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">tmt</span><span class="esymbol">,</span> <span class="elocal">info</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobjinfo_t.html#f_spawnstate">spawnstate</a><span class="esymbol">)</span> <span class="ekeyword">then</span>
							<span class="ekeyword">end</span>
							<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">False</span>
							<span class="elocal">returned</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
						<span class="ekeyword">end</span>
					<span class="ekeyword">end</span>
				<span class="ekeyword">end</span>
			<span class="ekeyword">end</span>
			<span class="ekeyword">if</span> <a class="ekeyword" href="../base/boolean.html#f_negated">not</a> <span class="elocal">returned</span> <span class="ekeyword">then</span>
				<span class="ekeyword">check</span>
						<span class="ekeyword">attached</span> <a class="efeature" href="../brie_doom/p_map.html#f_tmthing">tmthing</a> <span class="ekeyword">as</span> tmt
				<span class="ekeyword">then</span>
					<span class="ekeyword">if</span> <span class="elocal">tmt</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_flags">flags</a> <a class="esymbol" href="../base/integer_32.html#f_bit_and">&#38;</a> <a class="efeature" href="../brie_doom/mobjflag_t.html#f_mf_missile">Mf_missile</a> <span class="esymbol">/=</span> <span class="enumber">0</span> <span class="ekeyword">then</span>
						<span class="ekeyword">if</span> <span class="elocal">tmt</span><span class="edot">.</span><a class="efeature" href="../brie_doom/degenmobj_t.html#f_z">z</a> <a class="esymbol" href="../base/comparable.html#f_is_greater">&gt;</a> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/degenmobj_t.html#f_z">z</a> <a class="esymbol" href="../base/integer_32_ref.html#f_plus">+</a> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_height">height</a> <span class="ekeyword">then</span>
							<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
							<span class="elocal">returned</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
						<span class="ekeyword">elseif</span> <span class="elocal">tmt</span><span class="edot">.</span><a class="efeature" href="../brie_doom/degenmobj_t.html#f_z">z</a> <a class="esymbol" href="../base/integer_32_ref.html#f_plus">+</a> <span class="elocal">tmt</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_height">height</a> <a class="esymbol" href="../base/integer_32_ref.html#f_is_less">&lt;</a> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/degenmobj_t.html#f_z">z</a> <span class="ekeyword">then</span>
							<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
							<span class="elocal">returned</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
						<span class="ekeyword">end</span>
						<span class="ekeyword">if</span> <a class="ekeyword" href="../base/boolean.html#f_negated">not</a> <span class="elocal">returned</span> <span class="ekeyword">then</span>
							<span class="ekeyword">if</span> <span class="ekeyword">attached</span> <span class="elocal">tmt</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_target">target</a> <span class="ekeyword">as</span> target <a class="ekeyword" href="../base/boolean.html#f_conjuncted_semistrict">and then</a> <span class="esymbol">(</span><span class="elocal">target</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_type">type</a> <span class="esymbol">=</span> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_type">type</a> <a class="ekeyword" href="../base/boolean.html#f_disjuncted">or</a> <span class="esymbol">(</span><span class="elocal">target</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_type">type</a> <span class="esymbol">=</span> <a class="efeature" href="../brie_doom/mobjtype_t.html#f_mt_knight">Mt_knight</a> <a class="ekeyword" href="../base/boolean.html#f_conjuncted">and</a> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_type">type</a> <span class="esymbol">=</span> <a class="efeature" href="../brie_doom/mobjtype_t.html#f_mt_bruiser">Mt_bruiser</a><span class="esymbol">)</span> <a class="ekeyword" href="../base/boolean.html#f_disjuncted">or</a> <span class="esymbol">(</span><span class="elocal">target</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_type">type</a> <span class="esymbol">=</span> <a class="efeature" href="../brie_doom/mobjtype_t.html#f_mt_bruiser">Mt_bruiser</a> <a class="ekeyword" href="../base/boolean.html#f_conjuncted">and</a> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_type">type</a> <span class="esymbol">=</span> <a class="efeature" href="../brie_doom/mobjtype_t.html#f_mt_knight">Mt_knight</a><span class="esymbol">)</span><span class="esymbol">)</span> <span class="ekeyword">then</span>
								<span class="ekeyword">if</span> <span class="elocal">thing</span> <span class="esymbol">=</span> <span class="elocal">tmt</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_target">target</a> <span class="ekeyword">then</span>
									<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
									<span class="elocal">returned</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
								<span class="ekeyword">elseif</span> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_type">type</a> <span class="esymbol">/=</span> <a class="efeature" href="../brie_doom/mobjtype_t.html#f_mt_player">Mt_player</a> <span class="ekeyword">then</span>
									<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">False</span>
									<span class="elocal">returned</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
								<span class="ekeyword">end</span>
							<span class="ekeyword">end</span>
						<span class="ekeyword">end</span>
						<span class="ekeyword">if</span> <a class="ekeyword" href="../base/boolean.html#f_negated">not</a> <span class="elocal">returned</span> <span class="ekeyword">then</span>
							<span class="ekeyword">if</span> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_flags">flags</a> <a class="esymbol" href="../base/integer_32.html#f_bit_and">&#38;</a> <a class="efeature" href="../brie_doom/mobjflag_t.html#f_mf_shootable">Mf_shootable</a> <span class="esymbol">=</span> <span class="enumber">0</span> <span class="ekeyword">then</span>
								<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_flags">flags</a> <a class="esymbol" href="../base/integer_32.html#f_bit_and">&#38;</a> <a class="efeature" href="../brie_doom/mobjflag_t.html#f_mf_solid">Mf_solid</a> <span class="esymbol">=</span> <span class="enumber">0</span>
								<span class="elocal">returned</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
							<span class="ekeyword">end</span>
						<span class="ekeyword">end</span>
						<span class="ekeyword">if</span> <a class="ekeyword" href="../base/boolean.html#f_negated">not</a> <span class="elocal">returned</span> <span class="ekeyword">then</span>
							<span class="ekeyword">check</span>
									<span class="ekeyword">attached</span> <span class="elocal">tmt</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_info">info</a> <span class="ekeyword">as</span> info
							<span class="ekeyword">then</span>
								<span class="elocal">damage</span> <span class="esymbol">:=</span> <span class="esymbol">(</span><span class="esymbol">(</span><a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_m_random">M_random</a><span class="edot">.</span><a class="efeature" href="../brie_doom/m_random.html#f_p_random">p_random</a> <a class="esymbol" href="../base/integer_32.html#f_integer_remainder">\\</a> <span class="enumber">8</span><span class="esymbol">)</span> <a class="esymbol" href="../base/integer_32.html#f_plus">+</a> <span class="enumber">1</span><span class="esymbol">)</span> <a class="esymbol" href="../base/integer_32.html#f_product">*</a> <span class="elocal">info</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobjinfo_t.html#f_damage">damage</a>
								<a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_inter">P_inter</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_inter.html#f_p_damagemobj">p_damagemobj</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">thing</span><span class="esymbol">,</span> <a class="efeature" href="../brie_doom/p_map.html#f_tmthing">tmthing</a><span class="esymbol">,</span> <span class="elocal">tmt</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_target">target</a><span class="esymbol">,</span> <span class="elocal">damage</span><span class="esymbol">)</span>
							<span class="ekeyword">end</span>
							<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">False</span>
							<span class="elocal">returned</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
						<span class="ekeyword">end</span>
					<span class="ekeyword">end</span>
				<span class="ekeyword">end</span>
			<span class="ekeyword">end</span>
			<span class="ekeyword">if</span> <a class="ekeyword" href="../base/boolean.html#f_negated">not</a> <span class="elocal">returned</span> <span class="ekeyword">then</span>
				<span class="ekeyword">if</span> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_flags">flags</a> <a class="esymbol" href="../base/integer_32.html#f_bit_and">&#38;</a> <a class="efeature" href="../brie_doom/mobjflag_t.html#f_mf_special">Mf_special</a> <span class="esymbol">/=</span> <span class="enumber">0</span> <span class="ekeyword">then</span>
					<span class="elocal">solid</span> <span class="esymbol">:=</span> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_flags">flags</a> <a class="esymbol" href="../base/integer_32.html#f_bit_and">&#38;</a> <a class="efeature" href="../brie_doom/mobjflag_t.html#f_mf_solid">Mf_solid</a> <span class="esymbol">/=</span> <span class="enumber">0</span>
					<span class="ekeyword">if</span> <a class="efeature" href="../brie_doom/p_map.html#f_tmflags">tmflags</a> <a class="esymbol" href="../base/integer_32.html#f_bit_and">&#38;</a> <a class="efeature" href="../brie_doom/mobjflag_t.html#f_mf_pickup">Mf_pickup</a> <span class="esymbol">/=</span> <span class="enumber">0</span> <span class="ekeyword">then</span>
						<span class="ekeyword">check</span>
								<span class="ekeyword">attached</span> <a class="efeature" href="../brie_doom/p_map.html#f_tmthing">tmthing</a> <span class="ekeyword">as</span> tmt
						<span class="ekeyword">then</span>
							<a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_inter">P_inter</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_inter.html#f_p_touchspecialthing">p_touchspecialthing</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">thing</span><span class="esymbol">,</span> <span class="elocal">tmt</span><span class="esymbol">)</span>
						<span class="ekeyword">end</span>
					<span class="ekeyword">end</span>
					<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <a class="ekeyword" href="../base/boolean.html#f_negated">not</a> <span class="elocal">solid</span>
					<span class="elocal">returned</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
				<span class="ekeyword">end</span>
			<span class="ekeyword">end</span>
			<span class="ekeyword">if</span> <a class="ekeyword" href="../base/boolean.html#f_negated">not</a> <span class="elocal">returned</span> <span class="ekeyword">then</span>
				<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_flags">flags</a> <a class="esymbol" href="../base/integer_32.html#f_bit_and">&#38;</a> <a class="efeature" href="../brie_doom/mobjflag_t.html#f_mf_solid">Mf_solid</a> <span class="esymbol">=</span> <span class="enumber">0</span>
			<span class="ekeyword">end</span>
		<span class="ekeyword">end</span>

	<a name="f_pit_checkline"></a><a class="efeature" href="../brie_doom/p_map.html#f_pit_checkline">pit_checkline</a> <span class="esymbol">(</span><span class="elocal">ld</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/render/line_t.html">LINE_T</a><span class="esymbol">)</span><span class="esymbol">:</span> <a class="eclass" href="../base/boolean.html">BOOLEAN</a>
			<span class="ecomment">--</span><span class="ecomment"> Adjusts tmfloorz and tmceilingz as lines are contacted</span>
		<span class="ekeyword">local</span>
			<span class="elocal">returned</span><span class="esymbol">:</span> <a class="eclass" href="../base/boolean.html">BOOLEAN</a>
		<span class="ekeyword">do</span>
			<span class="ekeyword">if</span> <a class="efeature" href="../brie_doom/p_map.html#f_tmbbox">tmbbox</a> <a class="esymbol" href="../base/array.html#f_item">[</a><span class="esymbol">{</span><a class="eclass" href="../brie_doom/m_bbox.html">M_BBOX</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/m_bbox.html#f_boxright">boxright</a><a class="esymbol" href="../base/array.html#f_item">]</a> <a class="esymbol" href="../base/comparable.html#f_is_less_equal">&lt;=</a> <span class="elocal">ld</span><span class="edot">.</span><a class="efeature" href="../brie_doom/render/line_t.html#f_bbox">bbox</a> <a class="esymbol" href="../base/array.html#f_item">[</a><span class="esymbol">{</span><a class="eclass" href="../brie_doom/m_bbox.html">M_BBOX</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/m_bbox.html#f_boxleft">boxleft</a><a class="esymbol" href="../base/array.html#f_item">]</a><span class="edot">.</span><a class="efeature" href="../base/integer_32_ref.html#f_as_integer_32">as_integer_32</a> <a class="ekeyword" href="../base/boolean.html#f_disjuncted">or</a> <a class="efeature" href="../brie_doom/p_map.html#f_tmbbox">tmbbox</a> <a class="esymbol" href="../base/array.html#f_item">[</a><span class="esymbol">{</span><a class="eclass" href="../brie_doom/m_bbox.html">M_BBOX</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/m_bbox.html#f_boxleft">boxleft</a><a class="esymbol" href="../base/array.html#f_item">]</a> <a class="esymbol" href="../base/comparable.html#f_is_greater_equal">&gt;=</a> <span class="elocal">ld</span><span class="edot">.</span><a class="efeature" href="../brie_doom/render/line_t.html#f_bbox">bbox</a> <a class="esymbol" href="../base/array.html#f_item">[</a><span class="esymbol">{</span><a class="eclass" href="../brie_doom/m_bbox.html">M_BBOX</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/m_bbox.html#f_boxright">boxright</a><a class="esymbol" href="../base/array.html#f_item">]</a><span class="edot">.</span><a class="efeature" href="../base/integer_32_ref.html#f_as_integer_32">as_integer_32</a> <a class="ekeyword" href="../base/boolean.html#f_disjuncted">or</a> <a class="efeature" href="../brie_doom/p_map.html#f_tmbbox">tmbbox</a> <a class="esymbol" href="../base/array.html#f_item">[</a><span class="esymbol">{</span><a class="eclass" href="../brie_doom/m_bbox.html">M_BBOX</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/m_bbox.html#f_boxtop">boxtop</a><a class="esymbol" href="../base/array.html#f_item">]</a> <a class="esymbol" href="../base/comparable.html#f_is_less_equal">&lt;=</a> <span class="elocal">ld</span><span class="edot">.</span><a class="efeature" href="../brie_doom/render/line_t.html#f_bbox">bbox</a> <a class="esymbol" href="../base/array.html#f_item">[</a><span class="esymbol">{</span><a class="eclass" href="../brie_doom/m_bbox.html">M_BBOX</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/m_bbox.html#f_boxbottom">boxbottom</a><a class="esymbol" href="../base/array.html#f_item">]</a><span class="edot">.</span><a class="efeature" href="../base/integer_32_ref.html#f_as_integer_32">as_integer_32</a> <a class="ekeyword" href="../base/boolean.html#f_disjuncted">or</a> <a class="efeature" href="../brie_doom/p_map.html#f_tmbbox">tmbbox</a> <a class="esymbol" href="../base/array.html#f_item">[</a><span class="esymbol">{</span><a class="eclass" href="../brie_doom/m_bbox.html">M_BBOX</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/m_bbox.html#f_boxbottom">boxbottom</a><a class="esymbol" href="../base/array.html#f_item">]</a> <a class="esymbol" href="../base/comparable.html#f_is_greater_equal">&gt;=</a> <span class="elocal">ld</span><span class="edot">.</span><a class="efeature" href="../brie_doom/render/line_t.html#f_bbox">bbox</a> <a class="esymbol" href="../base/array.html#f_item">[</a><span class="esymbol">{</span><a class="eclass" href="../brie_doom/m_bbox.html">M_BBOX</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/m_bbox.html#f_boxtop">boxtop</a><a class="esymbol" href="../base/array.html#f_item">]</a><span class="edot">.</span><a class="efeature" href="../base/integer_32_ref.html#f_as_integer_32">as_integer_32</a> <span class="ekeyword">then</span>
				<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
				<span class="elocal">returned</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
			<span class="ekeyword">end</span>
			<span class="ekeyword">if</span> <a class="ekeyword" href="../base/boolean.html#f_negated">not</a> <span class="elocal">returned</span> <span class="ekeyword">then</span>
				<span class="ekeyword">if</span> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_maputl">P_maputl</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_maputl.html#f_p_boxonlineside">p_boxonlineside</a><span class="esymbol"> </span><span class="esymbol">(</span><a class="efeature" href="../brie_doom/p_map.html#f_tmbbox">tmbbox</a><span class="esymbol">,</span> <span class="elocal">ld</span><span class="esymbol">)</span> <span class="esymbol">/=</span> <span class="enumber">-1</span> <span class="ekeyword">then</span>
					<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
					<span class="elocal">returned</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
				<span class="ekeyword">end</span>
			<span class="ekeyword">end</span>
			<span class="ekeyword">if</span> <a class="ekeyword" href="../base/boolean.html#f_negated">not</a> <span class="elocal">returned</span> <span class="ekeyword">then</span>
				<span class="ekeyword">if</span> <span class="elocal">ld</span><span class="edot">.</span><a class="efeature" href="../brie_doom/render/line_t.html#f_backsector">backsector</a> <span class="esymbol">=</span> <span class="ekeyword">Void</span> <span class="ekeyword">then</span>
					<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">False</span>
					<span class="elocal">returned</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
				<span class="ekeyword">end</span>
			<span class="ekeyword">end</span>
			<span class="ekeyword">if</span> <a class="ekeyword" href="../base/boolean.html#f_negated">not</a> <span class="elocal">returned</span> <span class="ekeyword">then</span>
				<span class="ekeyword">check</span>
						<span class="ekeyword">attached</span> <a class="efeature" href="../brie_doom/p_map.html#f_tmthing">tmthing</a> <span class="ekeyword">as</span> tmt
				<span class="ekeyword">then</span>
					<span class="ekeyword">if</span> <span class="elocal">tmt</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_flags">flags</a> <a class="esymbol" href="../base/integer_32.html#f_bit_and">&#38;</a> <a class="efeature" href="../brie_doom/mobjflag_t.html#f_mf_missile">Mf_missile</a> <span class="esymbol">=</span> <span class="enumber">0</span> <span class="ekeyword">then</span>
						<span class="ekeyword">if</span> <span class="elocal">ld</span><span class="edot">.</span><a class="efeature" href="../brie_doom/render/line_t.html#f_flags">flags</a><span class="edot">.</span><a class="efeature" href="../base/integer_16_ref.html#f_to_integer_32">to_integer_32</a> <a class="esymbol" href="../base/integer_32.html#f_bit_and">&#38;</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/doomdata_h.html">DOOMDATA_H</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/doomdata_h.html#f_ml_blocking">ml_blocking</a> <span class="esymbol">/=</span> <span class="enumber">0</span> <span class="ekeyword">then</span>
							<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">False</span>
							<span class="elocal">returned</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
						<span class="ekeyword">elseif</span> <span class="elocal">tmt</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_player">player</a> <span class="esymbol">=</span> <span class="ekeyword">Void</span> <a class="ekeyword" href="../base/boolean.html#f_conjuncted">and</a> <span class="elocal">ld</span><span class="edot">.</span><a class="efeature" href="../brie_doom/render/line_t.html#f_flags">flags</a><span class="edot">.</span><a class="efeature" href="../base/integer_16_ref.html#f_to_integer_32">to_integer_32</a> <a class="esymbol" href="../base/integer_32.html#f_bit_and">&#38;</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/doomdata_h.html">DOOMDATA_H</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/doomdata_h.html#f_ml_blockmonsters">ml_blockmonsters</a> <span class="esymbol">/=</span> <span class="enumber">0</span> <span class="ekeyword">then</span>
							<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">False</span>
							<span class="elocal">returned</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
						<span class="ekeyword">end</span>
					<span class="ekeyword">end</span>
				<span class="ekeyword">end</span>
			<span class="ekeyword">end</span>
			<span class="ekeyword">if</span> <a class="ekeyword" href="../base/boolean.html#f_negated">not</a> <span class="elocal">returned</span> <span class="ekeyword">then</span>
				<a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_maputl">P_maputl</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_maputl.html#f_p_lineopening">p_lineopening</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">ld</span><span class="esymbol">)</span>
				<span class="ekeyword">if</span> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_maputl">P_maputl</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_maputl.html#f_opentop">opentop</a> <a class="esymbol" href="../base/integer_32_ref.html#f_is_less">&lt;</a> <a class="efeature" href="../brie_doom/p_map.html#f_tmceilingz">tmceilingz</a> <span class="ekeyword">then</span>
					<a class="efeature" href="../brie_doom/p_map.html#f_tmceilingz">tmceilingz</a> <span class="esymbol">:=</span> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_maputl">P_maputl</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_maputl.html#f_opentop">opentop</a>
					<a class="efeature" href="../brie_doom/p_map.html#f_ceilingline">ceilingline</a> <span class="esymbol">:=</span> <span class="elocal">ld</span>
				<span class="ekeyword">end</span>
				<span class="ekeyword">if</span> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_maputl">P_maputl</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_maputl.html#f_openbottom">openbottom</a> <a class="esymbol" href="../base/comparable.html#f_is_greater">&gt;</a> <a class="efeature" href="../brie_doom/p_map.html#f_tmfloorz">tmfloorz</a> <span class="ekeyword">then</span>
					<a class="efeature" href="../brie_doom/p_map.html#f_tmfloorz">tmfloorz</a> <span class="esymbol">:=</span> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_maputl">P_maputl</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_maputl.html#f_openbottom">openbottom</a>
				<span class="ekeyword">end</span>
				<span class="ekeyword">if</span> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_maputl">P_maputl</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_maputl.html#f_lowfloor">lowfloor</a> <a class="esymbol" href="../base/integer_32_ref.html#f_is_less">&lt;</a> <a class="efeature" href="../brie_doom/p_map.html#f_tmdropoffz">tmdropoffz</a> <span class="ekeyword">then</span>
					<a class="efeature" href="../brie_doom/p_map.html#f_tmdropoffz">tmdropoffz</a> <span class="esymbol">:=</span> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_maputl">P_maputl</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_maputl.html#f_lowfloor">lowfloor</a>
				<span class="ekeyword">end</span>
				<span class="ekeyword">if</span> <span class="elocal">ld</span><span class="edot">.</span><a class="efeature" href="../brie_doom/render/line_t.html#f_special">special</a> <span class="esymbol">/=</span> <span class="enumber">0</span> <span class="ekeyword">then</span>
					<a class="efeature" href="../brie_doom/p_map.html#f_spechit">spechit</a> <a class="esymbol" href="../base/array.html#f_item">[</a><a class="efeature" href="../brie_doom/p_map.html#f_numspechit">numspechit</a><a class="esymbol" href="../base/array.html#f_item">]</a> <span class="esymbol">:=</span> <span class="elocal">ld</span>
					<a class="efeature" href="../brie_doom/p_map.html#f_numspechit">numspechit</a> <span class="esymbol">:=</span> <a class="efeature" href="../brie_doom/p_map.html#f_numspechit">numspechit</a> <a class="esymbol" href="../base/integer_32.html#f_plus">+</a> <span class="enumber">1</span>
				<span class="ekeyword">end</span>
				<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
			<span class="ekeyword">end</span>
		<span class="ekeyword">end</span>

	<a name="f_p_slidemove"></a><a class="efeature" href="../brie_doom/p_map.html#f_p_slidemove">p_slidemove</a> <span class="esymbol">(</span><span class="elocal">mo</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/mobj_t.html">MOBJ_T</a><span class="esymbol">)</span>
			<span class="ecomment">--</span><span class="ecomment"> The momx/momy move is bad, so try to slide</span>
			<span class="ecomment">--</span><span class="ecomment"> along a wall.</span>
			<span class="ecomment">--</span><span class="ecomment"> Find the first line hit, move flush to it,</span>
			<span class="ecomment">--</span><span class="ecomment"> and slide along it</span>
			<span class="ecomment">--</span>
			<span class="ecomment">--</span><span class="ecomment"> This is a kludgy mess.</span>
		<span class="ekeyword">do</span>
		<span class="ekeyword">end</span>
	
<span class="ekeyword">feature</span> <span class="ecomment">--</span><span class="ecomment"> SECTOR HEIGHT CHANGING</span>
<span class="ecomment">--</span><span class="ecomment"> After modifying a sectors floor or ceiling height,</span>
<span class="ecomment">--</span><span class="ecomment"> call this routine to adjust the positions</span>
<span class="ecomment">--</span><span class="ecomment"> of all things that touch the sector.</span>
<span class="ecomment">--</span>
<span class="ecomment">--</span><span class="ecomment"> If anything doesn't fit anymore, true will be returned.</span>
<span class="ecomment">--</span><span class="ecomment"> If crunch is true, they will take damage</span>
<span class="ecomment">--</span><span class="ecomment"> as they are being crushed.</span>
<span class="ecomment">--</span><span class="ecomment"> If Crunch is false, you should set the sector height back</span>
<span class="ecomment">--</span><span class="ecomment"> the way it was and call P_ChangeSector again to undo the changes.</span>

	<a name="f_crushchange"></a><a class="efeature" href="../brie_doom/p_map.html#f_crushchange">crushchange</a><span class="esymbol">:</span> <a class="eclass" href="../base/boolean.html">BOOLEAN</a>

	<a name="f_nofit"></a><a class="efeature" href="../brie_doom/p_map.html#f_nofit">nofit</a><span class="esymbol">:</span> <a class="eclass" href="../base/boolean.html">BOOLEAN</a>

	<a name="f_p_thingheightclip"></a><a class="efeature" href="../brie_doom/p_map.html#f_p_thingheightclip">p_thingheightclip</a> <span class="esymbol">(</span><span class="elocal">thing</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/mobj_t.html">MOBJ_T</a><span class="esymbol">)</span><span class="esymbol">:</span> <a class="eclass" href="../base/boolean.html">BOOLEAN</a>
		<span class="ekeyword">local</span>
			<span class="elocal">onfloor</span><span class="esymbol">:</span> <a class="eclass" href="../base/boolean.html">BOOLEAN</a>
		<span class="ekeyword">do</span>
			<span class="elocal">onfloor</span> <span class="esymbol">:=</span> <span class="esymbol">(</span><span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/degenmobj_t.html#f_z">z</a> <span class="esymbol">=</span> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_floorz">floorz</a><span class="esymbol">)</span>
			<a class="efeature" href="../brie_doom/p_map.html#f_p_checkposition">p_checkposition</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">thing</span><span class="esymbol">,</span> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/degenmobj_t.html#f_x">x</a><span class="esymbol">,</span> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/degenmobj_t.html#f_y">y</a><span class="esymbol">)</span><span class="edot">.</span><a class="efeature" href="../base/any.html#f_do_nothing">do_nothing</a>
			<span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_floorz">floorz</a> <span class="esymbol">:=</span> <a class="efeature" href="../brie_doom/p_map.html#f_tmfloorz">tmfloorz</a>
			<span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_ceilingz">ceilingz</a> <span class="esymbol">:=</span> <a class="efeature" href="../brie_doom/p_map.html#f_tmceilingz">tmceilingz</a>
			<span class="ekeyword">if</span> <span class="elocal">onfloor</span> <span class="ekeyword">then</span>
				<span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/degenmobj_t.html#f_z">z</a> <span class="esymbol">:=</span> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_floorz">floorz</a>
			<span class="ekeyword">else</span>
				<span class="ekeyword">if</span> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/degenmobj_t.html#f_z">z</a> <a class="esymbol" href="../base/integer_32_ref.html#f_plus">+</a> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_height">height</a> <a class="esymbol" href="../base/comparable.html#f_is_greater">&gt;</a> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_ceilingz">ceilingz</a> <span class="ekeyword">then</span>
					<span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/degenmobj_t.html#f_z">z</a> <span class="esymbol">:=</span> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_ceilingz">ceilingz</a> <a class="esymbol" href="../base/integer_32_ref.html#f_minus">-</a> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_height">height</a>
				<span class="ekeyword">end</span>
			<span class="ekeyword">end</span>
			<span class="ekeyword">if</span> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_ceilingz">ceilingz</a> <a class="esymbol" href="../base/integer_32_ref.html#f_minus">-</a> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_floorz">floorz</a> <a class="esymbol" href="../base/integer_32_ref.html#f_is_less">&lt;</a> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_height">height</a> <span class="ekeyword">then</span>
				<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">False</span>
			<span class="ekeyword">else</span>
				<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
			<span class="ekeyword">end</span>
		<span class="ekeyword">end</span>

	<a name="f_pit_changesector"></a><a class="efeature" href="../brie_doom/p_map.html#f_pit_changesector">pit_changesector</a> <span class="esymbol">(</span><span class="elocal">thing</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/mobj_t.html">MOBJ_T</a><span class="esymbol">)</span><span class="esymbol">:</span> <a class="eclass" href="../base/boolean.html">BOOLEAN</a>
		<span class="ekeyword">local</span>
			<span class="elocal">mo</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/mobj_t.html">MOBJ_T</a>
		<span class="ekeyword">do</span>
			<span class="ekeyword">if</span> <a class="efeature" href="../brie_doom/p_map.html#f_p_thingheightclip">p_thingheightclip</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">thing</span><span class="esymbol">)</span> <span class="ekeyword">then</span>
				<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
			<span class="ekeyword">else</span>
				<span class="ekeyword">if</span> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_health">health</a> <a class="esymbol" href="../base/comparable.html#f_is_less_equal">&lt;=</a> <span class="enumber">0</span> <span class="ekeyword">then</span>
					<a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_mobj">P_mobj</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_mobj.html#f_p_setmobjstate">p_setmobjstate</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">thing</span><span class="esymbol">,</span> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/statenum_t.html">STATENUM_T</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/statenum_t.html#f_s_gibs">s_gibs</a><span class="esymbol">)</span><span class="edot">.</span><a class="efeature" href="../base/any.html#f_do_nothing">do_nothing</a>
					<span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_flags">flags</a> <span class="esymbol">:=</span> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_flags">flags</a> <a class="esymbol" href="../base/integer_32.html#f_bit_and">&#38;</a> <a class="efeature" href="../brie_doom/mobjflag_t.html#f_mf_solid">Mf_solid</a><span class="edot">.</span><a class="efeature" href="../base/integer_32.html#f_bit_not">bit_not</a>
					<span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_height">height</a> <span class="esymbol">:=</span> <span class="ekeyword">create</span> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/fixed_t.html#f_from_integer">from_integer</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="enumber">0</span><span class="esymbol">)</span>
					<span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_radius">radius</a> <span class="esymbol">:=</span> <span class="ekeyword">create</span> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/fixed_t.html#f_from_integer">from_integer</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="enumber">0</span><span class="esymbol">)</span>
					<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
				<span class="ekeyword">else</span>
					<span class="ekeyword">if</span> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_flags">flags</a> <a class="esymbol" href="../base/integer_32.html#f_bit_and">&#38;</a> <a class="efeature" href="../brie_doom/mobjflag_t.html#f_mf_dropped">Mf_dropped</a> <span class="esymbol">/=</span> <span class="enumber">0</span> <span class="ekeyword">then</span>
						<a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_mobj">P_mobj</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_mobj.html#f_p_removemobj">p_removemobj</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">thing</span><span class="esymbol">)</span>
						<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
					<span class="ekeyword">else</span>
						<span class="ekeyword">if</span> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_flags">flags</a> <a class="esymbol" href="../base/integer_32.html#f_bit_and">&#38;</a> <a class="efeature" href="../brie_doom/mobjflag_t.html#f_mf_shootable">Mf_shootable</a> <span class="esymbol">=</span> <span class="enumber">0</span> <span class="ekeyword">then</span>
							<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
						<span class="ekeyword">else</span>
							<a class="efeature" href="../brie_doom/p_map.html#f_nofit">nofit</a> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
							<span class="ekeyword">if</span> <a class="efeature" href="../brie_doom/p_map.html#f_crushchange">crushchange</a> <a class="ekeyword" href="../base/boolean.html#f_conjuncted">and</a> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_tick">P_tick</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_tick.html#f_leveltime">leveltime</a> <a class="esymbol" href="../base/integer_32.html#f_bit_and">&#38;</a> <span class="enumber">3</span> <span class="esymbol">=</span> <span class="enumber">0</span> <span class="ekeyword">then</span>
								<a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_inter">P_inter</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_inter.html#f_p_damagemobj">p_damagemobj</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">thing</span><span class="esymbol">,</span> <span class="ekeyword">Void</span><span class="esymbol">,</span> <span class="ekeyword">Void</span><span class="esymbol">,</span> <span class="enumber">10</span><span class="esymbol">)</span>
								<span class="elocal">mo</span> <span class="esymbol">:=</span> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_mobj">P_mobj</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_mobj.html#f_p_spawnmobj">p_spawnmobj</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/degenmobj_t.html#f_x">x</a><span class="esymbol">,</span> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/degenmobj_t.html#f_y">y</a><span class="esymbol">,</span> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/degenmobj_t.html#f_z">z</a> <a class="esymbol" href="../base/integer_32_ref.html#f_plus">+</a> <span class="elocal">thing</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_height">height</a> <a class="esymbol" href="../base/integer_32_ref.html#f_integer_quotient">//</a> <span class="ekeyword">create</span> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/fixed_t.html#f_from_integer">from_integer</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="enumber">2</span><span class="esymbol">)</span><span class="esymbol">,</span> <a class="efeature" href="../brie_doom/mobjtype_t.html#f_mt_blood">Mt_blood</a><span class="esymbol">)</span>
								<span class="elocal">mo</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_momx">momx</a> <span class="esymbol">:=</span> <span class="ekeyword">create</span> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/fixed_t.html#f_from_integer">from_integer</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="esymbol">(</span><a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_m_random">M_random</a><span class="edot">.</span><a class="efeature" href="../brie_doom/m_random.html#f_p_random">p_random</a> <a class="esymbol" href="../base/integer_32.html#f_minus">-</a> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_m_random">M_random</a><span class="edot">.</span><a class="efeature" href="../brie_doom/m_random.html#f_p_random">p_random</a><span class="esymbol">)</span> <a class="esymbol" href="../base/integer_32.html#f_bit_shift_left">|&lt;&lt;</a> <span class="enumber">12</span><span class="esymbol">)</span>
								<span class="elocal">mo</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_momy">momy</a> <span class="esymbol">:=</span> <span class="ekeyword">create</span> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/fixed_t.html#f_from_integer">from_integer</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="esymbol">(</span><a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_m_random">M_random</a><span class="edot">.</span><a class="efeature" href="../brie_doom/m_random.html#f_p_random">p_random</a> <a class="esymbol" href="../base/integer_32.html#f_minus">-</a> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_m_random">M_random</a><span class="edot">.</span><a class="efeature" href="../brie_doom/m_random.html#f_p_random">p_random</a><span class="esymbol">)</span> <a class="esymbol" href="../base/integer_32.html#f_bit_shift_left">|&lt;&lt;</a> <span class="enumber">12</span><span class="esymbol">)</span>
							<span class="ekeyword">end</span>
							<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
						<span class="ekeyword">end</span>
					<span class="ekeyword">end</span>
				<span class="ekeyword">end</span>
			<span class="ekeyword">end</span>
		<span class="ekeyword">end</span>

	<a name="f_p_changesector"></a><a class="efeature" href="../brie_doom/p_map.html#f_p_changesector">p_changesector</a> <span class="esymbol">(</span><span class="elocal">sector</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/render/sector_t.html">SECTOR_T</a><span class="esymbol">;</span> <span class="elocal">crunch</span><span class="esymbol">:</span> <a class="eclass" href="../base/boolean.html">BOOLEAN</a><span class="esymbol">)</span><span class="esymbol">:</span> <a class="eclass" href="../base/boolean.html">BOOLEAN</a>
		<span class="ekeyword">local</span>
			<span class="elocal">x</span><span class="esymbol">:</span> <a class="eclass" href="../base/integer_32.html">INTEGER_32</a>
			<span class="elocal">y</span><span class="esymbol">:</span> <a class="eclass" href="../base/integer_32.html">INTEGER_32</a>
		<span class="ekeyword">do</span>
			<a class="efeature" href="../brie_doom/p_map.html#f_nofit">nofit</a> <span class="esymbol">:=</span> <span class="ekeyword">False</span>
			<a class="efeature" href="../brie_doom/p_map.html#f_crushchange">crushchange</a> <span class="esymbol">:=</span> <span class="elocal">crunch</span>
			<span class="ekeyword">from</span>
				<span class="elocal">x</span> <span class="esymbol">:=</span> <span class="elocal">sector</span><span class="edot">.</span><a class="efeature" href="../brie_doom/render/sector_t.html#f_blockbox">blockbox</a> <a class="esymbol" href="../base/array.html#f_item">[</a><span class="esymbol">{</span><a class="eclass" href="../brie_doom/m_bbox.html">M_BBOX</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/m_bbox.html#f_boxleft">boxleft</a><a class="esymbol" href="../base/array.html#f_item">]</a>
			<span class="ekeyword">until</span>
				<span class="elocal">x</span> <a class="esymbol" href="../base/comparable.html#f_is_greater">&gt;</a> <span class="elocal">sector</span><span class="edot">.</span><a class="efeature" href="../brie_doom/render/sector_t.html#f_blockbox">blockbox</a> <a class="esymbol" href="../base/array.html#f_item">[</a><span class="esymbol">{</span><a class="eclass" href="../brie_doom/m_bbox.html">M_BBOX</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/m_bbox.html#f_boxright">boxright</a><a class="esymbol" href="../base/array.html#f_item">]</a>
			<span class="ekeyword">loop</span>
				<span class="ekeyword">from</span>
					<span class="elocal">y</span> <span class="esymbol">:=</span> <span class="elocal">sector</span><span class="edot">.</span><a class="efeature" href="../brie_doom/render/sector_t.html#f_blockbox">blockbox</a> <a class="esymbol" href="../base/array.html#f_item">[</a><span class="esymbol">{</span><a class="eclass" href="../brie_doom/m_bbox.html">M_BBOX</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/m_bbox.html#f_boxbottom">boxbottom</a><a class="esymbol" href="../base/array.html#f_item">]</a>
				<span class="ekeyword">until</span>
					<span class="elocal">y</span> <a class="esymbol" href="../base/comparable.html#f_is_greater">&gt;</a> <span class="elocal">sector</span><span class="edot">.</span><a class="efeature" href="../brie_doom/render/sector_t.html#f_blockbox">blockbox</a> <a class="esymbol" href="../base/array.html#f_item">[</a><span class="esymbol">{</span><a class="eclass" href="../brie_doom/m_bbox.html">M_BBOX</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/m_bbox.html#f_boxtop">boxtop</a><a class="esymbol" href="../base/array.html#f_item">]</a>
				<span class="ekeyword">loop</span>
					<a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_maputl">P_maputl</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_maputl.html#f_p_blockthingsiterator">p_blockthingsiterator</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">x</span><span class="esymbol">,</span> <span class="elocal">y</span><span class="esymbol">,</span> <span class="ekeyword">agent</span> <a class="efeature" href="../brie_doom/p_map.html#f_pit_changesector">pit_changesector</a><span class="esymbol">)</span><span class="edot">.</span><a class="efeature" href="../base/any.html#f_do_nothing">do_nothing</a>
					<span class="elocal">y</span> <span class="esymbol">:=</span> <span class="elocal">y</span> <a class="esymbol" href="../base/integer_32.html#f_plus">+</a> <span class="enumber">1</span>
				<span class="ekeyword">end</span>
				<span class="elocal">x</span> <span class="esymbol">:=</span> <span class="elocal">x</span> <a class="esymbol" href="../base/integer_32.html#f_plus">+</a> <span class="enumber">1</span>
			<span class="ekeyword">end</span>
			<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <a class="efeature" href="../brie_doom/p_map.html#f_nofit">nofit</a>
		<span class="ekeyword">end</span>
	
<span class="ekeyword">feature</span> 

	<a name="f_linetarget"></a><a class="efeature" href="../brie_doom/p_map.html#f_linetarget">linetarget</a><span class="esymbol">:</span> <span class="ekeyword">detachable</span> <a class="eclass" href="../brie_doom/mobj_t.html">MOBJ_T</a>
			<span class="ecomment">--</span><span class="ecomment"> who got hit (or NULL)</span>

	<a name="f_shootthing"></a><a class="efeature" href="../brie_doom/p_map.html#f_shootthing">shootthing</a><span class="esymbol">:</span> <span class="ekeyword">detachable</span> <a class="eclass" href="../brie_doom/mobj_t.html">MOBJ_T</a>

	<a name="f_shootz"></a><a class="efeature" href="../brie_doom/p_map.html#f_shootz">shootz</a><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a>
			<span class="ecomment">--</span><span class="ecomment"> Height if not aiming up or down</span>
			<span class="ecomment">--</span><span class="ecomment"> ???: use slope for monsters?</span>

	<a name="f_la_damage"></a><a class="efeature" href="../brie_doom/p_map.html#f_la_damage">la_damage</a><span class="esymbol">:</span> <a class="eclass" href="../base/integer_32.html">INTEGER_32</a>

	<a name="f_attackrange"></a><a class="efeature" href="../brie_doom/p_map.html#f_attackrange">attackrange</a><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a>

	<a name="f_aimslope"></a><a class="efeature" href="../brie_doom/p_map.html#f_aimslope">aimslope</a><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a>

	<a name="f_p_aimlineattack"></a><a class="efeature" href="../brie_doom/p_map.html#f_p_aimlineattack">p_aimlineattack</a> <span class="esymbol">(</span><span class="elocal">t1</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/mobj_t.html">MOBJ_T</a><span class="esymbol">;</span> <span class="elocal">a_angle</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/math/angle_t.html">ANGLE_T</a><span class="esymbol">;</span> <span class="elocal">distance</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a><span class="esymbol">)</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a>
		<span class="ekeyword">local</span>
			<span class="elocal">x2</span><span class="esymbol">,</span> <span class="elocal">y2</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a>
			<span class="elocal">angle</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/math/angle_t.html">ANGLE_T</a>
		<span class="ekeyword">do</span>
			<span class="elocal">angle</span> <span class="esymbol">:=</span> <span class="elocal">a_angle</span> <a class="esymbol" href="../base/natural_32_ref.html#f_bit_shift_right">|&gt;&gt;</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/render/r_main.html">R_MAIN</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/tables.html#f_angletofineshift">angletofineshift</a>
			<a class="efeature" href="../brie_doom/p_map.html#f_shootthing">shootthing</a> <span class="esymbol">:=</span> <span class="elocal">t1</span>
			<span class="elocal">x2</span> <span class="esymbol">:=</span> <span class="elocal">t1</span><span class="edot">.</span><a class="efeature" href="../brie_doom/degenmobj_t.html#f_x">x</a> <a class="esymbol" href="../base/integer_32_ref.html#f_plus">+</a> <span class="esymbol">(</span><span class="elocal">distance</span> <a class="esymbol" href="../base/integer_32_ref.html#f_bit_shift_right">|&gt;&gt;</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/m_fixed.html">M_FIXED</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/m_fixed.html#f_fracbits">fracbits</a><span class="esymbol">)</span> <a class="esymbol" href="../base/integer_32_ref.html#f_product">*</a> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_r_main">R_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/render/r_main.html#f_finecosine">Finecosine</a> <a class="esymbol" href="../base/array.html#f_item">[</a><span class="elocal">angle</span><span class="edot">.</span><a class="efeature" href="../base/natural_32_ref.html#f_as_integer_32">as_integer_32</a><a class="esymbol" href="../base/array.html#f_item">]</a>
			<span class="elocal">y2</span> <span class="esymbol">:=</span> <span class="elocal">t1</span><span class="edot">.</span><a class="efeature" href="../brie_doom/degenmobj_t.html#f_y">y</a> <a class="esymbol" href="../base/integer_32_ref.html#f_plus">+</a> <span class="esymbol">(</span><span class="elocal">distance</span> <a class="esymbol" href="../base/integer_32_ref.html#f_bit_shift_right">|&gt;&gt;</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/m_fixed.html">M_FIXED</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/m_fixed.html#f_fracbits">fracbits</a><span class="esymbol">)</span> <a class="esymbol" href="../base/integer_32_ref.html#f_product">*</a> <span class="ekeyword">create</span> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/fixed_t.html#f_from_integer">from_integer</a><span class="esymbol"> </span><span class="esymbol">(</span><a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_r_main">R_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/tables.html#f_finesine">Finesine</a> <a class="esymbol" href="../base/array.html#f_item">[</a><span class="elocal">angle</span><span class="edot">.</span><a class="efeature" href="../base/natural_32_ref.html#f_as_integer_32">as_integer_32</a><a class="esymbol" href="../base/array.html#f_item">]</a><span class="esymbol">)</span>
			<a class="efeature" href="../brie_doom/p_map.html#f_shootz">shootz</a> <span class="esymbol">:=</span> <span class="elocal">t1</span><span class="edot">.</span><a class="efeature" href="../brie_doom/degenmobj_t.html#f_z">z</a> <a class="esymbol" href="../base/integer_32_ref.html#f_plus">+</a> <span class="esymbol">(</span><span class="elocal">t1</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_height">height</a> <a class="esymbol" href="../base/integer_32_ref.html#f_bit_shift_right">|&gt;&gt;</a> <span class="enumber">1</span><span class="esymbol">)</span> <a class="esymbol" href="../base/integer_32_ref.html#f_plus">+</a> <span class="ekeyword">create</span> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/fixed_t.html#f_from_integer">from_integer</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="enumber">8</span> <a class="esymbol" href="../base/integer_32.html#f_product">*</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/m_fixed.html">M_FIXED</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/m_fixed.html#f_fracunit">fracunit</a><span class="esymbol">)</span>
			<a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_sight">P_sight</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_sight.html#f_topslope">topslope</a> <span class="esymbol">:=</span> <span class="ekeyword">create</span> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/fixed_t.html#f_from_integer">from_integer</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="enumber">100</span> <a class="esymbol" href="../base/integer_32.html#f_product">*</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/m_fixed.html">M_FIXED</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/m_fixed.html#f_fracunit">fracunit</a> <a class="esymbol" href="../base/integer_32.html#f_integer_quotient">//</a> <span class="enumber">160</span><span class="esymbol">)</span>
			<a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_sight">P_sight</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_sight.html#f_bottomslope">bottomslope</a> <span class="esymbol">:=</span> <span class="ekeyword">create</span> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/fixed_t.html#f_from_integer">from_integer</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="enumber">-100</span> <a class="esymbol" href="../base/integer_32.html#f_product">*</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/m_fixed.html">M_FIXED</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/m_fixed.html#f_fracunit">fracunit</a> <a class="esymbol" href="../base/integer_32.html#f_integer_quotient">//</a> <span class="enumber">160</span><span class="esymbol">)</span>
			<a class="efeature" href="../brie_doom/p_map.html#f_attackrange">attackrange</a> <span class="esymbol">:=</span> <span class="elocal">distance</span>
			<a class="efeature" href="../brie_doom/p_map.html#f_linetarget">linetarget</a> <span class="esymbol">:=</span> <span class="ekeyword">Void</span>
			<a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_maputl">P_maputl</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_maputl.html#f_p_pathtraverse">p_pathtraverse</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">t1</span><span class="edot">.</span><a class="efeature" href="../brie_doom/degenmobj_t.html#f_x">x</a><span class="esymbol">,</span> <span class="elocal">t1</span><span class="edot">.</span><a class="efeature" href="../brie_doom/degenmobj_t.html#f_y">y</a><span class="esymbol">,</span> <span class="elocal">x2</span><span class="esymbol">,</span> <span class="elocal">y2</span><span class="esymbol">,</span> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/p_local.html">P_LOCAL</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/p_local.html#f_pt_addlines">pt_addlines</a> <a class="esymbol" href="../base/integer_32.html#f_bit_or">|</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/p_local.html">P_LOCAL</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/p_local.html#f_pt_addthings">pt_addthings</a><span class="esymbol">,</span> <span class="ekeyword">agent</span> <a class="efeature" href="../brie_doom/p_map.html#f_ptr_aimtraverse">ptr_aimtraverse</a><span class="esymbol">)</span><span class="edot">.</span><a class="efeature" href="../base/any.html#f_do_nothing">do_nothing</a>
			<span class="ekeyword">if</span> <a class="efeature" href="../brie_doom/p_map.html#f_linetarget">linetarget</a> <span class="esymbol">/=</span> <span class="ekeyword">Void</span> <span class="ekeyword">then</span>
				<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <a class="efeature" href="../brie_doom/p_map.html#f_aimslope">aimslope</a>
			<span class="ekeyword">else</span>
				<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">create</span> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/fixed_t.html#f_from_integer">from_integer</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="enumber">0</span><span class="esymbol">)</span>
			<span class="ekeyword">end</span>
		<span class="ekeyword">end</span>
	
<span class="ekeyword">feature</span> <span class="ecomment">--</span><span class="ecomment"> PTR_AimTraverse</span>

	<a name="f_ptr_aimtraverse"></a><a class="efeature" href="../brie_doom/p_map.html#f_ptr_aimtraverse">ptr_aimtraverse</a> <span class="esymbol">(</span><span class="elocal">in</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/intercept_t.html">INTERCEPT_T</a><span class="esymbol">)</span><span class="esymbol">:</span> <a class="eclass" href="../base/boolean.html">BOOLEAN</a>
			<span class="ecomment">--</span><span class="ecomment"> Sets linetarget and aimslope when a target is aimed at.</span>
		<span class="ekeyword">local</span>
			<span class="elocal">slope</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a>
			<span class="elocal">dist</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a>
			<span class="elocal">thingtopslope</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a>
			<span class="elocal">thingbottomslope</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a>
		<span class="ekeyword">do</span>
			<span class="ekeyword">if</span> <span class="elocal">in</span><span class="edot">.</span><a class="efeature" href="../brie_doom/intercept_t.html#f_isaline">isaline</a> <span class="ekeyword">then</span>
				<span class="ekeyword">check</span>
						<span class="ekeyword">attached</span> <span class="elocal">in</span><span class="edot">.</span><a class="efeature" href="../brie_doom/intercept_t.html#f_line">line</a> <span class="ekeyword">as</span> li
				<span class="ekeyword">then</span>
					<span class="ekeyword">if</span> <span class="elocal">li</span><span class="edot">.</span><a class="efeature" href="../brie_doom/render/line_t.html#f_flags">flags</a><span class="edot">.</span><a class="efeature" href="../base/integer_16_ref.html#f_to_integer_32">to_integer_32</a> <a class="esymbol" href="../base/integer_32.html#f_bit_and">&#38;</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/doomdata_h.html">DOOMDATA_H</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/doomdata_h.html#f_ml_twosided">ml_twosided</a> <span class="esymbol">=</span> <span class="enumber">0</span> <span class="ekeyword">then</span>
						<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">False</span>
					<span class="ekeyword">else</span>
						<a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_maputl">P_maputl</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_maputl.html#f_p_lineopening">p_lineopening</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">li</span><span class="esymbol">)</span>
						<span class="ekeyword">if</span> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_maputl">P_maputl</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_maputl.html#f_openbottom">openbottom</a> <a class="esymbol" href="../base/comparable.html#f_is_greater_equal">&gt;=</a> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_maputl">P_maputl</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_maputl.html#f_opentop">opentop</a> <span class="ekeyword">then</span>
							<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">False</span>
						<span class="ekeyword">else</span>
							<span class="elocal">dist</span> <span class="esymbol">:=</span> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/m_fixed.html">M_FIXED</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/m_fixed.html#f_fixedmul">fixedmul</a> <span class="esymbol">(</span><a class="efeature" href="../brie_doom/p_map.html#f_attackrange">attackrange</a><span class="esymbol">,</span> <span class="elocal">in</span><span class="edot">.</span><a class="efeature" href="../brie_doom/intercept_t.html#f_frac">frac</a><span class="esymbol">)</span>
							<span class="ekeyword">check</span>
									<span class="ekeyword">attached</span> <span class="elocal">li</span><span class="edot">.</span><a class="efeature" href="../brie_doom/render/line_t.html#f_frontsector">frontsector</a> <span class="ekeyword">as</span> front <a class="ekeyword" href="../base/boolean.html#f_conjuncted_semistrict">and then</a> <span class="ekeyword">attached</span> <span class="elocal">li</span><span class="edot">.</span><a class="efeature" href="../brie_doom/render/line_t.html#f_backsector">backsector</a> <span class="ekeyword">as</span> back
							<span class="ekeyword">then</span>
								<span class="ekeyword">if</span> <span class="elocal">front</span><span class="edot">.</span><a class="efeature" href="../brie_doom/render/sector_t.html#f_floorheight">floorheight</a> <span class="esymbol">/=</span> <span class="elocal">back</span><span class="edot">.</span><a class="efeature" href="../brie_doom/render/sector_t.html#f_floorheight">floorheight</a> <span class="ekeyword">then</span>
									<span class="elocal">slope</span> <span class="esymbol">:=</span> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/m_fixed.html">M_FIXED</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/m_fixed.html#f_fixeddiv">fixeddiv</a> <span class="esymbol">(</span><a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_maputl">P_maputl</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_maputl.html#f_openbottom">openbottom</a> <a class="esymbol" href="../base/integer_32_ref.html#f_minus">-</a> <a class="efeature" href="../brie_doom/p_map.html#f_shootz">shootz</a><span class="esymbol">,</span> <span class="elocal">dist</span><span class="esymbol">)</span>
									<span class="ekeyword">if</span> <span class="elocal">slope</span> <a class="esymbol" href="../base/comparable.html#f_is_greater">&gt;</a> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_sight">P_sight</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_sight.html#f_bottomslope">bottomslope</a> <span class="ekeyword">then</span>
										<a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_sight">P_sight</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_sight.html#f_bottomslope">bottomslope</a> <span class="esymbol">:=</span> <span class="elocal">slope</span>
									<span class="ekeyword">end</span>
								<span class="ekeyword">end</span>
								<span class="ekeyword">if</span> <span class="elocal">front</span><span class="edot">.</span><a class="efeature" href="../brie_doom/render/sector_t.html#f_ceilingheight">ceilingheight</a> <span class="esymbol">/=</span> <span class="elocal">back</span><span class="edot">.</span><a class="efeature" href="../brie_doom/render/sector_t.html#f_ceilingheight">ceilingheight</a> <span class="ekeyword">then</span>
									<span class="elocal">slope</span> <span class="esymbol">:=</span> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/m_fixed.html">M_FIXED</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/m_fixed.html#f_fixeddiv">fixeddiv</a> <span class="esymbol">(</span><a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_maputl">P_maputl</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_maputl.html#f_opentop">opentop</a> <a class="esymbol" href="../base/integer_32_ref.html#f_minus">-</a> <a class="efeature" href="../brie_doom/p_map.html#f_shootz">shootz</a><span class="esymbol">,</span> <span class="elocal">dist</span><span class="esymbol">)</span>
									<span class="ekeyword">if</span> <span class="elocal">slope</span> <a class="esymbol" href="../base/integer_32_ref.html#f_is_less">&lt;</a> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_sight">P_sight</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_sight.html#f_topslope">topslope</a> <span class="ekeyword">then</span>
										<a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_sight">P_sight</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_sight.html#f_topslope">topslope</a> <span class="esymbol">:=</span> <span class="elocal">slope</span>
									<span class="ekeyword">end</span>
								<span class="ekeyword">end</span>
							<span class="ekeyword">end</span>
							<span class="ekeyword">if</span> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_sight">P_sight</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_sight.html#f_topslope">topslope</a> <a class="esymbol" href="../base/comparable.html#f_is_less_equal">&lt;=</a> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_sight">P_sight</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_sight.html#f_bottomslope">bottomslope</a> <span class="ekeyword">then</span>
								<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">False</span>
							<span class="ekeyword">else</span>
								<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
							<span class="ekeyword">end</span>
						<span class="ekeyword">end</span>
					<span class="ekeyword">end</span>
				<span class="ekeyword">end</span>
			<span class="ekeyword">else</span>
				<span class="ekeyword">check</span>
						<span class="ekeyword">attached</span> <span class="elocal">in</span><span class="edot">.</span><a class="efeature" href="../brie_doom/intercept_t.html#f_thing">thing</a> <span class="ekeyword">as</span> th
				<span class="ekeyword">then</span>
					<span class="ekeyword">if</span> <span class="elocal">th</span> <span class="esymbol">=</span> <a class="efeature" href="../brie_doom/p_map.html#f_shootthing">shootthing</a> <span class="ekeyword">then</span>
						<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
					<span class="ekeyword">else</span>
						<span class="ekeyword">if</span> <span class="elocal">th</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_flags">flags</a> <a class="esymbol" href="../base/integer_32.html#f_bit_and">&#38;</a> <a class="efeature" href="../brie_doom/mobjflag_t.html#f_mf_shootable">Mf_shootable</a> <span class="esymbol">=</span> <span class="enumber">0</span> <span class="ekeyword">then</span>
							<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
						<span class="ekeyword">else</span>
							<span class="elocal">dist</span> <span class="esymbol">:=</span> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/m_fixed.html">M_FIXED</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/m_fixed.html#f_fixedmul">fixedmul</a> <span class="esymbol">(</span><a class="efeature" href="../brie_doom/p_map.html#f_attackrange">attackrange</a><span class="esymbol">,</span> <span class="elocal">in</span><span class="edot">.</span><a class="efeature" href="../brie_doom/intercept_t.html#f_frac">frac</a><span class="esymbol">)</span>
							<span class="elocal">thingtopslope</span> <span class="esymbol">:=</span> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/m_fixed.html">M_FIXED</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/m_fixed.html#f_fixeddiv">fixeddiv</a> <span class="esymbol">(</span><span class="elocal">th</span><span class="edot">.</span><a class="efeature" href="../brie_doom/degenmobj_t.html#f_z">z</a> <a class="esymbol" href="../base/integer_32_ref.html#f_plus">+</a> <span class="elocal">th</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_height">height</a> <a class="esymbol" href="../base/integer_32_ref.html#f_minus">-</a> <a class="efeature" href="../brie_doom/p_map.html#f_shootz">shootz</a><span class="esymbol">,</span> <span class="elocal">dist</span><span class="esymbol">)</span>
							<span class="ekeyword">if</span> <span class="elocal">thingtopslope</span> <a class="esymbol" href="../base/integer_32_ref.html#f_is_less">&lt;</a> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_sight">P_sight</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_sight.html#f_bottomslope">bottomslope</a> <span class="ekeyword">then</span>
								<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
							<span class="ekeyword">else</span>
								<span class="elocal">thingbottomslope</span> <span class="esymbol">:=</span> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/m_fixed.html">M_FIXED</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/m_fixed.html#f_fixeddiv">fixeddiv</a> <span class="esymbol">(</span><span class="elocal">th</span><span class="edot">.</span><a class="efeature" href="../brie_doom/degenmobj_t.html#f_z">z</a> <a class="esymbol" href="../base/integer_32_ref.html#f_minus">-</a> <a class="efeature" href="../brie_doom/p_map.html#f_shootz">shootz</a><span class="esymbol">,</span> <span class="elocal">dist</span><span class="esymbol">)</span>
								<span class="ekeyword">if</span> <span class="elocal">thingbottomslope</span> <a class="esymbol" href="../base/comparable.html#f_is_greater">&gt;</a> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_sight">P_sight</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_sight.html#f_topslope">topslope</a> <span class="ekeyword">then</span>
									<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
								<span class="ekeyword">else</span>
									<span class="ekeyword">if</span> <span class="elocal">thingtopslope</span> <a class="esymbol" href="../base/comparable.html#f_is_greater">&gt;</a> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_sight">P_sight</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_sight.html#f_topslope">topslope</a> <span class="ekeyword">then</span>
										<span class="elocal">thingtopslope</span> <span class="esymbol">:=</span> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_sight">P_sight</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_sight.html#f_topslope">topslope</a>
									<span class="ekeyword">end</span>
									<span class="ekeyword">if</span> <span class="elocal">thingbottomslope</span> <a class="esymbol" href="../base/integer_32_ref.html#f_is_less">&lt;</a> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_sight">P_sight</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_sight.html#f_bottomslope">bottomslope</a> <span class="ekeyword">then</span>
										<span class="elocal">thingbottomslope</span> <span class="esymbol">:=</span> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_sight">P_sight</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_sight.html#f_bottomslope">bottomslope</a>
									<span class="ekeyword">end</span>
									<a class="efeature" href="../brie_doom/p_map.html#f_aimslope">aimslope</a> <span class="esymbol">:=</span> <span class="esymbol">(</span><span class="elocal">thingtopslope</span> <a class="esymbol" href="../base/integer_32_ref.html#f_plus">+</a> <span class="elocal">thingbottomslope</span><span class="esymbol">)</span> <a class="esymbol" href="../base/integer_32_ref.html#f_integer_quotient">//</a> <span class="ekeyword">create</span> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/fixed_t.html#f_from_integer">from_integer</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="enumber">2</span><span class="esymbol">)</span>
									<a class="efeature" href="../brie_doom/p_map.html#f_linetarget">linetarget</a> <span class="esymbol">:=</span> <span class="elocal">th</span>
									<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">False</span>
								<span class="ekeyword">end</span>
							<span class="ekeyword">end</span>
						<span class="ekeyword">end</span>
					<span class="ekeyword">end</span>
				<span class="ekeyword">end</span>
			<span class="ekeyword">end</span>
		<span class="ekeyword">end</span>

	<a name="f_p_lineattack"></a><a class="efeature" href="../brie_doom/p_map.html#f_p_lineattack">p_lineattack</a> <span class="esymbol">(</span><span class="elocal">t1</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/mobj_t.html">MOBJ_T</a><span class="esymbol">;</span> <span class="elocal">a_angle</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/math/angle_t.html">ANGLE_T</a><span class="esymbol">;</span> <span class="elocal">distance</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a><span class="esymbol">;</span> <span class="elocal">slope</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a><span class="esymbol">;</span> <span class="elocal">damage</span><span class="esymbol">:</span> <a class="eclass" href="../base/integer_32.html">INTEGER_32</a><span class="esymbol">)</span>
			<span class="ecomment">--</span><span class="ecomment"> If damage == 0, it is just a test trace</span>
			<span class="ecomment">--</span><span class="ecomment"> that will leave linetarget set.</span>
		<span class="ekeyword">local</span>
			<span class="elocal">x2</span><span class="esymbol">,</span> <span class="elocal">y2</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a>
			<span class="elocal">angle</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/math/angle_t.html">ANGLE_T</a>
		<span class="ekeyword">do</span>
			<span class="elocal">angle</span> <span class="esymbol">:=</span> <span class="elocal">a_angle</span> <a class="esymbol" href="../base/natural_32_ref.html#f_bit_shift_right">|&gt;&gt;</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/render/r_main.html">R_MAIN</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/tables.html#f_angletofineshift">angletofineshift</a>
			<a class="efeature" href="../brie_doom/p_map.html#f_shootthing">shootthing</a> <span class="esymbol">:=</span> <span class="elocal">t1</span>
			<a class="efeature" href="../brie_doom/p_map.html#f_la_damage">la_damage</a> <span class="esymbol">:=</span> <span class="elocal">damage</span>
			<span class="elocal">x2</span> <span class="esymbol">:=</span> <span class="elocal">t1</span><span class="edot">.</span><a class="efeature" href="../brie_doom/degenmobj_t.html#f_x">x</a> <a class="esymbol" href="../base/integer_32_ref.html#f_plus">+</a> <span class="esymbol">(</span><span class="elocal">distance</span> <a class="esymbol" href="../base/integer_32_ref.html#f_bit_shift_right">|&gt;&gt;</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/m_fixed.html">M_FIXED</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/m_fixed.html#f_fracbits">fracbits</a><span class="esymbol">)</span> <a class="esymbol" href="../base/integer_32_ref.html#f_product">*</a> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_r_main">R_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/render/r_main.html#f_finecosine">Finecosine</a> <a class="esymbol" href="../base/array.html#f_item">[</a><span class="elocal">angle</span><span class="edot">.</span><a class="efeature" href="../base/natural_32_ref.html#f_as_integer_32">as_integer_32</a><a class="esymbol" href="../base/array.html#f_item">]</a>
			<span class="elocal">y2</span> <span class="esymbol">:=</span> <span class="elocal">t1</span><span class="edot">.</span><a class="efeature" href="../brie_doom/degenmobj_t.html#f_y">y</a> <a class="esymbol" href="../base/integer_32_ref.html#f_plus">+</a> <span class="esymbol">(</span><span class="elocal">distance</span> <a class="esymbol" href="../base/integer_32_ref.html#f_bit_shift_right">|&gt;&gt;</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/m_fixed.html">M_FIXED</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/m_fixed.html#f_fracbits">fracbits</a><span class="esymbol">)</span> <a class="esymbol" href="../base/integer_32_ref.html#f_product">*</a> <span class="ekeyword">create</span> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/fixed_t.html#f_from_integer">from_integer</a><span class="esymbol"> </span><span class="esymbol">(</span><a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_r_main">R_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/tables.html#f_finesine">Finesine</a> <a class="esymbol" href="../base/array.html#f_item">[</a><span class="elocal">angle</span><span class="edot">.</span><a class="efeature" href="../base/natural_32_ref.html#f_as_integer_32">as_integer_32</a><a class="esymbol" href="../base/array.html#f_item">]</a><span class="esymbol">)</span>
			<a class="efeature" href="../brie_doom/p_map.html#f_shootz">shootz</a> <span class="esymbol">:=</span> <span class="elocal">t1</span><span class="edot">.</span><a class="efeature" href="../brie_doom/degenmobj_t.html#f_z">z</a> <a class="esymbol" href="../base/integer_32_ref.html#f_plus">+</a> <span class="esymbol">(</span><span class="elocal">t1</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_height">height</a> <a class="esymbol" href="../base/integer_32_ref.html#f_bit_shift_right">|&gt;&gt;</a> <span class="enumber">1</span><span class="esymbol">)</span> <a class="esymbol" href="../base/integer_32_ref.html#f_plus">+</a> <span class="ekeyword">create</span> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/fixed_t.html#f_from_integer">from_integer</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="enumber">8</span> <a class="esymbol" href="../base/integer_32.html#f_product">*</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/m_fixed.html">M_FIXED</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/m_fixed.html#f_fracunit">fracunit</a><span class="esymbol">)</span>
			<a class="efeature" href="../brie_doom/p_map.html#f_attackrange">attackrange</a> <span class="esymbol">:=</span> <span class="elocal">distance</span>
			<a class="efeature" href="../brie_doom/p_map.html#f_aimslope">aimslope</a> <span class="esymbol">:=</span> <span class="elocal">slope</span>
			<a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_maputl">P_maputl</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_maputl.html#f_p_pathtraverse">p_pathtraverse</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">t1</span><span class="edot">.</span><a class="efeature" href="../brie_doom/degenmobj_t.html#f_x">x</a><span class="esymbol">,</span> <span class="elocal">t1</span><span class="edot">.</span><a class="efeature" href="../brie_doom/degenmobj_t.html#f_y">y</a><span class="esymbol">,</span> <span class="elocal">x2</span><span class="esymbol">,</span> <span class="elocal">y2</span><span class="esymbol">,</span> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/p_local.html">P_LOCAL</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/p_local.html#f_pt_addlines">pt_addlines</a> <a class="esymbol" href="../base/integer_32.html#f_bit_or">|</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/p_local.html">P_LOCAL</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/p_local.html#f_pt_addthings">pt_addthings</a><span class="esymbol">,</span> <span class="ekeyword">agent</span> <a class="efeature" href="../brie_doom/p_map.html#f_ptr_shoottraverse">ptr_shoottraverse</a><span class="esymbol">)</span><span class="edot">.</span><a class="efeature" href="../base/any.html#f_do_nothing">do_nothing</a>
		<span class="ekeyword">end</span>
	
<span class="ekeyword">feature</span> <span class="ecomment">--</span><span class="ecomment"> PTR_ShootTraverse</span>

	<a name="f_ptr_shoottraverse_line_hitline"></a><a class="efeature" href="../brie_doom/p_map.html#f_ptr_shoottraverse_line_hitline">ptr_shoottraverse_line_hitline</a> <span class="esymbol">(</span><span class="elocal">li</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/render/line_t.html">LINE_T</a><span class="esymbol">;</span> <span class="elocal">in</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/intercept_t.html">INTERCEPT_T</a><span class="esymbol">)</span><span class="esymbol">:</span> <a class="eclass" href="../base/boolean.html">BOOLEAN</a>
		<span class="ekeyword">local</span>
			<span class="elocal">frac</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a>
			<span class="elocal">x</span><span class="esymbol">,</span> <span class="elocal">y</span><span class="esymbol">,</span> <span class="elocal">z</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a>
			<span class="elocal">hit_sky</span><span class="esymbol">:</span> <a class="eclass" href="../base/boolean.html">BOOLEAN</a>
		<span class="ekeyword">do</span>
			<span class="elocal">frac</span> <span class="esymbol">:=</span> <span class="elocal">in</span><span class="edot">.</span><a class="efeature" href="../brie_doom/intercept_t.html#f_frac">frac</a> <a class="esymbol" href="../base/integer_32_ref.html#f_minus">-</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/m_fixed.html">M_FIXED</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/m_fixed.html#f_fixeddiv">fixeddiv</a> <span class="esymbol">(</span><span class="ekeyword">create</span> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/fixed_t.html#f_from_integer">from_integer</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="enumber">4</span> <a class="esymbol" href="../base/integer_32.html#f_product">*</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/m_fixed.html">M_FIXED</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/m_fixed.html#f_fracunit">fracunit</a><span class="esymbol">)</span><span class="esymbol">,</span> <a class="efeature" href="../brie_doom/p_map.html#f_attackrange">attackrange</a><span class="esymbol">)</span>
			<span class="elocal">x</span> <span class="esymbol">:=</span> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_maputl">P_maputl</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_maputl.html#f_trace">trace</a><span class="edot">.</span><a class="efeature" href="../brie_doom/divline_t.html#f_x">x</a> <a class="esymbol" href="../base/integer_32_ref.html#f_plus">+</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/m_fixed.html">M_FIXED</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/m_fixed.html#f_fixedmul">fixedmul</a> <span class="esymbol">(</span><a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_maputl">P_maputl</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_maputl.html#f_trace">trace</a><span class="edot">.</span><a class="efeature" href="../brie_doom/divline_t.html#f_dx">dx</a><span class="esymbol">,</span> <span class="elocal">frac</span><span class="esymbol">)</span>
			<span class="elocal">y</span> <span class="esymbol">:=</span> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_maputl">P_maputl</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_maputl.html#f_trace">trace</a><span class="edot">.</span><a class="efeature" href="../brie_doom/divline_t.html#f_y">y</a> <a class="esymbol" href="../base/integer_32_ref.html#f_plus">+</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/m_fixed.html">M_FIXED</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/m_fixed.html#f_fixedmul">fixedmul</a> <span class="esymbol">(</span><a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_maputl">P_maputl</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_maputl.html#f_trace">trace</a><span class="edot">.</span><a class="efeature" href="../brie_doom/divline_t.html#f_dy">dy</a><span class="esymbol">,</span> <span class="elocal">frac</span><span class="esymbol">)</span>
			<span class="elocal">z</span> <span class="esymbol">:=</span> <a class="efeature" href="../brie_doom/p_map.html#f_shootz">shootz</a> <a class="esymbol" href="../base/integer_32_ref.html#f_plus">+</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/m_fixed.html">M_FIXED</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/m_fixed.html#f_fixedmul">fixedmul</a> <span class="esymbol">(</span><a class="efeature" href="../brie_doom/p_map.html#f_aimslope">aimslope</a><span class="esymbol">,</span> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/m_fixed.html">M_FIXED</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/m_fixed.html#f_fixedmul">fixedmul</a> <span class="esymbol">(</span><span class="elocal">frac</span><span class="esymbol">,</span> <a class="efeature" href="../brie_doom/p_map.html#f_attackrange">attackrange</a><span class="esymbol">)</span><span class="esymbol">)</span>
			<span class="ekeyword">check</span>
					<span class="ekeyword">attached</span> <span class="elocal">li</span><span class="edot">.</span><a class="efeature" href="../brie_doom/render/line_t.html#f_frontsector">frontsector</a> <span class="ekeyword">as</span> front
			<span class="ekeyword">then</span>
				<span class="ekeyword">if</span> <span class="elocal">front</span><span class="edot">.</span><a class="efeature" href="../brie_doom/render/sector_t.html#f_ceilingpic">ceilingpic</a><span class="edot">.</span><a class="efeature" href="../base/integer_16_ref.html#f_to_integer_32">to_integer_32</a> <span class="esymbol">=</span> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_r_sky">R_sky</a><span class="edot">.</span><a class="efeature" href="../brie_doom/r_sky.html#f_skyflatnum">skyflatnum</a> <span class="ekeyword">then</span>
					<span class="ekeyword">if</span> <span class="elocal">z</span> <a class="esymbol" href="../base/comparable.html#f_is_greater">&gt;</a> <span class="elocal">front</span><span class="edot">.</span><a class="efeature" href="../brie_doom/render/sector_t.html#f_ceilingheight">ceilingheight</a> <span class="ekeyword">then</span>
						<span class="elocal">hit_sky</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
					<span class="ekeyword">end</span>
					<span class="ekeyword">if</span> <a class="ekeyword" href="../base/boolean.html#f_negated">not</a> <span class="elocal">hit_sky</span> <a class="ekeyword" href="../base/boolean.html#f_conjuncted_semistrict">and then</a> <span class="ekeyword">attached</span> <span class="elocal">li</span><span class="edot">.</span><a class="efeature" href="../brie_doom/render/line_t.html#f_backsector">backsector</a> <span class="ekeyword">as</span> back <a class="ekeyword" href="../base/boolean.html#f_conjuncted_semistrict">and then</a> <span class="elocal">back</span><span class="edot">.</span><a class="efeature" href="../brie_doom/render/sector_t.html#f_ceilingpic">ceilingpic</a><span class="edot">.</span><a class="efeature" href="../base/integer_16_ref.html#f_to_integer_32">to_integer_32</a> <span class="esymbol">=</span> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_r_sky">R_sky</a><span class="edot">.</span><a class="efeature" href="../brie_doom/r_sky.html#f_skyflatnum">skyflatnum</a> <span class="ekeyword">then</span>
						<span class="elocal">hit_sky</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
					<span class="ekeyword">end</span>
				<span class="ekeyword">end</span>
			<span class="ekeyword">end</span>
			<span class="ekeyword">if</span> <a class="ekeyword" href="../base/boolean.html#f_negated">not</a> <span class="elocal">hit_sky</span> <span class="ekeyword">then</span>
				<a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_mobj">P_mobj</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_mobj.html#f_p_spawnpuff">p_spawnpuff</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">x</span><span class="esymbol">,</span> <span class="elocal">y</span><span class="esymbol">,</span> <span class="elocal">z</span><span class="esymbol">)</span>
			<span class="ekeyword">end</span>
			<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">False</span>
		<span class="ekeyword">end</span>

	<a name="f_ptr_shoottraverse"></a><a class="efeature" href="../brie_doom/p_map.html#f_ptr_shoottraverse">ptr_shoottraverse</a> <span class="esymbol">(</span><span class="elocal">in</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/intercept_t.html">INTERCEPT_T</a><span class="esymbol">)</span><span class="esymbol">:</span> <a class="eclass" href="../base/boolean.html">BOOLEAN</a>
		<span class="ekeyword">local</span>
			<span class="elocal">goto_hitline</span><span class="esymbol">:</span> <a class="eclass" href="../base/boolean.html">BOOLEAN</a>
			<span class="elocal">dist</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a>
			<span class="elocal">slope</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a>
			<span class="elocal">x</span><span class="esymbol">,</span> <span class="elocal">y</span><span class="esymbol">,</span> <span class="elocal">z</span><span class="esymbol">,</span> <span class="elocal">frac</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a>
			<span class="elocal">thingtopslope</span><span class="esymbol">,</span> <span class="elocal">thingbottomslope</span><span class="esymbol">:</span> <a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a>
		<span class="ekeyword">do</span>
			<span class="ekeyword">if</span> <span class="elocal">in</span><span class="edot">.</span><a class="efeature" href="../brie_doom/intercept_t.html#f_isaline">isaline</a> <span class="ekeyword">then</span>
				<span class="ekeyword">check</span>
						<span class="ekeyword">attached</span> <span class="elocal">in</span><span class="edot">.</span><a class="efeature" href="../brie_doom/intercept_t.html#f_line">line</a> <span class="ekeyword">as</span> li
				<span class="ekeyword">then</span>
					<span class="ekeyword">if</span> <span class="elocal">li</span><span class="edot">.</span><a class="efeature" href="../brie_doom/render/line_t.html#f_special">special</a> <span class="esymbol">/=</span> <span class="enumber">0</span> <span class="ekeyword">then</span>
						<span class="ekeyword">check</span>
								<span class="ekeyword">attached</span> <a class="efeature" href="../brie_doom/p_map.html#f_shootthing">shootthing</a> <span class="ekeyword">as</span> st
						<span class="ekeyword">then</span>
							<a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_spec">P_spec</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_spec.html#f_p_shootspecialline">p_shootspecialline</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">st</span><span class="esymbol">,</span> <span class="elocal">li</span><span class="esymbol">)</span>
						<span class="ekeyword">end</span>
					<span class="ekeyword">end</span>
					<span class="ekeyword">if</span> <span class="elocal">li</span><span class="edot">.</span><a class="efeature" href="../brie_doom/render/line_t.html#f_flags">flags</a><span class="edot">.</span><a class="efeature" href="../base/integer_16_ref.html#f_to_integer_32">to_integer_32</a> <a class="esymbol" href="../base/integer_32.html#f_bit_and">&#38;</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/doomdata_h.html">DOOMDATA_H</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/doomdata_h.html#f_ml_twosided">ml_twosided</a> <span class="esymbol">=</span> <span class="enumber">0</span> <span class="ekeyword">then</span>
						<span class="elocal">goto_hitline</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
					<span class="ekeyword">else</span>
						<a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_maputl">P_maputl</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_maputl.html#f_p_lineopening">p_lineopening</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">li</span><span class="esymbol">)</span>
						<span class="elocal">dist</span> <span class="esymbol">:=</span> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/m_fixed.html">M_FIXED</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/m_fixed.html#f_fixedmul">fixedmul</a> <span class="esymbol">(</span><a class="efeature" href="../brie_doom/p_map.html#f_attackrange">attackrange</a><span class="esymbol">,</span> <span class="elocal">in</span><span class="edot">.</span><a class="efeature" href="../brie_doom/intercept_t.html#f_frac">frac</a><span class="esymbol">)</span>
						<span class="ekeyword">check</span>
								<span class="ekeyword">attached</span> <span class="elocal">li</span><span class="edot">.</span><a class="efeature" href="../brie_doom/render/line_t.html#f_frontsector">frontsector</a> <span class="ekeyword">as</span> front <a class="ekeyword" href="../base/boolean.html#f_conjuncted_semistrict">and then</a> <span class="ekeyword">attached</span> <span class="elocal">li</span><span class="edot">.</span><a class="efeature" href="../brie_doom/render/line_t.html#f_backsector">backsector</a> <span class="ekeyword">as</span> back
						<span class="ekeyword">then</span>
							<span class="ekeyword">if</span> <span class="elocal">front</span><span class="edot">.</span><a class="efeature" href="../brie_doom/render/sector_t.html#f_floorheight">floorheight</a> <span class="esymbol">/=</span> <span class="elocal">back</span><span class="edot">.</span><a class="efeature" href="../brie_doom/render/sector_t.html#f_floorheight">floorheight</a> <span class="ekeyword">then</span>
								<span class="elocal">slope</span> <span class="esymbol">:=</span> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/m_fixed.html">M_FIXED</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/m_fixed.html#f_fixeddiv">fixeddiv</a> <span class="esymbol">(</span><a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_maputl">P_maputl</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_maputl.html#f_openbottom">openbottom</a> <a class="esymbol" href="../base/integer_32_ref.html#f_minus">-</a> <a class="efeature" href="../brie_doom/p_map.html#f_shootz">shootz</a><span class="esymbol">,</span> <span class="elocal">dist</span><span class="esymbol">)</span>
								<span class="ekeyword">if</span> <span class="elocal">slope</span> <a class="esymbol" href="../base/comparable.html#f_is_greater">&gt;</a> <a class="efeature" href="../brie_doom/p_map.html#f_aimslope">aimslope</a> <span class="ekeyword">then</span>
									<span class="elocal">goto_hitline</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
								<span class="ekeyword">end</span>
							<span class="ekeyword">end</span>
							<span class="ekeyword">if</span> <span class="elocal">front</span><span class="edot">.</span><a class="efeature" href="../brie_doom/render/sector_t.html#f_ceilingheight">ceilingheight</a> <span class="esymbol">/=</span> <span class="elocal">back</span><span class="edot">.</span><a class="efeature" href="../brie_doom/render/sector_t.html#f_ceilingheight">ceilingheight</a> <span class="ekeyword">then</span>
								<span class="elocal">slope</span> <span class="esymbol">:=</span> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/m_fixed.html">M_FIXED</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/m_fixed.html#f_fixeddiv">fixeddiv</a> <span class="esymbol">(</span><a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_maputl">P_maputl</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_maputl.html#f_opentop">opentop</a> <a class="esymbol" href="../base/integer_32_ref.html#f_minus">-</a> <a class="efeature" href="../brie_doom/p_map.html#f_shootz">shootz</a><span class="esymbol">,</span> <span class="elocal">dist</span><span class="esymbol">)</span>
								<span class="ekeyword">if</span> <span class="elocal">slope</span> <a class="esymbol" href="../base/integer_32_ref.html#f_is_less">&lt;</a> <a class="efeature" href="../brie_doom/p_map.html#f_aimslope">aimslope</a> <span class="ekeyword">then</span>
									<span class="elocal">goto_hitline</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
								<span class="ekeyword">end</span>
							<span class="ekeyword">end</span>
						<span class="ekeyword">end</span>
					<span class="ekeyword">end</span>
					<span class="ekeyword">if</span> <span class="elocal">goto_hitline</span> <span class="ekeyword">then</span>
						<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <a class="efeature" href="../brie_doom/p_map.html#f_ptr_shoottraverse_line_hitline">ptr_shoottraverse_line_hitline</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">li</span><span class="esymbol">,</span> <span class="elocal">in</span><span class="esymbol">)</span>
					<span class="ekeyword">else</span>
						<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
					<span class="ekeyword">end</span>
				<span class="ekeyword">end</span>
			<span class="ekeyword">else</span>
				<span class="ekeyword">check</span>
						<span class="ekeyword">attached</span> <span class="elocal">in</span><span class="edot">.</span><a class="efeature" href="../brie_doom/intercept_t.html#f_thing">thing</a> <span class="ekeyword">as</span> th
				<span class="ekeyword">then</span>
					<span class="ekeyword">if</span> <span class="elocal">th</span> <span class="esymbol">=</span> <a class="efeature" href="../brie_doom/p_map.html#f_shootthing">shootthing</a> <span class="ekeyword">then</span>
						<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
					<span class="ekeyword">else</span>
						<span class="ekeyword">if</span> <span class="elocal">th</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_flags">flags</a> <a class="esymbol" href="../base/integer_32.html#f_bit_and">&#38;</a> <a class="efeature" href="../brie_doom/mobjflag_t.html#f_mf_shootable">Mf_shootable</a> <span class="esymbol">=</span> <span class="enumber">0</span> <span class="ekeyword">then</span>
							<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
						<span class="ekeyword">else</span>
							<span class="elocal">dist</span> <span class="esymbol">:=</span> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/m_fixed.html">M_FIXED</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/m_fixed.html#f_fixedmul">fixedmul</a> <span class="esymbol">(</span><a class="efeature" href="../brie_doom/p_map.html#f_attackrange">attackrange</a><span class="esymbol">,</span> <span class="elocal">in</span><span class="edot">.</span><a class="efeature" href="../brie_doom/intercept_t.html#f_frac">frac</a><span class="esymbol">)</span>
							<span class="elocal">thingtopslope</span> <span class="esymbol">:=</span> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/m_fixed.html">M_FIXED</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/m_fixed.html#f_fixeddiv">fixeddiv</a> <span class="esymbol">(</span><span class="elocal">th</span><span class="edot">.</span><a class="efeature" href="../brie_doom/degenmobj_t.html#f_z">z</a> <a class="esymbol" href="../base/integer_32_ref.html#f_plus">+</a> <span class="elocal">th</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_height">height</a> <a class="esymbol" href="../base/integer_32_ref.html#f_minus">-</a> <a class="efeature" href="../brie_doom/p_map.html#f_shootz">shootz</a><span class="esymbol">,</span> <span class="elocal">dist</span><span class="esymbol">)</span>
							<span class="ekeyword">if</span> <span class="elocal">thingtopslope</span> <a class="esymbol" href="../base/integer_32_ref.html#f_is_less">&lt;</a> <a class="efeature" href="../brie_doom/p_map.html#f_aimslope">aimslope</a> <span class="ekeyword">then</span>
								<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
							<span class="ekeyword">else</span>
								<span class="elocal">thingbottomslope</span> <span class="esymbol">:=</span> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/m_fixed.html">M_FIXED</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/m_fixed.html#f_fixeddiv">fixeddiv</a> <span class="esymbol">(</span><span class="elocal">th</span><span class="edot">.</span><a class="efeature" href="../brie_doom/degenmobj_t.html#f_z">z</a> <a class="esymbol" href="../base/integer_32_ref.html#f_minus">-</a> <a class="efeature" href="../brie_doom/p_map.html#f_shootz">shootz</a><span class="esymbol">,</span> <span class="elocal">dist</span><span class="esymbol">)</span>
								<span class="ekeyword">if</span> <span class="elocal">thingbottomslope</span> <a class="esymbol" href="../base/comparable.html#f_is_greater">&gt;</a> <a class="efeature" href="../brie_doom/p_map.html#f_aimslope">aimslope</a> <span class="ekeyword">then</span>
									<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
								<span class="ekeyword">else</span>
									<span class="elocal">frac</span> <span class="esymbol">:=</span> <span class="elocal">in</span><span class="edot">.</span><a class="efeature" href="../brie_doom/intercept_t.html#f_frac">frac</a> <a class="esymbol" href="../base/integer_32_ref.html#f_minus">-</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/m_fixed.html">M_FIXED</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/m_fixed.html#f_fixeddiv">fixeddiv</a> <span class="esymbol">(</span><span class="ekeyword">create</span> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/fixed_t.html">FIXED_T</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/fixed_t.html#f_from_integer">from_integer</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="enumber">10</span> <a class="esymbol" href="../base/integer_32.html#f_product">*</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/m_fixed.html">M_FIXED</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/m_fixed.html#f_fracunit">fracunit</a><span class="esymbol">)</span><span class="esymbol">,</span> <a class="efeature" href="../brie_doom/p_map.html#f_attackrange">attackrange</a><span class="esymbol">)</span>
									<span class="elocal">x</span> <span class="esymbol">:=</span> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_maputl">P_maputl</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_maputl.html#f_trace">trace</a><span class="edot">.</span><a class="efeature" href="../brie_doom/divline_t.html#f_x">x</a> <a class="esymbol" href="../base/integer_32_ref.html#f_plus">+</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/m_fixed.html">M_FIXED</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/m_fixed.html#f_fixedmul">fixedmul</a> <span class="esymbol">(</span><a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_maputl">P_maputl</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_maputl.html#f_trace">trace</a><span class="edot">.</span><a class="efeature" href="../brie_doom/divline_t.html#f_dx">dx</a><span class="esymbol">,</span> <span class="elocal">frac</span><span class="esymbol">)</span>
									<span class="elocal">y</span> <span class="esymbol">:=</span> <a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_maputl">P_maputl</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_maputl.html#f_trace">trace</a><span class="edot">.</span><a class="efeature" href="../brie_doom/divline_t.html#f_y">y</a> <a class="esymbol" href="../base/integer_32_ref.html#f_plus">+</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/m_fixed.html">M_FIXED</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/m_fixed.html#f_fixedmul">fixedmul</a> <span class="esymbol">(</span><a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_maputl">P_maputl</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_maputl.html#f_trace">trace</a><span class="edot">.</span><a class="efeature" href="../brie_doom/divline_t.html#f_dy">dy</a><span class="esymbol">,</span> <span class="elocal">frac</span><span class="esymbol">)</span>
									<span class="elocal">z</span> <span class="esymbol">:=</span> <a class="efeature" href="../brie_doom/p_map.html#f_shootz">shootz</a> <a class="esymbol" href="../base/integer_32_ref.html#f_plus">+</a> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/m_fixed.html">M_FIXED</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/m_fixed.html#f_fixedmul">fixedmul</a> <span class="esymbol">(</span><a class="efeature" href="../brie_doom/p_map.html#f_aimslope">aimslope</a><span class="esymbol">,</span> <span class="esymbol">{</span><a class="eclass" href="../brie_doom/math/m_fixed.html">M_FIXED</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../brie_doom/math/m_fixed.html#f_fixedmul">fixedmul</a> <span class="esymbol">(</span><span class="elocal">frac</span><span class="esymbol">,</span> <a class="efeature" href="../brie_doom/p_map.html#f_attackrange">attackrange</a><span class="esymbol">)</span><span class="esymbol">)</span>
									<span class="ekeyword">if</span> <span class="elocal">th</span><span class="edot">.</span><a class="efeature" href="../brie_doom/mobj_t.html#f_flags">flags</a> <a class="esymbol" href="../base/integer_32.html#f_bit_and">&#38;</a> <a class="efeature" href="../brie_doom/mobjflag_t.html#f_mf_noblood">Mf_noblood</a> <span class="esymbol">/=</span> <span class="enumber">0</span> <span class="ekeyword">then</span>
										<a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_mobj">P_mobj</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_mobj.html#f_p_spawnpuff">p_spawnpuff</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">x</span><span class="esymbol">,</span> <span class="elocal">y</span><span class="esymbol">,</span> <span class="elocal">z</span><span class="esymbol">)</span>
									<span class="ekeyword">else</span>
										<a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_mobj">P_mobj</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_mobj.html#f_p_spawnblood">p_spawnblood</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">x</span><span class="esymbol">,</span> <span class="elocal">y</span><span class="esymbol">,</span> <span class="elocal">z</span><span class="esymbol">,</span> <a class="efeature" href="../brie_doom/p_map.html#f_la_damage">la_damage</a><span class="esymbol">)</span>
									<span class="ekeyword">end</span>
									<span class="ekeyword">if</span> <a class="efeature" href="../brie_doom/p_map.html#f_la_damage">la_damage</a> <span class="esymbol">/=</span> <span class="enumber">0</span> <span class="ekeyword">then</span>
										<a class="efeature" href="../brie_doom/p_map.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../brie_doom/i_main.html#f_p_inter">P_inter</a><span class="edot">.</span><a class="efeature" href="../brie_doom/p_inter.html#f_p_damagemobj">p_damagemobj</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">th</span><span class="esymbol">,</span> <a class="efeature" href="../brie_doom/p_map.html#f_shootthing">shootthing</a><span class="esymbol">,</span> <a class="efeature" href="../brie_doom/p_map.html#f_shootthing">shootthing</a><span class="esymbol">,</span> <a class="efeature" href="../brie_doom/p_map.html#f_la_damage">la_damage</a><span class="esymbol">)</span>
									<span class="ekeyword">end</span>
									<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">False</span>
								<span class="ekeyword">end</span>
							<span class="ekeyword">end</span>
						<span class="ekeyword">end</span>
					<span class="ekeyword">end</span>
				<span class="ekeyword">end</span>
			<span class="ekeyword">end</span>
		<span class="ekeyword">end</span>
	
<span class="ekeyword">invariant</span>
		<a class="efeature" href="../brie_doom/p_map.html#f_spechit">spechit</a><span class="edot">.</span><a class="efeature" href="../base/array.html#f_lower">lower</a> <span class="esymbol">=</span> <span class="enumber">0</span> <a class="ekeyword" href="../base/boolean.html#f_conjuncted">and</a> <a class="efeature" href="../brie_doom/p_map.html#f_spechit">spechit</a><span class="edot">.</span><a class="efeature" href="../base/array.html#f_count">count</a> <span class="esymbol">=</span> <a class="efeature" href="../brie_doom/p_map.html#f_maxspecialcross">Maxspecialcross</a>
		<a class="efeature" href="../brie_doom/p_map.html#f_tmbbox">tmbbox</a><span class="edot">.</span><a class="efeature" href="../base/array.html#f_lower">lower</a> <span class="esymbol">=</span> <span class="enumber">0</span> <a class="ekeyword" href="../base/boolean.html#f_conjuncted">and</a> <a class="efeature" href="../brie_doom/p_map.html#f_tmbbox">tmbbox</a><span class="edot">.</span><a class="efeature" href="../base/array.html#f_count">count</a> <span class="esymbol">=</span> <span class="enumber">4</span>

<span class="ekeyword">end</span> <span class="ecomment">--</span> <span class="ecomment">class </span><a class="eclass" href="../brie_doom/p_map.html">P_MAP</a></pre><form class="nav" onsubmit="go_to('../',this.c.value);return false;">
<div class="nav">
<a class="nav hierarchy" href="../class_list.html">Classes</a>
<a class="nav hierarchy" href="../cluster_list.html">Clusters</a>
<a class="nav hierarchy" href="../cluster_hierarchy.html">Cluster hierarchy</a>
<a class="nav class" href="p_map_chart.html">Chart</a>
<a class="nav class" href="p_map_links.html">Relations</a>
<span class="nav class selected">Text</span>
<span class="nav class goto">Go to: <input name="c" value="p_map"></span>
</div></form><pre></pre>
<p style="text-align:center;">Generated by <a href="http://www.eiffel.com">ISE EiffelStudio</a></p>
</body>
</html>

