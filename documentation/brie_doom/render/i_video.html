<!DOCTYPE html>
<html>
<head>
<meta name="generator" content="ISE EiffelStudio version 19.05.10.3187 GPL Edition - unix">
<meta name="description" content="i_video.c DOOM graphics stuff for SDL library"/>
<meta name="license" content="Copyright (C) 1993-1996 by id Software, Inc. Copyright (C) 2005-2014 Simon Howard Copyright (C) 2021 Ilgiz Mustafin  This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.  This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.  You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA."/>
<meta name="keywords" content="Eiffel class"/>
<meta name="keywords" content="Eiffel class"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css?family=PT+Sans" rel="stylesheet">
<title>i_video Text</title>
<link rel="stylesheet" href="../../default.css" type="text/css">
<script type="text/javascript" src="../../goto.html"></script>
</head>
<body>
<pre></pre><form class="nav" onsubmit="go_to('../../',this.c.value);return false;">
<div class="nav">
<a class="nav hierarchy" href="../../class_list.html">Classes</a>
<a class="nav hierarchy" href="../../cluster_list.html">Clusters</a>
<a class="nav hierarchy" href="../../cluster_hierarchy.html">Cluster hierarchy</a>
<a class="nav class" href="i_video_chart.html">Chart</a>
<a class="nav class" href="i_video_links.html">Relations</a>
<span class="nav class selected">Text</span>
<span class="nav class goto">Go to: <input name="c" value="i_video"></span>
</div></form><pre><span class="ekeyword">note</span>
	<span class="eitag">description</span><span class="esymbol">:</span> <span class="estring">&quot;</span><span class="estring">[</span>
		<span class="estring">i_video.c</span>
		<span class="estring">DOOM graphics stuff for SDL library</span>
	<span class="estring">]</span><span class="estring">&quot;</span>
	<span class="eitag">license</span><span class="esymbol">:</span> <span class="estring">&quot;</span><span class="estring">[</span>
		<span class="estring">Copyright (C) 1993-1996 by id Software, Inc.</span>
		<span class="estring">Copyright (C) 2005-2014 Simon Howard</span>
		<span class="estring">Copyright (C) 2021 Ilgiz Mustafin</span>
		
		<span class="estring">This program is free software; you can redistribute it and/or modify</span>
		<span class="estring">it under the terms of the GNU General Public License as published by</span>
		<span class="estring">the Free Software Foundation; either version 2 of the License, or</span>
		<span class="estring">(at your option) any later version.</span>
		
		<span class="estring">This program is distributed in the hope that it will be useful,</span>
		<span class="estring">but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
		<span class="estring">MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. &nbsp;See the</span>
		<span class="estring">GNU General Public License for more details.</span>
		
		<span class="estring">You should have received a copy of the GNU General Public License along</span>
		<span class="estring">with this program; if not, write to the Free Software Foundation, Inc.,</span>
		<span class="estring">51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.</span>
	<span class="estring">]</span><span class="estring">&quot;</span>

<span class="ekeyword">class</span> 
	<a class="eclass" href="../../brie_doom/render/i_video.html">I_VIDEO</a>

<span class="ekeyword">create</span> 
	<a class="efeature" href="../../brie_doom/render/i_video.html#f_make">make</a>

<span class="ekeyword">feature</span> 

	<a name="f_i_main"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_i_main">i_main</a><span class="esymbol">:</span> <a class="eclass" href="../../brie_doom/i_main.html">I_MAIN</a>

	<a name="f_make"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_make">make</a> <span class="esymbol">(</span><span class="elocal">a_i_main</span><span class="esymbol">:</span> <span class="ekeyword">like</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_i_main">i_main</a><span class="esymbol">)</span>
		<span class="ekeyword">do</span>
			<a class="efeature" href="../../brie_doom/render/i_video.html#f_i_main">i_main</a> <span class="esymbol">:=</span> <span class="elocal">a_i_main</span>
			<a class="efeature" href="../../brie_doom/render/i_video.html#f_firsttime">firsttime</a> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
			<a class="efeature" href="../../brie_doom/render/i_video.html#f_multiply">multiply</a> <span class="esymbol">:=</span> <span class="enumber">1</span>
			<a class="efeature" href="../../brie_doom/render/i_video.html#f_aspect_ratio_correct">aspect_ratio_correct</a> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
			<a class="efeature" href="../../brie_doom/render/i_video.html#f_window_width">window_width</a> <span class="esymbol">:=</span> <span class="enumber">800</span>
			<a class="efeature" href="../../brie_doom/render/i_video.html#f_window_height">window_height</a> <span class="esymbol">:=</span> <span class="enumber">600</span>
			<a class="efeature" href="../../brie_doom/render/i_video.html#f_fullscreen">fullscreen</a> <span class="esymbol">:=</span> <span class="ekeyword">False</span>
			<span class="ekeyword">create</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_i_videobuffer">i_videobuffer</a><span class="edot">.</span><a class="efeature" href="../../brie_doom/render/pixel_t_buffer.html#f_make">make</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="enumber">1</span><span class="esymbol">)</span>
			<a class="efeature" href="../../brie_doom/render/i_video.html#f_window_focused">window_focused</a> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
			<a class="efeature" href="../../brie_doom/render/i_video.html#f_grabmouse">grabmouse</a> <span class="esymbol">:=</span> <span class="enumber">1</span>
			<a class="efeature" href="../../brie_doom/render/i_video.html#f_nomouse">nomouse</a> <span class="esymbol">:=</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../../brie_doom/i_main.html#f_m_argv">m_argv</a><span class="edot">.</span><a class="efeature" href="../../brie_doom/m_argv.html#f_m_checkparm">m_checkparm</a><span class="esymbol"> </span><span class="esymbol">(</span>&quot;-nomouse&quot;<span class="esymbol">)</span><span class="edot">.</span><a class="efeature" href="../../base/integer_32_ref.html#f_to_boolean">to_boolean</a>
		<span class="ekeyword">end</span>
	
<span class="ekeyword">feature</span> 

	<a name="f_screenheight_4_3"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_screenheight_4_3">Screenheight_4_3</a><span class="esymbol">:</span> <a class="eclass" href="../../base/integer_32.html">INTEGER_32</a> <span class="esymbol">=</span> <span class="enumber">240</span>
	
<span class="ekeyword">feature</span> 

	<a name="f_multiply"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_multiply">multiply</a><span class="esymbol">:</span> <a class="eclass" href="../../base/integer_32.html">INTEGER_32</a>

	<a name="f_screen"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_screen">screen</a><span class="esymbol">:</span> <span class="ekeyword">detachable</span> <a class="eclass" href="../../wrap_sdl2/sdl_window_struct_api.html">SDL_WINDOW_STRUCT_API</a>

	<a name="f_renderer"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_renderer">renderer</a><span class="esymbol">:</span> <span class="ekeyword">detachable</span> <a class="eclass" href="../../wrap_sdl2/sdl_renderer_struct_api.html">SDL_RENDERER_STRUCT_API</a>

	<a name="f_texture"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_texture">texture</a><span class="esymbol">:</span> <span class="ekeyword">detachable</span> <a class="eclass" href="../../wrap_sdl2/sdl_texture_struct_api.html">SDL_TEXTURE_STRUCT_API</a>

	<a name="f_texture_upscaled"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_texture_upscaled">texture_upscaled</a><span class="esymbol">:</span> <span class="ekeyword">detachable</span> <a class="eclass" href="../../wrap_sdl2/sdl_texture_struct_api.html">SDL_TEXTURE_STRUCT_API</a>

	<a name="f_screenbuffer"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_screenbuffer">screenbuffer</a><span class="esymbol">:</span> <span class="ekeyword">detachable</span> <a class="eclass" href="../../wrap_sdl2/sdl_surface_struct_api.html">SDL_SURFACE_STRUCT_API</a>

	<a name="f_argbbuffer"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_argbbuffer">argbbuffer</a><span class="esymbol">:</span> <span class="ekeyword">detachable</span> <a class="eclass" href="../../wrap_sdl2/sdl_surface_struct_api.html">SDL_SURFACE_STRUCT_API</a>

	<a name="f_pixel_format"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_pixel_format">pixel_format</a><span class="esymbol">:</span> <a class="eclass" href="../../base/natural_32.html">NATURAL_32</a>
	
<span class="ekeyword">feature</span> 

	<a name="f_fullscreen"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_fullscreen">fullscreen</a><span class="esymbol">:</span> <a class="eclass" href="../../base/boolean.html">BOOLEAN</a>

	<a name="f_screensaver_mode"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_screensaver_mode">screensaver_mode</a><span class="esymbol">:</span> <a class="eclass" href="../../base/boolean.html">BOOLEAN</a>

	<a name="f_fullscreen_width"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_fullscreen_width">Fullscreen_width</a><span class="esymbol">:</span> <a class="eclass" href="../../base/integer_32.html">INTEGER_32</a> <span class="esymbol">=</span> <span class="enumber">0</span>

	<a name="f_fullscreen_height"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_fullscreen_height">Fullscreen_height</a><span class="esymbol">:</span> <a class="eclass" href="../../base/integer_32.html">INTEGER_32</a> <span class="esymbol">=</span> <span class="enumber">0</span>
	
<span class="ekeyword">feature</span> 

	<a name="f_startup_delay"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_startup_delay">Startup_delay</a><span class="esymbol">:</span> <a class="eclass" href="../../base/integer_32.html">INTEGER_32</a> <span class="esymbol">=</span> <span class="enumber">1000</span>
			<span class="ecomment">--</span><span class="ecomment"> Time to wait for the screen to settle on startup before starting the</span>
			<span class="ecomment">--</span><span class="ecomment"> game (ms)</span>
	
<span class="ekeyword">feature</span> <span class="ecomment">--</span><span class="ecomment"> Aspect ratio correction mode</span>

	<a name="f_aspect_ratio_correct"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_aspect_ratio_correct">aspect_ratio_correct</a><span class="esymbol">:</span> <a class="eclass" href="../../base/boolean.html">BOOLEAN</a>

	<a name="f_integer_scaling"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_integer_scaling">integer_scaling</a><span class="esymbol">:</span> <a class="eclass" href="../../base/boolean.html">BOOLEAN</a>
			<span class="ecomment">--</span><span class="ecomment"> Force integer scales for resolution-independent rendering</span>

	<a name="f_actualheight"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_actualheight">actualheight</a><span class="esymbol">:</span> <a class="eclass" href="../../base/integer_32.html">INTEGER_32</a>

	<a name="f_max_scaling_buffer_pixels"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_max_scaling_buffer_pixels">Max_scaling_buffer_pixels</a><span class="esymbol">:</span> <a class="eclass" href="../../base/integer_32.html">INTEGER_32</a> <span class="esymbol">=</span> <span class="enumber">16000000</span>
	
<span class="ekeyword">feature</span> 

	<a name="f_initialized"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_initialized">initialized</a><span class="esymbol">:</span> <a class="eclass" href="../../base/boolean.html">BOOLEAN</a>

	<a name="f_screenvisible"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_screenvisible">Screenvisible</a><span class="esymbol">:</span> <a class="eclass" href="../../base/boolean.html">BOOLEAN</a> <span class="esymbol">=</span> <span class="ekeyword">True</span>
	
<span class="ekeyword">feature</span> 

	<a name="f_usemouse"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_usemouse">Usemouse</a><span class="esymbol">:</span> <a class="eclass" href="../../base/boolean.html">BOOLEAN</a> <span class="esymbol">=</span> <span class="ekeyword">True</span>

	<a name="f_nomouse"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_nomouse">nomouse</a><span class="esymbol">:</span> <a class="eclass" href="../../base/boolean.html">BOOLEAN</a>
	
<span class="ekeyword">feature</span> 

	<a name="f_window_focused"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_window_focused">window_focused</a><span class="esymbol">:</span> <a class="eclass" href="../../base/boolean.html">BOOLEAN</a>
	
<span class="ekeyword">feature</span> 

	<a name="f_i_videobuffer"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_i_videobuffer">i_videobuffer</a><span class="esymbol">:</span> <a class="eclass" href="../../brie_doom/render/pixel_t_buffer.html">PIXEL_T_BUFFER</a>
			<span class="ecomment">--</span><span class="ecomment"> &nbsp;The screen buffer; this is modified to draw things to the screen</span>
	
<span class="ekeyword">feature</span> 

	<a name="f_blit_rect"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_blit_rect">Blit_rect</a><span class="esymbol">:</span> <a class="eclass" href="../../wrap_sdl2/sdl_rect_struct_api.html">SDL_RECT_STRUCT_API</a>
		<span class="ekeyword">once</span>
			<span class="ekeyword">create</span> <span class="ekeyword">Result</span><span class="edot">.</span><a class="efeature" href="../../base/memory_structure.html#f_make">make</a>
			<span class="ekeyword">Result</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_rect_struct_api.html#f_set_x">set_x</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="enumber">0</span><span class="esymbol">)</span>
			<span class="ekeyword">Result</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_rect_struct_api.html#f_set_y">set_y</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="enumber">0</span><span class="esymbol">)</span>
			<span class="ekeyword">Result</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_rect_struct_api.html#f_set_w">set_w</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="esymbol">{</span><a class="eclass" href="../../brie_doom/doomdef_h.html">DOOMDEF_H</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/doomdef_h.html#f_screenwidth">screenwidth</a><span class="esymbol">)</span>
			<span class="ekeyword">Result</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_rect_struct_api.html#f_set_h">set_h</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="esymbol">{</span><a class="eclass" href="../../brie_doom/doomdef_h.html">DOOMDEF_H</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/doomdef_h.html#f_screenheight">screenheight</a><span class="esymbol">)</span>
		<span class="ekeyword">end</span>
	
<span class="ekeyword">feature</span> 

	<a name="f_palette"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_palette">Palette</a><span class="esymbol">:</span> <a class="eclass" href="../../base/array.html">ARRAY</a> <span class="esymbol">[</span><a class="eclass" href="../../wrap_sdl2/sdl_color_struct_api.html">SDL_COLOR_STRUCT_API</a><span class="esymbol">]</span>
		<span class="ekeyword">local</span>
			<span class="elocal">i</span><span class="esymbol">:</span> <a class="eclass" href="../../base/integer_32.html">INTEGER_32</a>
		<span class="ekeyword">once</span>
			<span class="ekeyword">create</span> <span class="ekeyword">Result</span><span class="edot">.</span><a class="efeature" href="../../base/array.html#f_make_filled">make_filled</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="ekeyword">create</span><span class="esymbol"> </span><span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_color_struct_api.html">SDL_COLOR_STRUCT_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../base/memory_structure.html#f_make">make</a><span class="esymbol">,</span> <span class="enumber">0</span><span class="esymbol">,</span> <span class="enumber">255</span><span class="esymbol">)</span>
			<span class="ekeyword">from</span>
				<span class="elocal">i</span> <span class="esymbol">:=</span> <span class="ekeyword">Result</span><span class="edot">.</span><a class="efeature" href="../../base/array.html#f_lower">lower</a>
			<span class="ekeyword">until</span>
				<span class="elocal">i</span> <a class="esymbol" href="../../base/comparable.html#f_is_greater">&gt;</a> <span class="ekeyword">Result</span><span class="edot">.</span><a class="efeature" href="../../base/array.html#f_upper">upper</a>
			<span class="ekeyword">loop</span>
				<span class="ekeyword">Result</span> <a class="esymbol" href="../../base/array.html#f_item">[</a><span class="elocal">i</span><a class="esymbol" href="../../base/array.html#f_item">]</a> <span class="esymbol">:=</span> <span class="ekeyword">create</span><span class="esymbol"> </span><span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_color_struct_api.html">SDL_COLOR_STRUCT_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../base/memory_structure.html#f_make">make</a>
				<span class="elocal">i</span> <span class="esymbol">:=</span> <span class="elocal">i</span> <a class="esymbol" href="../../base/integer_32.html#f_plus">+</a> <span class="enumber">1</span>
			<span class="ekeyword">end</span>
		<span class="ekeyword">end</span>

	<a name="f_palette_to_set"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_palette_to_set">palette_to_set</a><span class="esymbol">:</span> <a class="eclass" href="../../base/boolean.html">BOOLEAN</a>
	
<span class="ekeyword">feature</span> <span class="ecomment">--</span><span class="ecomment"> Screen width and height, from configuration file.</span>

	<a name="f_window_width"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_window_width">window_width</a><span class="esymbol">:</span> <a class="eclass" href="../../base/integer_32.html">INTEGER_32</a>

	<a name="f_window_height"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_window_height">window_height</a><span class="esymbol">:</span> <a class="eclass" href="../../base/integer_32.html">INTEGER_32</a>
	
<span class="ekeyword">feature</span> <span class="ecomment">--</span><span class="ecomment"> I_InitGraphics</span>

	<a name="f_firsttime"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_firsttime">firsttime</a><span class="esymbol">:</span> <a class="eclass" href="../../base/boolean.html">BOOLEAN</a>

	<a name="f_i_initgraphics"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_i_initgraphics">i_initgraphics</a>
			<span class="ecomment">--</span><span class="ecomment"> from </span><a class="ecomment" href="https://github.com/chocolate-doom/chocolate-doom/blob/7a0db31614ec187e363e7664036d95ec56242e44/src/i_video.c#L1357">https://github.com/chocolate-doom/chocolate-doom/blob/7a0db31614ec187e363e7664036d95ec56242e44/src/i_video.c#L1357</a>
		<span class="ekeyword">local</span>
			<span class="elocal">dummy</span><span class="esymbol">:</span> <a class="eclass" href="../../wrap_sdl2/sdl_event_union_api.html">SDL_EVENT_UNION_API</a>
		<span class="ekeyword">do</span>
			<span class="esymbol">{</span><a class="eclass" href="../../brie_doom/not_implemented.html">NOT_IMPLEMENTED</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/not_implemented.html#f_not_implemented">not_implemented</a> <span class="esymbol">(</span>&quot;I_InitGraphics&quot;<span class="esymbol">,</span> <span class="ekeyword">False</span><span class="esymbol">)</span>
			<span class="ekeyword">if</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_functions_api.html">SDL_FUNCTIONS_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_functions_api.html#f_sdl_init">sdl_init</a> <span class="esymbol">(</span><span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_constant_api.html">SDL_CONSTANT_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_constant_api.html#f_sdl_init_video">sdl_init_video</a><span class="edot">.</span><a class="efeature" href="../../base/integer_32_ref.html#f_to_natural_32">to_natural_32</a><span class="esymbol">)</span> <a class="esymbol" href="../../base/integer_32.html#f_is_less">&lt;</a> <span class="enumber">0</span> <span class="ekeyword">then</span>
				<span class="esymbol">{</span><a class="eclass" href="../../brie_doom/i_main.html">I_MAIN</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/i_main.html#f_i_error">i_error</a> <span class="esymbol">(</span>&quot;Failed to initialize video: &quot; <a class="esymbol" href="../../base/string_8.html#f_plus">+</a> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_error.html">SDL_ERROR</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_error.html#f_sdl_get_error">sdl_get_error</a><span class="esymbol">)</span>
			<span class="ekeyword">end</span>
			<span class="ekeyword">if</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_aspect_ratio_correct">aspect_ratio_correct</a> <span class="ekeyword">then</span>
				<a class="efeature" href="../../brie_doom/render/i_video.html#f_actualheight">actualheight</a> <span class="esymbol">:=</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_screenheight_4_3">Screenheight_4_3</a>
			<span class="ekeyword">else</span>
				<a class="efeature" href="../../brie_doom/render/i_video.html#f_actualheight">actualheight</a> <span class="esymbol">:=</span> <span class="esymbol">{</span><a class="eclass" href="../../brie_doom/doomdef_h.html">DOOMDEF_H</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/doomdef_h.html#f_screenheight">screenheight</a>
			<span class="ekeyword">end</span>
			<a class="efeature" href="../../brie_doom/render/i_video.html#f_adjust_window_size">adjust_window_size</a>
			<a class="efeature" href="../../brie_doom/render/i_video.html#f_set_video_mode">set_video_mode</a>
			<span class="ekeyword">check</span>
					<span class="ekeyword">attached</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_screenbuffer">screenbuffer</a> <span class="ekeyword">as</span> sb
			<span class="ekeyword">then</span>
				<span class="ekeyword">if</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_surface.html">SDL_SURFACE</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_surface.html#f_sdl_fill_rect">sdl_fill_rect</a> <span class="esymbol">(</span><span class="elocal">sb</span><span class="esymbol">,</span> <span class="ekeyword">Void</span><span class="esymbol">,</span> <span class="enumber">0</span><span class="esymbol">)</span> <a class="esymbol" href="../../base/integer_32.html#f_is_less">&lt;</a> <span class="enumber">0</span> <span class="ekeyword">then</span>
					<span class="esymbol">{</span><a class="eclass" href="../../brie_doom/i_main.html">I_MAIN</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/i_main.html#f_i_error">i_error</a> <span class="esymbol">(</span>&quot;SDL_FillRect failed &quot; <a class="esymbol" href="../../base/string_8.html#f_plus">+</a> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_error.html">SDL_ERROR</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_error.html#f_sdl_get_error">sdl_get_error</a><span class="esymbol">)</span>
				<span class="ekeyword">end</span>
			<span class="ekeyword">end</span>
			<a class="efeature" href="../../brie_doom/render/i_video.html#f_i_setpalette">i_setpalette</a><span class="esymbol"> </span><span class="esymbol">(</span><a class="efeature" href="../../brie_doom/render/i_video.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../../brie_doom/i_main.html#f_w_wad">W_wad</a><span class="edot">.</span><a class="efeature" href="../../brie_doom/w_wad.html#f_w_cachelumpname">w_cachelumpname</a><span class="esymbol"> </span><span class="esymbol">(</span>&quot;PLAYPAL&quot;<span class="esymbol">)</span><span class="esymbol">)</span>
			<a class="efeature" href="../../brie_doom/render/i_video.html#f_set_sdl_palette">set_sdl_palette</a>
			<a class="efeature" href="../../brie_doom/render/i_video.html#f_updategrab">updategrab</a>
			<span class="ekeyword">if</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_fullscreen">fullscreen</a> <a class="ekeyword" href="../../base/boolean.html#f_conjuncted">and</a> <a class="ekeyword" href="../../base/boolean.html#f_negated">not</a> <a class="efeature" href="../../brie_doom/render/i_video.html#f_screensaver_mode">screensaver_mode</a> <span class="ekeyword">then</span>
				<span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_timer_functions_api.html">SDL_TIMER_FUNCTIONS_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_timer_functions_api.html#f_sdl_delay">sdl_delay</a> <span class="esymbol">(</span><a class="efeature" href="../../brie_doom/render/i_video.html#f_startup_delay">Startup_delay</a><span class="edot">.</span><a class="efeature" href="../../base/integer_32_ref.html#f_to_natural_32">to_natural_32</a><span class="esymbol">)</span>
			<span class="ekeyword">end</span>
			<span class="ekeyword">check</span>
					<span class="ekeyword">attached</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_screenbuffer">screenbuffer</a> <span class="ekeyword">as</span> sb
			<span class="ekeyword">then</span>
				<span class="ekeyword">create</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_i_videobuffer">i_videobuffer</a><span class="edot">.</span><a class="efeature" href="../../brie_doom/render/pixel_t_buffer.html#f_share_from_pointer">share_from_pointer</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">sb</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_surface_struct_api.html#f_pixels">pixels</a><span class="esymbol">,</span> <span class="esymbol">{</span><a class="eclass" href="../../brie_doom/doomdef_h.html">DOOMDEF_H</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/doomdef_h.html#f_screenwidth">screenwidth</a> <a class="esymbol" href="../../base/integer_32.html#f_product">*</a> <span class="esymbol">{</span><a class="eclass" href="../../brie_doom/doomdef_h.html">DOOMDEF_H</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/doomdef_h.html#f_screenheight">screenheight</a><span class="esymbol">)</span>
			<span class="ekeyword">end</span>
			<a class="efeature" href="../../brie_doom/render/i_video.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../../brie_doom/i_main.html#f_v_video">V_video</a><span class="edot">.</span><a class="efeature" href="../../brie_doom/render/v_video.html#f_v_restorebuffer">v_restorebuffer</a>
			<a class="efeature" href="../../brie_doom/render/i_video.html#f_i_videobuffer">i_videobuffer</a><span class="edot">.</span><a class="efeature" href="../../brie_doom/render/pixel_t_buffer.html#f_fill_zero">fill_zero</a>
			<span class="ekeyword">from</span>
				<span class="ekeyword">create</span> <span class="elocal">dummy</span><span class="edot">.</span><a class="efeature" href="../../base/memory_structure.html#f_make">make</a>
			<span class="ekeyword">until</span>
				<span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_events.html">SDL_EVENTS</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_events.html#f_sdl_poll_event">sdl_poll_event</a> <span class="esymbol">(</span><span class="elocal">dummy</span><span class="esymbol">)</span> <span class="esymbol">=</span> <span class="enumber">0</span>
			<span class="ekeyword">loop</span>
			<span class="ekeyword">end</span>
			<a class="efeature" href="../../brie_doom/render/i_video.html#f_initialized">initialized</a> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
		<span class="ekeyword">end</span>

	<a name="f_adjust_window_size"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_adjust_window_size">adjust_window_size</a>
			<span class="ecomment">--</span><span class="ecomment"> Adjust window_width / window_height variables to be an an aspect</span>
			<span class="ecomment">--</span><span class="ecomment"> ratio consistent with the aspect_ratio_correct variable.</span>
		<span class="ekeyword">do</span>
			<span class="ekeyword">if</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_aspect_ratio_correct">aspect_ratio_correct</a> <a class="ekeyword" href="../../base/boolean.html#f_disjuncted">or</a> <a class="efeature" href="../../brie_doom/render/i_video.html#f_integer_scaling">integer_scaling</a> <span class="ekeyword">then</span>
				<span class="ekeyword">if</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_window_width">window_width</a> <a class="esymbol" href="../../base/integer_32.html#f_product">*</a> <a class="efeature" href="../../brie_doom/render/i_video.html#f_actualheight">actualheight</a> <a class="esymbol" href="../../base/comparable.html#f_is_less_equal">&lt;=</a> <a class="efeature" href="../../brie_doom/render/i_video.html#f_window_height">window_height</a> <a class="esymbol" href="../../base/integer_32.html#f_product">*</a> <span class="esymbol">{</span><a class="eclass" href="../../brie_doom/doomdef_h.html">DOOMDEF_H</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/doomdef_h.html#f_screenwidth">screenwidth</a> <span class="ekeyword">then</span>
					<a class="efeature" href="../../brie_doom/render/i_video.html#f_window_height">window_height</a> <span class="esymbol">:=</span> <span class="esymbol">(</span><a class="efeature" href="../../brie_doom/render/i_video.html#f_window_width">window_width</a> <a class="esymbol" href="../../base/integer_32.html#f_product">*</a> <a class="efeature" href="../../brie_doom/render/i_video.html#f_actualheight">actualheight</a> <a class="esymbol" href="../../base/integer_32.html#f_plus">+</a> <span class="esymbol">{</span><a class="eclass" href="../../brie_doom/doomdef_h.html">DOOMDEF_H</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/doomdef_h.html#f_screenwidth">screenwidth</a> <a class="esymbol" href="../../base/integer_32.html#f_minus">-</a> <span class="enumber">1</span><span class="esymbol">)</span> <a class="esymbol" href="../../base/integer_32.html#f_integer_quotient">//</a> <span class="esymbol">{</span><a class="eclass" href="../../brie_doom/doomdef_h.html">DOOMDEF_H</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/doomdef_h.html#f_screenwidth">screenwidth</a>
				<span class="ekeyword">else</span>
					<a class="efeature" href="../../brie_doom/render/i_video.html#f_window_width">window_width</a> <span class="esymbol">:=</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_window_height">window_height</a> <a class="esymbol" href="../../base/integer_32.html#f_product">*</a> <span class="esymbol">{</span><a class="eclass" href="../../brie_doom/doomdef_h.html">DOOMDEF_H</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/doomdef_h.html#f_screenwidth">screenwidth</a> <a class="esymbol" href="../../base/integer_32.html#f_integer_quotient">//</a> <a class="efeature" href="../../brie_doom/render/i_video.html#f_actualheight">actualheight</a>
				<span class="ekeyword">end</span>
			<span class="ekeyword">end</span>
		<span class="ekeyword">end</span>
	
<span class="ekeyword">feature</span> 

	<a name="f_i_startframe"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_i_startframe">i_startframe</a>
		<span class="ekeyword">do</span>
		<span class="ekeyword">end</span>

	<a name="f_i_starttic"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_i_starttic">i_starttic</a>
		<span class="ekeyword">do</span>
			<span class="esymbol">{</span><a class="eclass" href="../../brie_doom/not_implemented.html">NOT_IMPLEMENTED</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/not_implemented.html#f_not_implemented">not_implemented</a> <span class="esymbol">(</span>&quot;I_StartTic&quot;<span class="esymbol">,</span> <span class="ekeyword">False</span><span class="esymbol">)</span>
			<span class="ekeyword">if</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_initialized">initialized</a> <span class="ekeyword">then</span>
				<a class="efeature" href="../../brie_doom/render/i_video.html#f_i_getevent">i_getevent</a>
				<span class="ekeyword">if</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_usemouse">Usemouse</a> <a class="ekeyword" href="../../base/boolean.html#f_conjuncted">and</a> <a class="ekeyword" href="../../base/boolean.html#f_negated">not</a> <a class="efeature" href="../../brie_doom/render/i_video.html#f_nomouse">nomouse</a> <a class="ekeyword" href="../../base/boolean.html#f_conjuncted">and</a> <a class="efeature" href="../../brie_doom/render/i_video.html#f_window_focused">window_focused</a> <span class="ekeyword">then</span>
					<a class="efeature" href="../../brie_doom/render/i_video.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../../brie_doom/i_main.html#f_i_input">I_input</a><span class="edot">.</span><a class="efeature" href="../../brie_doom/i_input.html#f_i_readmouse">i_readmouse</a>
				<span class="ekeyword">end</span>
			<span class="ekeyword">end</span>
		<span class="ekeyword">end</span>

	<a name="f_i_getevent"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_i_getevent">i_getevent</a>
		<span class="ekeyword">local</span>
			<span class="elocal">event</span><span class="esymbol">:</span> <a class="eclass" href="../../brie_doom/event_t.html">EVENT_T</a>
			<span class="elocal">sdl_event</span><span class="esymbol">:</span> <a class="eclass" href="../../wrap_sdl2/sdl_event_union_api.html">SDL_EVENT_UNION_API</a>
		<span class="ekeyword">do</span>
			<span class="ekeyword">from</span>
				<span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_events_functions_api.html">SDL_EVENTS_FUNCTIONS_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_events_functions_api.html#f_sdl_pump_events">sdl_pump_events</a>
				<span class="ekeyword">create</span> <span class="elocal">sdl_event</span><span class="edot">.</span><a class="efeature" href="../../base/memory_structure.html#f_make">make</a>
			<span class="ekeyword">until</span>
				<span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_events_functions_api.html">SDL_EVENTS_FUNCTIONS_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_events_functions_api.html#f_sdl_poll_event">sdl_poll_event</a> <span class="esymbol">(</span><span class="elocal">sdl_event</span><span class="esymbol">)</span> <span class="esymbol">=</span> <span class="enumber">0</span>
			<span class="ekeyword">loop</span>
				<span class="ekeyword">if</span> <span class="elocal">sdl_event</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_event_union_api.html#f_type">type</a> <span class="esymbol">=</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_constant_api.html">SDL_CONSTANT_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_constant_api.html#f_sdl_keydown">sdl_keydown</a> <a class="ekeyword" href="../../base/boolean.html#f_conjuncted_semistrict">and then</a> <a class="efeature" href="../../brie_doom/render/i_video.html#f_toggle_full_screen_key_shortcut">toggle_full_screen_key_shortcut</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">sdl_event</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_event_union_api.html#f_key">key</a><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_keyboard_event_struct_api.html#f_keysym">keysym</a><span class="esymbol">)</span> <span class="ekeyword">then</span>
					<a class="efeature" href="../../brie_doom/render/i_video.html#f_i_togglefullscreen">i_togglefullscreen</a>
				<span class="ekeyword">elseif</span> <span class="elocal">sdl_event</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_event_union_api.html#f_type">type</a> <span class="esymbol">=</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_constant_api.html">SDL_CONSTANT_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_constant_api.html#f_sdl_keydown">sdl_keydown</a> <a class="ekeyword" href="../../base/boolean.html#f_disjuncted">or</a> <span class="elocal">sdl_event</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_event_union_api.html#f_type">type</a> <span class="esymbol">=</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_constant_api.html">SDL_CONSTANT_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_constant_api.html#f_sdl_keyup">sdl_keyup</a> <span class="ekeyword">then</span>
					<a class="efeature" href="../../brie_doom/render/i_video.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../../brie_doom/i_main.html#f_i_input">I_input</a><span class="edot">.</span><a class="efeature" href="../../brie_doom/i_input.html#f_i_handlekeyboardevent">i_handlekeyboardevent</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">sdl_event</span><span class="esymbol">)</span>
				<span class="ekeyword">elseif</span> <span class="elocal">sdl_event</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_event_union_api.html#f_type">type</a> <span class="esymbol">=</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_constant_api.html">SDL_CONSTANT_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_constant_api.html#f_sdl_mousebuttondown">sdl_mousebuttondown</a> <a class="ekeyword" href="../../base/boolean.html#f_disjuncted">or</a> <span class="elocal">sdl_event</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_event_union_api.html#f_type">type</a> <span class="esymbol">=</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_constant_api.html">SDL_CONSTANT_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_constant_api.html#f_sdl_mousebuttonup">sdl_mousebuttonup</a> <a class="ekeyword" href="../../base/boolean.html#f_disjuncted">or</a> <span class="elocal">sdl_event</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_event_union_api.html#f_type">type</a> <span class="esymbol">=</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_constant_api.html">SDL_CONSTANT_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_constant_api.html#f_sdl_mousewheel">sdl_mousewheel</a> <span class="ekeyword">then</span>
					<span class="ekeyword">if</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_usemouse">Usemouse</a> <a class="ekeyword" href="../../base/boolean.html#f_conjuncted">and</a> <a class="ekeyword" href="../../base/boolean.html#f_negated">not</a> <a class="efeature" href="../../brie_doom/render/i_video.html#f_nomouse">nomouse</a> <a class="ekeyword" href="../../base/boolean.html#f_conjuncted">and</a> <a class="efeature" href="../../brie_doom/render/i_video.html#f_window_focused">window_focused</a> <span class="ekeyword">then</span>
						<a class="efeature" href="../../brie_doom/render/i_video.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../../brie_doom/i_main.html#f_i_input">I_input</a><span class="edot">.</span><a class="efeature" href="../../brie_doom/i_input.html#f_i_handlemouseevent">i_handlemouseevent</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">sdl_event</span><span class="esymbol">)</span>
					<span class="ekeyword">end</span>
				<span class="ekeyword">elseif</span> <span class="elocal">sdl_event</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_event_union_api.html#f_type">type</a> <span class="esymbol">=</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_constant_api.html">SDL_CONSTANT_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_constant_api.html#f_sdl_quit">sdl_quit</a> <span class="ekeyword">then</span>
					<span class="ekeyword">if</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_screensaver_mode">screensaver_mode</a> <span class="ekeyword">then</span>
						<a class="efeature" href="../../brie_doom/render/i_video.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../../brie_doom/i_main.html#f_i_system">I_system</a><span class="edot">.</span><a class="efeature" href="../../brie_doom/i_system.html#f_i_quit">i_quit</a>
					<span class="ekeyword">else</span>
						<span class="ekeyword">create</span> <span class="elocal">event</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/event_t.html#f_make">make</a>
						<span class="elocal">event</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/event_t.html#f_type">type</a> <span class="esymbol">:=</span> <span class="esymbol">{</span><a class="eclass" href="../../brie_doom/event_t.html">EVENT_T</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/event_t.html#f_ev_quit">ev_quit</a>
						<a class="efeature" href="../../brie_doom/render/i_video.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../../brie_doom/i_main.html#f_d_main">D_main</a><span class="edot">.</span><a class="efeature" href="../../brie_doom/d_main.html#f_d_postevent">d_postevent</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">event</span><span class="esymbol">)</span>
					<span class="ekeyword">end</span>
				<span class="ekeyword">elseif</span> <span class="elocal">sdl_event</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_event_union_api.html#f_type">type</a> <span class="esymbol">=</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_constant_api.html">SDL_CONSTANT_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_constant_api.html#f_sdl_windowevent">sdl_windowevent</a> <span class="ekeyword">then</span>
					<span class="ekeyword">check</span>
							<span class="ekeyword">attached</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_screen">screen</a> <span class="ekeyword">as</span> s
					<span class="ekeyword">then</span>
						<span class="ekeyword">if</span> <span class="elocal">sdl_event</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_event_union_api.html#f_window">window</a><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_window_event_struct_api.html#f_windowid">windowid</a> <span class="esymbol">=</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_video_functions_api.html">SDL_VIDEO_FUNCTIONS_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_video_functions_api.html#f_sdl_get_window_id">sdl_get_window_id</a> <span class="esymbol">(</span><span class="elocal">s</span><span class="esymbol">)</span> <span class="ekeyword">then</span>
							<a class="efeature" href="../../brie_doom/render/i_video.html#f_handlewindowevent">handlewindowevent</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">sdl_event</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_event_union_api.html#f_window">window</a><span class="esymbol">)</span>
						<span class="ekeyword">end</span>
					<span class="ekeyword">end</span>
				<span class="ekeyword">end</span>
			<span class="ekeyword">end</span>
		<span class="ekeyword">end</span>

	<a name="f_toggle_full_screen_key_shortcut"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_toggle_full_screen_key_shortcut">toggle_full_screen_key_shortcut</a> <span class="esymbol">(</span><span class="elocal">sym</span><span class="esymbol">:</span> <a class="eclass" href="../../wrap_sdl2/sdl_keysym_struct_api.html">SDL_KEYSYM_STRUCT_API</a><span class="esymbol">)</span><span class="esymbol">:</span> <a class="eclass" href="../../base/boolean.html">BOOLEAN</a>
		<span class="ekeyword">local</span>
			<span class="elocal">flags</span><span class="esymbol">:</span> <a class="eclass" href="../../base/natural_32.html">NATURAL_32</a>
		<span class="ekeyword">do</span>
			<span class="elocal">flags</span> <span class="esymbol">:=</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_keymod_enum_api.html">SDL_KEYMOD_ENUM_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_keymod_enum_api.html#f_kmod_lalt">kmod_lalt</a><span class="edot">.</span><a class="efeature" href="../../base/integer_32.html#f_as_natural_32">as_natural_32</a> <a class="esymbol" href="../../base/natural_32.html#f_bit_or">|</a> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_keymod_enum_api.html">SDL_KEYMOD_ENUM_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_keymod_enum_api.html#f_kmod_ralt">kmod_ralt</a><span class="edot">.</span><a class="efeature" href="../../base/integer_32.html#f_as_natural_32">as_natural_32</a>
			<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="esymbol">(</span><span class="elocal">sym</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_keysym_struct_api.html#f_scancode">scancode</a> <span class="esymbol">=</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_scancode_enum_api.html">SDL_SCANCODE_ENUM_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_scancode_enum_api.html#f_sdl_scancode_return">sdl_scancode_return</a> <a class="ekeyword" href="../../base/boolean.html#f_disjuncted">or</a> <span class="elocal">sym</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_keysym_struct_api.html#f_scancode">scancode</a> <span class="esymbol">=</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_scancode_enum_api.html">SDL_SCANCODE_ENUM_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_scancode_enum_api.html#f_sdl_scancode_kp_enter">sdl_scancode_kp_enter</a><span class="esymbol">)</span> <a class="ekeyword" href="../../base/boolean.html#f_conjuncted">and</a> <span class="esymbol">(</span><span class="esymbol">(</span><span class="elocal">sym</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_keysym_struct_api.html#f_mod">mod</a> <a class="esymbol" href="../../base/natural_32.html#f_bit_and">&#38;</a> <span class="elocal">flags</span><span class="esymbol">)</span> <span class="esymbol">/=</span> <span class="enumber">0</span><span class="esymbol">)</span>
		<span class="ekeyword">end</span>

	<a name="f_i_togglefullscreen"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_i_togglefullscreen">i_togglefullscreen</a>
		<span class="ekeyword">local</span>
			<span class="elocal">flags</span><span class="esymbol">:</span> <a class="eclass" href="../../base/integer_32.html">INTEGER_32</a>
		<span class="ekeyword">do</span>
			<span class="ekeyword">if</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_fullscreen_width">Fullscreen_width</a> <span class="esymbol">/=</span> <span class="enumber">0</span> <a class="ekeyword" href="../../base/boolean.html#f_disjuncted">or</a> <a class="efeature" href="../../brie_doom/render/i_video.html#f_fullscreen_height">Fullscreen_height</a> <span class="esymbol">/=</span> <span class="enumber">0</span> <span class="ekeyword">then</span>
			<span class="ekeyword">else</span>
				<a class="efeature" href="../../brie_doom/render/i_video.html#f_fullscreen">fullscreen</a> <span class="esymbol">:=</span> <a class="ekeyword" href="../../base/boolean.html#f_negated">not</a> <a class="efeature" href="../../brie_doom/render/i_video.html#f_fullscreen">fullscreen</a>
				<span class="ekeyword">if</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_fullscreen">fullscreen</a> <span class="ekeyword">then</span>
					<span class="elocal">flags</span> <span class="esymbol">:=</span> <span class="elocal">flags</span> <a class="esymbol" href="../../base/integer_32.html#f_bit_or">|</a> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_window_flags_enum_api.html">SDL_WINDOW_FLAGS_ENUM_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_window_flags_enum_api.html#f_sdl_window_fullscreen_desktop">sdl_window_fullscreen_desktop</a>
				<span class="ekeyword">end</span>
				<span class="ekeyword">check</span>
						<span class="ekeyword">attached</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_screen">screen</a> <span class="ekeyword">as</span> s
				<span class="ekeyword">then</span>
					<span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_video_functions_api.html">SDL_VIDEO_FUNCTIONS_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_video_functions_api.html#f_sdl_set_window_fullscreen">sdl_set_window_fullscreen</a> <span class="esymbol">(</span><span class="elocal">s</span><span class="esymbol">,</span> <span class="elocal">flags</span><span class="edot">.</span><a class="efeature" href="../../base/integer_32.html#f_as_natural_32">as_natural_32</a><span class="esymbol">)</span><span class="edot">.</span><a class="efeature" href="../../base/any.html#f_do_nothing">do_nothing</a>
					<span class="ekeyword">if</span> <a class="ekeyword" href="../../base/boolean.html#f_negated">not</a> <a class="efeature" href="../../brie_doom/render/i_video.html#f_fullscreen">fullscreen</a> <span class="ekeyword">then</span>
						<a class="efeature" href="../../brie_doom/render/i_video.html#f_adjustwindowsize">adjustwindowsize</a>
						<span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_video_functions_api.html">SDL_VIDEO_FUNCTIONS_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_video_functions_api.html#f_sdl_set_window_size">sdl_set_window_size</a> <span class="esymbol">(</span><span class="elocal">s</span><span class="esymbol">,</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_window_width">window_width</a><span class="esymbol">,</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_window_height">window_height</a><span class="esymbol">)</span>
					<span class="ekeyword">end</span>
				<span class="ekeyword">end</span>
			<span class="ekeyword">end</span>
		<span class="ekeyword">end</span>

	<a name="f_adjustwindowsize"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_adjustwindowsize">adjustwindowsize</a>
			<span class="ecomment">--</span><span class="ecomment"> Adjust window_width / window_height variables to be an aspect</span>
			<span class="ecomment">--</span><span class="ecomment"> ratio consistent with the aspect_ratio_correct variable.</span>
		<span class="ekeyword">do</span>
			<span class="ekeyword">if</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_aspect_ratio_correct">aspect_ratio_correct</a> <a class="ekeyword" href="../../base/boolean.html#f_disjuncted">or</a> <a class="efeature" href="../../brie_doom/render/i_video.html#f_integer_scaling">integer_scaling</a> <span class="ekeyword">then</span>
				<span class="ekeyword">if</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_window_width">window_width</a> <a class="esymbol" href="../../base/integer_32.html#f_product">*</a> <a class="efeature" href="../../brie_doom/render/i_video.html#f_actualheight">actualheight</a> <a class="esymbol" href="../../base/comparable.html#f_is_less_equal">&lt;=</a> <a class="efeature" href="../../brie_doom/render/i_video.html#f_window_height">window_height</a> <a class="esymbol" href="../../base/integer_32.html#f_product">*</a> <span class="esymbol">{</span><a class="eclass" href="../../brie_doom/doomdef_h.html">DOOMDEF_H</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/doomdef_h.html#f_screenwidth">screenwidth</a> <span class="ekeyword">then</span>
					<a class="efeature" href="../../brie_doom/render/i_video.html#f_window_height">window_height</a> <span class="esymbol">:=</span> <span class="esymbol">(</span><a class="efeature" href="../../brie_doom/render/i_video.html#f_window_width">window_width</a> <a class="esymbol" href="../../base/integer_32.html#f_product">*</a> <a class="efeature" href="../../brie_doom/render/i_video.html#f_actualheight">actualheight</a> <a class="esymbol" href="../../base/integer_32.html#f_plus">+</a> <span class="esymbol">{</span><a class="eclass" href="../../brie_doom/doomdef_h.html">DOOMDEF_H</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/doomdef_h.html#f_screenwidth">screenwidth</a> <a class="esymbol" href="../../base/integer_32.html#f_minus">-</a> <span class="enumber">1</span><span class="esymbol">)</span> <a class="esymbol" href="../../base/integer_32.html#f_integer_quotient">//</a> <span class="esymbol">{</span><a class="eclass" href="../../brie_doom/doomdef_h.html">DOOMDEF_H</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/doomdef_h.html#f_screenwidth">screenwidth</a>
				<span class="ekeyword">else</span>
					<a class="efeature" href="../../brie_doom/render/i_video.html#f_window_width">window_width</a> <span class="esymbol">:=</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_window_height">window_height</a> <a class="esymbol" href="../../base/integer_32.html#f_product">*</a> <span class="esymbol">{</span><a class="eclass" href="../../brie_doom/doomdef_h.html">DOOMDEF_H</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/doomdef_h.html#f_screenwidth">screenwidth</a> <a class="esymbol" href="../../base/integer_32.html#f_integer_quotient">//</a> <a class="efeature" href="../../brie_doom/render/i_video.html#f_actualheight">actualheight</a>
				<span class="ekeyword">end</span>
			<span class="ekeyword">end</span>
		<span class="ekeyword">end</span>

	<a name="f_handlewindowevent"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_handlewindowevent">handlewindowevent</a> <span class="esymbol">(</span><span class="elocal">event</span><span class="esymbol">:</span> <a class="eclass" href="../../wrap_sdl2/sdl_window_event_struct_api.html">SDL_WINDOW_EVENT_STRUCT_API</a><span class="esymbol">)</span>
		<span class="ekeyword">do</span>
			<span class="esymbol">{</span><a class="eclass" href="../../brie_doom/not_implemented.html">NOT_IMPLEMENTED</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/not_implemented.html#f_not_implemented">not_implemented</a> <span class="esymbol">(</span>&quot;HandleWindowEvent&quot;<span class="esymbol">,</span> <span class="ekeyword">False</span><span class="esymbol">)</span>
			<span class="ekeyword">if</span> <span class="elocal">event</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_window_event_struct_api.html#f_type">type</a> <span class="esymbol">=</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_window_event_id_enum_api.html">SDL_WINDOW_EVENT_ID_ENUM_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_window_event_id_enum_api.html#f_sdl_windowevent_focus_gained">sdl_windowevent_focus_gained</a><span class="edot">.</span><a class="efeature" href="../../base/integer_32.html#f_as_natural_32">as_natural_32</a> <span class="ekeyword">then</span>
				<a class="efeature" href="../../brie_doom/render/i_video.html#f_window_focused">window_focused</a> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
			<span class="ekeyword">elseif</span> <span class="elocal">event</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_window_event_struct_api.html#f_type">type</a> <span class="esymbol">=</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_window_event_id_enum_api.html">SDL_WINDOW_EVENT_ID_ENUM_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_window_event_id_enum_api.html#f_sdl_windowevent_focus_lost">sdl_windowevent_focus_lost</a><span class="edot">.</span><a class="efeature" href="../../base/integer_32.html#f_as_natural_32">as_natural_32</a> <span class="ekeyword">then</span>
				<a class="efeature" href="../../brie_doom/render/i_video.html#f_window_focused">window_focused</a> <span class="esymbol">:=</span> <span class="ekeyword">False</span>
			<span class="ekeyword">end</span>
		<span class="ekeyword">end</span>
	
<span class="ekeyword">feature</span> 

	<a name="f_i_readscreen"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_i_readscreen">i_readscreen</a> <span class="esymbol">(</span><span class="elocal">scr</span><span class="esymbol">:</span> <a class="eclass" href="../../brie_doom/render/pixel_t_buffer.html">PIXEL_T_BUFFER</a><span class="esymbol">)</span>
		<span class="ekeyword">do</span>
			<span class="elocal">scr</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/render/pixel_t_buffer.html#f_copy_from">copy_from</a><span class="esymbol"> </span><span class="esymbol">(</span><a class="efeature" href="../../brie_doom/render/i_video.html#f_i_videobuffer">i_videobuffer</a><span class="esymbol">)</span>
		<span class="ekeyword">end</span>
	
<span class="ekeyword">feature</span> 

	<a name="f_i_updatenoblit"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_i_updatenoblit">i_updatenoblit</a>
		<span class="ekeyword">do</span>
		<span class="ekeyword">end</span>
	
<span class="ekeyword">feature</span> 

	<a name="f_set_video_mode"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_set_video_mode">set_video_mode</a>
			<span class="ecomment">--</span><span class="ecomment"> from </span><a class="ecomment" href="https://github.com/chocolate-doom/chocolate-doom/blob/7a0db31614ec187e363e7664036d95ec56242e44/src/i_video.c#L1149">https://github.com/chocolate-doom/chocolate-doom/blob/7a0db31614ec187e363e7664036d95ec56242e44/src/i_video.c#L1149</a>
		<span class="ekeyword">local</span>
			<span class="elocal">bpp</span><span class="esymbol">:</span> <a class="eclass" href="../../base/integer_32.html">INTEGER_32</a>
			<span class="elocal">rmask</span><span class="esymbol">:</span> <a class="eclass" href="../../base/natural_32.html">NATURAL_32</a>
			<span class="elocal">gmask</span><span class="esymbol">:</span> <a class="eclass" href="../../base/natural_32.html">NATURAL_32</a>
			<span class="elocal">bmask</span><span class="esymbol">:</span> <a class="eclass" href="../../base/natural_32.html">NATURAL_32</a>
			<span class="elocal">amask</span><span class="esymbol">:</span> <a class="eclass" href="../../base/natural_32.html">NATURAL_32</a>
			<span class="elocal">p</span><span class="esymbol">:</span> <a class="eclass" href="../../base/pointer.html">POINTER</a>
			<span class="elocal">w</span><span class="esymbol">,</span> <span class="elocal">h</span><span class="esymbol">:</span> <a class="eclass" href="../../base/integer_32.html">INTEGER_32</a>
			<span class="elocal">window_flags</span><span class="esymbol">,</span> <span class="elocal">renderer_flags</span><span class="esymbol">:</span> <a class="eclass" href="../../base/integer_32.html">INTEGER_32</a>
		<span class="ekeyword">do</span>
			<span class="esymbol">{</span><a class="eclass" href="../../brie_doom/not_implemented.html">NOT_IMPLEMENTED</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/not_implemented.html#f_not_implemented">not_implemented</a> <span class="esymbol">(</span>&quot;set_video_mode&quot;<span class="esymbol">,</span> <span class="ekeyword">False</span><span class="esymbol">)</span>
			<span class="elocal">w</span> <span class="esymbol">:=</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_window_width">window_width</a>
			<span class="elocal">h</span> <span class="esymbol">:=</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_window_height">window_height</a>
			<span class="elocal">window_flags</span> <span class="esymbol">:=</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_window_flags_enum_api.html">SDL_WINDOW_FLAGS_ENUM_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_window_flags_enum_api.html#f_sdl_window_resizable">sdl_window_resizable</a>
			<span class="elocal">window_flags</span> <span class="esymbol">:=</span> <span class="elocal">window_flags</span> <a class="esymbol" href="../../base/integer_32.html#f_bit_or">|</a> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_window_flags_enum_api.html">SDL_WINDOW_FLAGS_ENUM_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_window_flags_enum_api.html#f_sdl_window_allow_highdpi">sdl_window_allow_highdpi</a>
			<span class="ekeyword">if</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_fullscreen">fullscreen</a> <span class="ekeyword">then</span>
				<span class="ekeyword">if</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_fullscreen_width">Fullscreen_width</a> <span class="esymbol">=</span> <span class="enumber">0</span> <a class="ekeyword" href="../../base/boolean.html#f_conjuncted">and</a> <a class="efeature" href="../../brie_doom/render/i_video.html#f_fullscreen_height">Fullscreen_height</a> <span class="esymbol">=</span> <span class="enumber">0</span> <span class="ekeyword">then</span>
					<span class="elocal">window_flags</span> <span class="esymbol">:=</span> <span class="elocal">window_flags</span> <a class="esymbol" href="../../base/integer_32.html#f_bit_or">|</a> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_window_flags_enum_api.html">SDL_WINDOW_FLAGS_ENUM_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_window_flags_enum_api.html#f_sdl_window_fullscreen_desktop">sdl_window_fullscreen_desktop</a>
				<span class="ekeyword">else</span>
					<span class="elocal">w</span> <span class="esymbol">:=</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_fullscreen_width">Fullscreen_width</a>
					<span class="elocal">h</span> <span class="esymbol">:=</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_fullscreen_height">Fullscreen_height</a>
					<span class="elocal">window_flags</span> <span class="esymbol">:=</span> <span class="elocal">window_flags</span> <a class="esymbol" href="../../base/integer_32.html#f_bit_or">|</a> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_window_flags_enum_api.html">SDL_WINDOW_FLAGS_ENUM_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_window_flags_enum_api.html#f_sdl_window_fullscreen">sdl_window_fullscreen</a>
				<span class="ekeyword">end</span>
			<span class="ekeyword">end</span>
			<span class="ekeyword">if</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_screen">screen</a> <span class="esymbol">=</span> <span class="ekeyword">Void</span> <span class="ekeyword">then</span>
				<a class="efeature" href="../../brie_doom/render/i_video.html#f_screen">screen</a> <span class="esymbol">:=</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_video.html">SDL_VIDEO</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_video.html#f_sdl_create_window">sdl_create_window</a> <span class="esymbol">(</span>&quot;SDL EIFFEL DOOM&quot;<span class="esymbol">,</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_constant_api.html">SDL_CONSTANT_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_constant_api.html#f_sdl_windowpos_undefined">sdl_windowpos_undefined</a><span class="esymbol">,</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_constant_api.html">SDL_CONSTANT_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_constant_api.html#f_sdl_windowpos_undefined">sdl_windowpos_undefined</a><span class="esymbol">,</span> <span class="elocal">w</span><span class="esymbol">,</span> <span class="elocal">h</span><span class="esymbol">,</span> <span class="elocal">window_flags</span><span class="edot">.</span><a class="efeature" href="../../base/integer_32_ref.html#f_to_natural_32">to_natural_32</a><span class="esymbol">)</span>
				<span class="ekeyword">if</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_screen">screen</a> <span class="esymbol">=</span> <span class="ekeyword">Void</span> <span class="ekeyword">then</span>
					<span class="esymbol">{</span><a class="eclass" href="../../brie_doom/i_main.html">I_MAIN</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/i_main.html#f_i_error">i_error</a> <span class="esymbol">(</span>&quot;Error creating window for video startup&quot; <a class="esymbol" href="../../base/string_8.html#f_plus">+</a> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_error.html">SDL_ERROR</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_error.html#f_sdl_get_error">sdl_get_error</a><span class="esymbol">)</span>
				<span class="ekeyword">end</span>
				<span class="ekeyword">check</span>
						<span class="ekeyword">attached</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_screen">screen</a> <span class="ekeyword">as</span> s
				<span class="ekeyword">then</span>
					<a class="efeature" href="../../brie_doom/render/i_video.html#f_pixel_format">pixel_format</a> <span class="esymbol">:=</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_video.html">SDL_VIDEO</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_video_functions_api.html#f_sdl_get_window_pixel_format">sdl_get_window_pixel_format</a> <span class="esymbol">(</span><span class="elocal">s</span><span class="esymbol">)</span>
				<span class="ekeyword">end</span>
			<span class="ekeyword">end</span>
			<span class="elocal">renderer_flags</span> <span class="esymbol">:=</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_renderer_flags_enum_api.html">SDL_RENDERER_FLAGS_ENUM_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_renderer_flags_enum_api.html#f_sdl_renderer_targettexture">sdl_renderer_targettexture</a>
			<span class="ekeyword">if</span> <span class="ekeyword">attached</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_renderer">renderer</a> <span class="ekeyword">as</span> r <span class="ekeyword">then</span>
				<span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_render_functions_api.html">SDL_RENDER_FUNCTIONS_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_render_functions_api.html#f_sdl_destroy_renderer">sdl_destroy_renderer</a> <span class="esymbol">(</span><span class="elocal">r</span><span class="esymbol">)</span>
				<a class="efeature" href="../../brie_doom/render/i_video.html#f_texture">texture</a> <span class="esymbol">:=</span> <span class="ekeyword">Void</span>
				<a class="efeature" href="../../brie_doom/render/i_video.html#f_texture_upscaled">texture_upscaled</a> <span class="esymbol">:=</span> <span class="ekeyword">Void</span>
			<span class="ekeyword">end</span>
			<span class="ekeyword">check</span>
					<span class="ekeyword">attached</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_screen">screen</a> <span class="ekeyword">as</span> s
			<span class="ekeyword">then</span>
				<a class="efeature" href="../../brie_doom/render/i_video.html#f_renderer">renderer</a> <span class="esymbol">:=</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_render_functions_api.html">SDL_RENDER_FUNCTIONS_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_render_functions_api.html#f_sdl_create_renderer">sdl_create_renderer</a> <span class="esymbol">(</span><span class="elocal">s</span><span class="esymbol">,</span> <span class="enumber">-1</span><span class="esymbol">,</span> <span class="elocal">renderer_flags</span><span class="edot">.</span><a class="efeature" href="../../base/integer_32_ref.html#f_to_natural_32">to_natural_32</a><span class="esymbol">)</span>
			<span class="ekeyword">end</span>
			<span class="ekeyword">if</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_renderer">renderer</a> <span class="esymbol">=</span> <span class="ekeyword">Void</span> <span class="ekeyword">then</span>
				<span class="esymbol">{</span><a class="eclass" href="../../brie_doom/i_main.html">I_MAIN</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/i_main.html#f_i_error">i_error</a> <span class="esymbol">(</span>&quot;Error creating renderer for screen window &quot; <a class="esymbol" href="../../base/string_8.html#f_plus">+</a> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_error.html">SDL_ERROR</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_error.html#f_sdl_get_error">sdl_get_error</a><span class="esymbol">)</span>
			<span class="ekeyword">end</span>
			<span class="ekeyword">check</span>
					<span class="ekeyword">attached</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_renderer">renderer</a> <span class="ekeyword">as</span> r
			<span class="ekeyword">then</span>
				<span class="ekeyword">if</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_aspect_ratio_correct">aspect_ratio_correct</a> <a class="ekeyword" href="../../base/boolean.html#f_disjuncted">or</a> <a class="efeature" href="../../brie_doom/render/i_video.html#f_integer_scaling">integer_scaling</a> <span class="ekeyword">then</span>
					<span class="ekeyword">if</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_render_functions_api.html">SDL_RENDER_FUNCTIONS_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_render_functions_api.html#f_sdl_render_set_logical_size">sdl_render_set_logical_size</a> <span class="esymbol">(</span><span class="elocal">r</span><span class="esymbol">,</span> <span class="esymbol">{</span><a class="eclass" href="../../brie_doom/doomdef_h.html">DOOMDEF_H</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/doomdef_h.html#f_screenwidth">screenwidth</a><span class="esymbol">,</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_actualheight">actualheight</a><span class="esymbol">)</span> <span class="esymbol">/=</span> <span class="enumber">0</span> <span class="ekeyword">then</span>
						<span class="esymbol">{</span><a class="eclass" href="../../brie_doom/i_main.html">I_MAIN</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/i_main.html#f_i_error">i_error</a> <span class="esymbol">(</span>&quot;Error setting logical size &quot; <a class="esymbol" href="../../base/string_8.html#f_plus">+</a> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_error.html">SDL_ERROR</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_error.html#f_sdl_get_error">sdl_get_error</a><span class="esymbol">)</span>
					<span class="ekeyword">end</span>
				<span class="ekeyword">end</span>
				<span class="ekeyword">if</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_render_functions_api.html">SDL_RENDER_FUNCTIONS_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_render_functions_api.html#f_sdl_render_set_integer_scale">sdl_render_set_integer_scale</a> <span class="esymbol">(</span><span class="elocal">r</span><span class="esymbol">,</span> <span class="ekeyword">if</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_integer_scaling">integer_scaling</a> <span class="ekeyword">then</span>
						<span class="enumber">1</span>
					<span class="ekeyword">else</span>
						<span class="enumber">0</span>
					<span class="ekeyword">end</span><span class="esymbol">)</span> <span class="esymbol">/=</span> <span class="enumber">0</span> <span class="ekeyword">then</span>
					<span class="esymbol">{</span><a class="eclass" href="../../brie_doom/i_main.html">I_MAIN</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/i_main.html#f_i_error">i_error</a> <span class="esymbol">(</span>&quot;Error setting integer scale &quot; <a class="esymbol" href="../../base/string_8.html#f_plus">+</a> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_error.html">SDL_ERROR</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_error.html#f_sdl_get_error">sdl_get_error</a><span class="esymbol">)</span>
				<span class="ekeyword">end</span>
				<span class="ekeyword">if</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_render_functions_api.html">SDL_RENDER_FUNCTIONS_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_render_functions_api.html#f_sdl_set_render_draw_color">sdl_set_render_draw_color</a> <span class="esymbol">(</span><span class="elocal">r</span><span class="esymbol">,</span> <span class="esymbol">(</span><span class="enumber">0</span><span class="esymbol">)</span><span class="edot">.</span><a class="efeature" href="../../base/integer_32.html#f_to_character_8">to_character_8</a><span class="esymbol">,</span> <span class="esymbol">(</span><span class="enumber">0</span><span class="esymbol">)</span><span class="edot">.</span><a class="efeature" href="../../base/integer_32.html#f_to_character_8">to_character_8</a><span class="esymbol">,</span> <span class="esymbol">(</span><span class="enumber">0</span><span class="esymbol">)</span><span class="edot">.</span><a class="efeature" href="../../base/integer_32.html#f_to_character_8">to_character_8</a><span class="esymbol">,</span> <span class="esymbol">(</span><span class="enumber">255</span><span class="esymbol">)</span><span class="edot">.</span><a class="efeature" href="../../base/integer_32.html#f_to_character_8">to_character_8</a><span class="esymbol">)</span> <span class="esymbol">/=</span> <span class="enumber">0</span> <span class="ekeyword">then</span>
					<span class="esymbol">{</span><a class="eclass" href="../../brie_doom/i_main.html">I_MAIN</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/i_main.html#f_i_error">i_error</a> <span class="esymbol">(</span>&quot;Error setting render color &quot; <a class="esymbol" href="../../base/string_8.html#f_plus">+</a> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_error.html">SDL_ERROR</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_error.html#f_sdl_get_error">sdl_get_error</a><span class="esymbol">)</span>
				<span class="ekeyword">end</span>
				<span class="ekeyword">if</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_render_functions_api.html">SDL_RENDER_FUNCTIONS_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_render_functions_api.html#f_sdl_render_clear">sdl_render_clear</a> <span class="esymbol">(</span><span class="elocal">r</span><span class="esymbol">)</span> <span class="esymbol">/=</span> <span class="enumber">0</span> <span class="ekeyword">then</span>
					<span class="esymbol">{</span><a class="eclass" href="../../brie_doom/i_main.html">I_MAIN</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/i_main.html#f_i_error">i_error</a> <span class="esymbol">(</span>&quot;Error render clear &quot; <a class="esymbol" href="../../base/string_8.html#f_plus">+</a> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_error.html">SDL_ERROR</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_error.html#f_sdl_get_error">sdl_get_error</a><span class="esymbol">)</span>
				<span class="ekeyword">end</span>
				<span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_render_functions_api.html">SDL_RENDER_FUNCTIONS_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_render_functions_api.html#f_sdl_render_present">sdl_render_present</a> <span class="esymbol">(</span><span class="elocal">r</span><span class="esymbol">)</span>
			<span class="ekeyword">end</span>
			<span class="ekeyword">if</span> <span class="ekeyword">attached</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_screenbuffer">screenbuffer</a> <span class="ekeyword">as</span> sb <span class="ekeyword">then</span>
				<span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_surface_functions_api.html">SDL_SURFACE_FUNCTIONS_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_surface_functions_api.html#f_sdl_free_surface">sdl_free_surface</a> <span class="esymbol">(</span><span class="elocal">sb</span><span class="esymbol">)</span>
				<a class="efeature" href="../../brie_doom/render/i_video.html#f_screenbuffer">screenbuffer</a> <span class="esymbol">:=</span> <span class="ekeyword">Void</span>
			<span class="ekeyword">end</span>
			<span class="ekeyword">if</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_screenbuffer">screenbuffer</a> <span class="esymbol">=</span> <span class="ekeyword">Void</span> <span class="ekeyword">then</span>
				<span class="ekeyword">create</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_screenbuffer">screenbuffer</a><span class="edot">.</span><a class="efeature" href="../../base/memory_structure.html#f_make_by_pointer">make_by_pointer</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_surface_functions_api.html">SDL_SURFACE_FUNCTIONS_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_surface_functions_api.html#f_sdl_create_rgbsurface">sdl_create_rgbsurface</a> <span class="esymbol">(</span><span class="enumber">0</span><span class="esymbol">,</span> <span class="esymbol">{</span><a class="eclass" href="../../brie_doom/doomdef_h.html">DOOMDEF_H</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/doomdef_h.html#f_screenwidth">screenwidth</a><span class="esymbol">,</span> <span class="esymbol">{</span><a class="eclass" href="../../brie_doom/doomdef_h.html">DOOMDEF_H</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/doomdef_h.html#f_screenheight">screenheight</a><span class="esymbol">,</span> <span class="enumber">8</span><span class="esymbol">,</span> <span class="enumber">0</span><span class="esymbol">,</span> <span class="enumber">0</span><span class="esymbol">,</span> <span class="enumber">0</span><span class="esymbol">,</span> <span class="enumber">0</span><span class="esymbol">)</span><span class="esymbol">)</span>
				<span class="ekeyword">check</span>
						<span class="ekeyword">attached</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_screenbuffer">screenbuffer</a> <span class="ekeyword">as</span> sb
				<span class="ekeyword">then</span>
					<span class="ekeyword">if</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_surface.html">SDL_SURFACE</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_surface.html#f_sdl_fill_rect">sdl_fill_rect</a> <span class="esymbol">(</span><span class="elocal">sb</span><span class="esymbol">,</span> <span class="ekeyword">Void</span><span class="esymbol">,</span> <span class="enumber">0</span><span class="esymbol">)</span> <a class="esymbol" href="../../base/integer_32.html#f_is_less">&lt;</a> <span class="enumber">0</span> <span class="ekeyword">then</span>
						<a class="efeature" href="../../brie_doom/render/i_video.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../../brie_doom/i_main.html#f_i_error">i_error</a><span class="esymbol"> </span><span class="esymbol">(</span>&quot;Error SDL_FillRect&quot; <a class="esymbol" href="../../base/string_8.html#f_plus">+</a> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_error.html">SDL_ERROR</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_error.html#f_sdl_get_error">sdl_get_error</a><span class="esymbol">)</span>
					<span class="ekeyword">end</span>
				<span class="ekeyword">end</span>
			<span class="ekeyword">end</span>
			<span class="ekeyword">if</span> <span class="ekeyword">attached</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_argbbuffer">argbbuffer</a> <span class="ekeyword">as</span> abb <span class="ekeyword">then</span>
				<span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_surface_functions_api.html">SDL_SURFACE_FUNCTIONS_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_surface_functions_api.html#f_sdl_free_surface">sdl_free_surface</a> <span class="esymbol">(</span><span class="elocal">abb</span><span class="esymbol">)</span>
				<a class="efeature" href="../../brie_doom/render/i_video.html#f_argbbuffer">argbbuffer</a> <span class="esymbol">:=</span> <span class="ekeyword">Void</span>
			<span class="ekeyword">end</span>
			<span class="ekeyword">if</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_argbbuffer">argbbuffer</a> <span class="esymbol">=</span> <span class="ekeyword">Void</span> <span class="ekeyword">then</span>
				<span class="ekeyword">if</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_pixels_functions_api.html">SDL_PIXELS_FUNCTIONS_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_pixels_functions_api.html#f_sdl_pixel_format_enum_to_masks">sdl_pixel_format_enum_to_masks</a> <span class="esymbol">(</span><a class="efeature" href="../../brie_doom/render/i_video.html#f_pixel_format">pixel_format</a><span class="esymbol">,</span> <span class="esymbol">$</span><span class="elocal">bpp</span><span class="esymbol">,</span> <span class="esymbol">$</span><span class="elocal">rmask</span><span class="edot">.</span><a class="efeature" href="../../base/pointer_ref.html#f_item">to_pointer</a><span class="esymbol">,</span> <span class="esymbol">$</span><span class="elocal">gmask</span><span class="edot">.</span><a class="efeature" href="../../base/pointer_ref.html#f_item">to_pointer</a><span class="esymbol">,</span> <span class="esymbol">$</span><span class="elocal">bmask</span><span class="edot">.</span><a class="efeature" href="../../base/pointer_ref.html#f_item">to_pointer</a><span class="esymbol">,</span> <span class="esymbol">$</span><span class="elocal">amask</span><span class="edot">.</span><a class="efeature" href="../../base/pointer_ref.html#f_item">to_pointer</a><span class="esymbol">)</span><span class="edot">.</span><a class="efeature" href="../../base/integer_32_ref.html#f_to_integer_64">to_integer_64</a> <span class="esymbol">/=</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_constant_api.html">SDL_CONSTANT_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_constant_api.html#f_sdl_true">sdl_true</a> <span class="ekeyword">then</span>
					<a class="efeature" href="../../brie_doom/render/i_video.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../../brie_doom/i_main.html#f_i_error">i_error</a><span class="esymbol"> </span><span class="esymbol">(</span>&quot;pixel format to masks &quot; <a class="esymbol" href="../../base/string_8.html#f_plus">+</a> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_error.html">SDL_ERROR</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_error.html#f_sdl_get_error">sdl_get_error</a><span class="esymbol">)</span>
				<span class="ekeyword">end</span>
				<span class="elocal">p</span> <span class="esymbol">:=</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_surface_functions_api.html">SDL_SURFACE_FUNCTIONS_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_surface_functions_api.html#f_sdl_create_rgbsurface">sdl_create_rgbsurface</a> <span class="esymbol">(</span><span class="enumber">0</span><span class="esymbol">,</span> <span class="esymbol">{</span><a class="eclass" href="../../brie_doom/doomdef_h.html">DOOMDEF_H</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/doomdef_h.html#f_screenwidth">screenwidth</a><span class="esymbol">,</span> <span class="esymbol">{</span><a class="eclass" href="../../brie_doom/doomdef_h.html">DOOMDEF_H</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/doomdef_h.html#f_screenheight">screenheight</a><span class="esymbol">,</span> <span class="elocal">bpp</span><span class="esymbol">,</span> <span class="elocal">rmask</span><span class="esymbol">,</span> <span class="elocal">gmask</span><span class="esymbol">,</span> <span class="elocal">bmask</span><span class="esymbol">,</span> <span class="elocal">amask</span><span class="esymbol">)</span>
				<span class="ekeyword">if</span> <span class="elocal">p</span><span class="edot">.</span><a class="efeature" href="../../base/pointer.html#f_is_default_pointer">is_default_pointer</a> <span class="ekeyword">then</span>
					<a class="efeature" href="../../brie_doom/render/i_video.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../../brie_doom/i_main.html#f_i_error">i_error</a><span class="esymbol"> </span><span class="esymbol">(</span>&quot;SDL_CreateRGBSurface failed&quot; <a class="esymbol" href="../../base/string_8.html#f_plus">+</a> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_error.html">SDL_ERROR</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_error.html#f_sdl_get_error">sdl_get_error</a><span class="esymbol">)</span>
				<span class="ekeyword">else</span>
					<span class="ekeyword">create</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_argbbuffer">argbbuffer</a><span class="edot">.</span><a class="efeature" href="../../base/memory_structure.html#f_make_by_pointer">make_by_pointer</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">p</span><span class="esymbol">)</span>
				<span class="ekeyword">end</span>
				<span class="ekeyword">check</span>
						<span class="ekeyword">attached</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_argbbuffer">argbbuffer</a> <span class="ekeyword">as</span> abb
				<span class="ekeyword">then</span>
					<span class="ekeyword">if</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_surface.html">SDL_SURFACE</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_surface.html#f_sdl_fill_rect">sdl_fill_rect</a> <span class="esymbol">(</span><span class="elocal">abb</span><span class="esymbol">,</span> <span class="ekeyword">Void</span><span class="esymbol">,</span> <span class="enumber">0</span><span class="esymbol">)</span> <a class="esymbol" href="../../base/integer_32.html#f_is_less">&lt;</a> <span class="enumber">0</span> <span class="ekeyword">then</span>
						<a class="efeature" href="../../brie_doom/render/i_video.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../../brie_doom/i_main.html#f_i_error">i_error</a><span class="esymbol"> </span><span class="esymbol">(</span>&quot;Error SDL_FillRect&quot; <a class="esymbol" href="../../base/string_8.html#f_plus">+</a> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_error.html">SDL_ERROR</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_error.html#f_sdl_get_error">sdl_get_error</a><span class="esymbol">)</span>
					<span class="ekeyword">end</span>
				<span class="ekeyword">end</span>
			<span class="ekeyword">end</span>
			<span class="ekeyword">if</span> <span class="ekeyword">attached</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_texture">texture</a> <span class="ekeyword">as</span> t <span class="ekeyword">then</span>
				<span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_render_functions_api.html">SDL_RENDER_FUNCTIONS_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_render_functions_api.html#f_sdl_destroy_texture">sdl_destroy_texture</a> <span class="esymbol">(</span><span class="elocal">t</span><span class="esymbol">)</span>
			<span class="ekeyword">end</span>
			<span class="ekeyword">if</span> <a class="ekeyword" href="../../base/boolean.html#f_negated">not</a> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_hints.html">SDL_HINTS</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_hints.html#f_sdl_set_hint">sdl_set_hint</a> <span class="esymbol">(</span><span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_constant_api.html">SDL_CONSTANT_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_constant_api.html#f_sdl_hint_render_scale_quality">sdl_hint_render_scale_quality</a><span class="esymbol">,</span> &quot;nearest&quot;<span class="esymbol">)</span> <span class="ekeyword">then</span>
				<span class="esymbol">{</span><a class="eclass" href="../../brie_doom/i_main.html">I_MAIN</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/i_main.html#f_i_error">i_error</a> <span class="esymbol">(</span>&quot;Error setting hint &quot; <a class="esymbol" href="../../base/string_8.html#f_plus">+</a> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_error.html">SDL_ERROR</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_error.html#f_sdl_get_error">sdl_get_error</a><span class="esymbol">)</span>
			<span class="ekeyword">end</span>
			<span class="ekeyword">check</span>
					<span class="ekeyword">attached</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_renderer">renderer</a> <span class="ekeyword">as</span> r
			<span class="ekeyword">then</span>
				<a class="efeature" href="../../brie_doom/render/i_video.html#f_texture">texture</a> <span class="esymbol">:=</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_render.html">SDL_RENDER</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_render_functions_api.html#f_sdl_create_texture">sdl_create_texture</a> <span class="esymbol">(</span><span class="elocal">r</span><span class="esymbol">,</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_pixel_format">pixel_format</a><span class="esymbol">,</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_texture_access_enum_api.html">SDL_TEXTURE_ACCESS_ENUM_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_texture_access_enum_api.html#f_sdl_textureaccess_streaming">sdl_textureaccess_streaming</a><span class="esymbol">,</span> <span class="esymbol">{</span><a class="eclass" href="../../brie_doom/doomdef_h.html">DOOMDEF_H</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/doomdef_h.html#f_screenwidth">screenwidth</a><span class="esymbol">,</span> <span class="esymbol">{</span><a class="eclass" href="../../brie_doom/doomdef_h.html">DOOMDEF_H</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/doomdef_h.html#f_screenheight">screenheight</a><span class="esymbol">)</span>
			<span class="ekeyword">end</span>
			<a class="efeature" href="../../brie_doom/render/i_video.html#f_create_upscaled_texture">create_upscaled_texture</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="ekeyword">True</span><span class="esymbol">)</span>
		<span class="ekeyword">end</span>
	
<span class="ekeyword">feature</span> <span class="ecomment">--</span><span class="ecomment"> CreateUpscaledTexture</span>

	<a name="f_h_upscale_old"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_h_upscale_old">h_upscale_old</a><span class="esymbol">:</span> <a class="eclass" href="../../base/integer_32.html">INTEGER_32</a>

	<a name="f_w_upscale_old"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_w_upscale_old">w_upscale_old</a><span class="esymbol">:</span> <a class="eclass" href="../../base/integer_32.html">INTEGER_32</a>

	<a name="f_create_upscaled_texture"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_create_upscaled_texture">create_upscaled_texture</a> <span class="esymbol">(</span><span class="elocal">force</span><span class="esymbol">:</span> <a class="eclass" href="../../base/boolean.html">BOOLEAN</a><span class="esymbol">)</span>
		<span class="ekeyword">local</span>
			<span class="elocal">w</span><span class="esymbol">,</span> <span class="elocal">h</span><span class="esymbol">:</span> <a class="eclass" href="../../base/integer_32.html">INTEGER_32</a>
			<span class="elocal">h_upscale</span><span class="esymbol">,</span> <span class="elocal">w_upscale</span><span class="esymbol">:</span> <a class="eclass" href="../../base/integer_32.html">INTEGER_32</a>
			<span class="elocal">new_texture</span><span class="esymbol">,</span> <span class="elocal">old_texture</span><span class="esymbol">:</span> <a class="eclass" href="../../wrap_sdl2/sdl_texture_struct_api.html">SDL_TEXTURE_STRUCT_API</a>
			<span class="elocal">b</span><span class="esymbol">:</span> <a class="eclass" href="../../base/boolean.html">BOOLEAN</a>
		<span class="ekeyword">do</span>
			<span class="ekeyword">check</span>
					<span class="ekeyword">attached</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_renderer">renderer</a> <span class="ekeyword">as</span> r
			<span class="ekeyword">then</span>
				<span class="ekeyword">if</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_render_functions_api.html">SDL_RENDER_FUNCTIONS_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_render_functions_api.html#f_sdl_get_renderer_output_size">sdl_get_renderer_output_size</a> <span class="esymbol">(</span><span class="elocal">r</span><span class="esymbol">,</span> <span class="esymbol">$</span><span class="elocal">w</span><span class="esymbol">,</span> <span class="esymbol">$</span><span class="elocal">h</span><span class="esymbol">)</span> <span class="esymbol">/=</span> <span class="enumber">0</span> <span class="ekeyword">then</span>
					<span class="esymbol">{</span><a class="eclass" href="../../brie_doom/i_main.html">I_MAIN</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/i_main.html#f_i_error">i_error</a> <span class="esymbol">(</span>&quot;Failed to get renderer output size &quot; <a class="esymbol" href="../../base/string_8.html#f_plus">+</a> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_error.html">SDL_ERROR</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_error.html#f_sdl_get_error">sdl_get_error</a><span class="esymbol">)</span>
				<span class="ekeyword">end</span>
			<span class="ekeyword">end</span>
			<span class="ekeyword">if</span> <span class="elocal">w</span> <a class="esymbol" href="../../base/integer_32.html#f_product">*</a> <a class="efeature" href="../../brie_doom/render/i_video.html#f_actualheight">actualheight</a> <a class="esymbol" href="../../base/integer_32.html#f_is_less">&lt;</a> <span class="elocal">h</span> <a class="esymbol" href="../../base/integer_32.html#f_product">*</a> <span class="esymbol">{</span><a class="eclass" href="../../brie_doom/doomdef_h.html">DOOMDEF_H</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/doomdef_h.html#f_screenwidth">screenwidth</a> <span class="ekeyword">then</span>
				<span class="elocal">h</span> <span class="esymbol">:=</span> <span class="elocal">w</span> <a class="esymbol" href="../../base/integer_32.html#f_product">*</a> <a class="efeature" href="../../brie_doom/render/i_video.html#f_actualheight">actualheight</a> <a class="esymbol" href="../../base/integer_32.html#f_integer_quotient">//</a> <span class="esymbol">{</span><a class="eclass" href="../../brie_doom/doomdef_h.html">DOOMDEF_H</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/doomdef_h.html#f_screenwidth">screenwidth</a>
			<span class="ekeyword">else</span>
				<span class="elocal">w</span> <span class="esymbol">:=</span> <span class="elocal">h</span> <a class="esymbol" href="../../base/integer_32.html#f_product">*</a> <span class="esymbol">{</span><a class="eclass" href="../../brie_doom/doomdef_h.html">DOOMDEF_H</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/doomdef_h.html#f_screenwidth">screenwidth</a> <a class="esymbol" href="../../base/integer_32.html#f_integer_quotient">//</a> <a class="efeature" href="../../brie_doom/render/i_video.html#f_actualheight">actualheight</a>
			<span class="ekeyword">end</span>
			<span class="elocal">w_upscale</span> <span class="esymbol">:=</span> <span class="esymbol">(</span><span class="elocal">w</span> <a class="esymbol" href="../../base/integer_32.html#f_plus">+</a> <span class="esymbol">{</span><a class="eclass" href="../../brie_doom/doomdef_h.html">DOOMDEF_H</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/doomdef_h.html#f_screenwidth">screenwidth</a> <a class="esymbol" href="../../base/integer_32.html#f_minus">-</a> <span class="enumber">1</span><span class="esymbol">)</span> <a class="esymbol" href="../../base/integer_32.html#f_integer_quotient">//</a> <span class="esymbol">{</span><a class="eclass" href="../../brie_doom/doomdef_h.html">DOOMDEF_H</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/doomdef_h.html#f_screenwidth">screenwidth</a>
			<span class="elocal">h_upscale</span> <span class="esymbol">:=</span> <span class="esymbol">(</span><span class="elocal">h</span> <a class="esymbol" href="../../base/integer_32.html#f_plus">+</a> <span class="esymbol">{</span><a class="eclass" href="../../brie_doom/doomdef_h.html">DOOMDEF_H</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/doomdef_h.html#f_screenheight">screenheight</a> <a class="esymbol" href="../../base/integer_32.html#f_minus">-</a> <span class="enumber">1</span><span class="esymbol">)</span> <a class="esymbol" href="../../base/integer_32.html#f_integer_quotient">//</a> <span class="esymbol">{</span><a class="eclass" href="../../brie_doom/doomdef_h.html">DOOMDEF_H</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/doomdef_h.html#f_screenheight">screenheight</a>
			<span class="ekeyword">if</span> <span class="elocal">w_upscale</span> <a class="esymbol" href="../../base/integer_32.html#f_is_less">&lt;</a> <span class="enumber">1</span> <span class="ekeyword">then</span>
				<span class="elocal">w_upscale</span> <span class="esymbol">:=</span> <span class="enumber">1</span>
			<span class="ekeyword">end</span>
			<span class="ekeyword">if</span> <span class="elocal">h_upscale</span> <a class="esymbol" href="../../base/integer_32.html#f_is_less">&lt;</a> <span class="enumber">1</span> <span class="ekeyword">then</span>
				<span class="elocal">h_upscale</span> <span class="esymbol">:=</span> <span class="enumber">1</span>
			<span class="ekeyword">end</span>
			<a class="efeature" href="../../brie_doom/render/i_video.html#f_limit_texture_size">limit_texture_size</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="esymbol">$</span><span class="elocal">w_upscale</span><span class="esymbol">,</span> <span class="esymbol">$</span><span class="elocal">h_upscale</span><span class="esymbol">)</span>
			<span class="ekeyword">if</span> <span class="esymbol">(</span><span class="elocal">h_upscale</span> <span class="esymbol">=</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_h_upscale_old">h_upscale_old</a> <a class="ekeyword" href="../../base/boolean.html#f_conjuncted">and</a> <span class="elocal">w_upscale</span> <span class="esymbol">=</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_w_upscale_old">w_upscale_old</a> <a class="ekeyword" href="../../base/boolean.html#f_conjuncted">and</a> <a class="ekeyword" href="../../base/boolean.html#f_negated">not</a> <span class="elocal">force</span><span class="esymbol">)</span> <span class="ekeyword">then</span>
			<span class="ekeyword">else</span>
				<a class="efeature" href="../../brie_doom/render/i_video.html#f_h_upscale_old">h_upscale_old</a> <span class="esymbol">:=</span> <span class="elocal">h_upscale</span>
				<a class="efeature" href="../../brie_doom/render/i_video.html#f_w_upscale_old">w_upscale_old</a> <span class="esymbol">:=</span> <span class="elocal">w_upscale</span>
				<span class="elocal">b</span> <span class="esymbol">:=</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_hints.html">SDL_HINTS</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_hints.html#f_sdl_set_hint">sdl_set_hint</a> <span class="esymbol">(</span><span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_constant_api.html">SDL_CONSTANT_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_constant_api.html#f_sdl_hint_render_scale_quality">sdl_hint_render_scale_quality</a><span class="esymbol">,</span> &quot;linear&quot;<span class="esymbol">)</span>
				<span class="ekeyword">check</span>
						<span class="ekeyword">attached</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_renderer">renderer</a> <span class="ekeyword">as</span> r
				<span class="ekeyword">then</span>
					<span class="elocal">new_texture</span> <span class="esymbol">:=</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_render_functions_api.html">SDL_RENDER_FUNCTIONS_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_render_functions_api.html#f_sdl_create_texture">sdl_create_texture</a> <span class="esymbol">(</span><span class="elocal">r</span><span class="esymbol">,</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_pixel_format">pixel_format</a><span class="esymbol">,</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_texture_access_enum_api.html">SDL_TEXTURE_ACCESS_ENUM_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_texture_access_enum_api.html#f_sdl_textureaccess_target">sdl_textureaccess_target</a><span class="esymbol">,</span> <span class="elocal">w_upscale</span> <a class="esymbol" href="../../base/integer_32.html#f_product">*</a> <span class="esymbol">{</span><a class="eclass" href="../../brie_doom/doomdef_h.html">DOOMDEF_H</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/doomdef_h.html#f_screenwidth">screenwidth</a><span class="esymbol">,</span> <span class="elocal">h_upscale</span> <a class="esymbol" href="../../base/integer_32.html#f_product">*</a> <span class="esymbol">{</span><a class="eclass" href="../../brie_doom/doomdef_h.html">DOOMDEF_H</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/doomdef_h.html#f_screenheight">screenheight</a><span class="esymbol">)</span>
					<span class="elocal">old_texture</span> <span class="esymbol">:=</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_texture_upscaled">texture_upscaled</a>
					<a class="efeature" href="../../brie_doom/render/i_video.html#f_texture_upscaled">texture_upscaled</a> <span class="esymbol">:=</span> <span class="elocal">new_texture</span>
					<span class="ekeyword">if</span> <span class="ekeyword">attached</span> <span class="elocal">old_texture</span> <span class="ekeyword">as</span> ot <span class="ekeyword">then</span>
						<span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_render_functions_api.html">SDL_RENDER_FUNCTIONS_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_render_functions_api.html#f_sdl_destroy_texture">sdl_destroy_texture</a> <span class="esymbol">(</span><span class="elocal">ot</span><span class="esymbol">)</span>
					<span class="ekeyword">end</span>
				<span class="ekeyword">end</span>
			<span class="ekeyword">end</span>
		<span class="ekeyword">end</span>

	<a name="f_limit_texture_size"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_limit_texture_size">limit_texture_size</a> <span class="esymbol">(</span><span class="elocal">w_upscale</span><span class="esymbol">,</span> <span class="elocal">h_upscale</span><span class="esymbol">:</span> <a class="eclass" href="../../base/typed_pointer.html">TYPED_POINTER</a> <span class="esymbol">[</span><a class="eclass" href="../../base/integer_32.html">INTEGER_32</a><span class="esymbol">]</span><span class="esymbol">)</span>
		<span class="ekeyword">local</span>
			<span class="elocal">rinfo</span><span class="esymbol">:</span> <a class="eclass" href="../../wrap_sdl2/sdl_renderer_info_struct_api.html">SDL_RENDERER_INFO_STRUCT_API</a>
			<span class="elocal">orig_w</span><span class="esymbol">,</span> <span class="elocal">orig_h</span><span class="esymbol">:</span> <a class="eclass" href="../../base/integer_32.html">INTEGER_32</a>
			<span class="elocal">mp_w</span><span class="esymbol">,</span> <span class="elocal">mp_h</span><span class="esymbol">:</span> <a class="eclass" href="../../base/managed_pointer.html">MANAGED_POINTER</a>
		<span class="ekeyword">do</span>
			<span class="ekeyword">create</span> <span class="elocal">rinfo</span><span class="edot">.</span><a class="efeature" href="../../base/memory_structure.html#f_make">make</a>
			<span class="ekeyword">create</span> <span class="elocal">mp_w</span><span class="edot">.</span><a class="efeature" href="../../base/managed_pointer.html#f_share_from_pointer">share_from_pointer</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">w_upscale</span><span class="edot">.</span><a class="efeature" href="../../base/pointer_ref.html#f_item">to_pointer</a><span class="esymbol">,</span> <span class="esymbol">{</span><a class="eclass" href="../../base/platform.html">PLATFORM</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../base/platform.html#f_integer_32_bytes">integer_32_bytes</a><span class="esymbol">)</span>
			<span class="elocal">orig_w</span> <span class="esymbol">:=</span> <span class="elocal">mp_w</span><span class="edot">.</span><a class="efeature" href="../../base/managed_pointer.html#f_read_integer_32">read_integer_32</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="enumber">0</span><span class="esymbol">)</span>
			<span class="ekeyword">create</span> <span class="elocal">mp_h</span><span class="edot">.</span><a class="efeature" href="../../base/managed_pointer.html#f_share_from_pointer">share_from_pointer</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">h_upscale</span><span class="edot">.</span><a class="efeature" href="../../base/pointer_ref.html#f_item">to_pointer</a><span class="esymbol">,</span> <span class="esymbol">{</span><a class="eclass" href="../../base/platform.html">PLATFORM</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../base/platform.html#f_integer_32_bytes">integer_32_bytes</a><span class="esymbol">)</span>
			<span class="elocal">orig_h</span> <span class="esymbol">:=</span> <span class="elocal">mp_h</span><span class="edot">.</span><a class="efeature" href="../../base/managed_pointer.html#f_read_integer_32">read_integer_32</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="enumber">0</span><span class="esymbol">)</span>
			<span class="ekeyword">check</span>
					<span class="ekeyword">attached</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_renderer">renderer</a> <span class="ekeyword">as</span> r
			<span class="ekeyword">then</span>
				<span class="ekeyword">if</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_render_functions_api.html">SDL_RENDER_FUNCTIONS_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_render_functions_api.html#f_sdl_get_renderer_info">sdl_get_renderer_info</a> <span class="esymbol">(</span><span class="elocal">r</span><span class="esymbol">,</span> <span class="elocal">rinfo</span><span class="esymbol">)</span> <span class="esymbol">/=</span> <span class="enumber">0</span> <span class="ekeyword">then</span>
					<span class="esymbol">{</span><a class="eclass" href="../../brie_doom/i_main.html">I_MAIN</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/i_main.html#f_i_error">i_error</a> <span class="esymbol">(</span>&quot;CreateUpscaledTexture: SDL_GetRendererInfo() call failed &quot; <a class="esymbol" href="../../base/string_8.html#f_plus">+</a> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_error.html">SDL_ERROR</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_error.html#f_sdl_get_error">sdl_get_error</a><span class="esymbol">)</span>
				<span class="ekeyword">end</span>
			<span class="ekeyword">end</span>
			<span class="ekeyword">from</span>
			<span class="ekeyword">until</span>
				<span class="elocal">mp_w</span><span class="edot">.</span><a class="efeature" href="../../base/managed_pointer.html#f_read_integer_32">read_integer_32</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="enumber">0</span><span class="esymbol">)</span> <a class="esymbol" href="../../base/integer_32.html#f_product">*</a> <span class="esymbol">{</span><a class="eclass" href="../../brie_doom/doomdef_h.html">DOOMDEF_H</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/doomdef_h.html#f_screenwidth">screenwidth</a> <a class="esymbol" href="../../base/comparable.html#f_is_less_equal">&lt;=</a> <span class="elocal">rinfo</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_renderer_info_struct_api.html#f_max_texture_width">max_texture_width</a>
			<span class="ekeyword">loop</span>
				<span class="elocal">mp_w</span><span class="edot">.</span><a class="efeature" href="../../base/managed_pointer.html#f_put_integer_32">put_integer_32</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">mp_w</span><span class="edot">.</span><a class="efeature" href="../../base/managed_pointer.html#f_read_integer_32">read_integer_32</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="enumber">0</span><span class="esymbol">)</span> <a class="esymbol" href="../../base/integer_32.html#f_minus">-</a> <span class="enumber">1</span><span class="esymbol">,</span> <span class="enumber">0</span><span class="esymbol">)</span>
			<span class="ekeyword">end</span>
			<span class="ekeyword">from</span>
			<span class="ekeyword">until</span>
				<span class="elocal">mp_h</span><span class="edot">.</span><a class="efeature" href="../../base/managed_pointer.html#f_read_integer_32">read_integer_32</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="enumber">0</span><span class="esymbol">)</span> <a class="esymbol" href="../../base/integer_32.html#f_product">*</a> <span class="esymbol">{</span><a class="eclass" href="../../brie_doom/doomdef_h.html">DOOMDEF_H</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/doomdef_h.html#f_screenheight">screenheight</a> <a class="esymbol" href="../../base/comparable.html#f_is_less_equal">&lt;=</a> <span class="elocal">rinfo</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_renderer_info_struct_api.html#f_max_texture_height">max_texture_height</a>
			<span class="ekeyword">loop</span>
				<span class="elocal">mp_h</span><span class="edot">.</span><a class="efeature" href="../../base/managed_pointer.html#f_put_integer_32">put_integer_32</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">mp_h</span><span class="edot">.</span><a class="efeature" href="../../base/managed_pointer.html#f_read_integer_32">read_integer_32</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="enumber">0</span><span class="esymbol">)</span> <a class="esymbol" href="../../base/integer_32.html#f_minus">-</a> <span class="enumber">1</span><span class="esymbol">,</span> <span class="enumber">0</span><span class="esymbol">)</span>
			<span class="ekeyword">end</span>
			<span class="ekeyword">if</span> <span class="esymbol">(</span><span class="elocal">mp_w</span><span class="edot">.</span><a class="efeature" href="../../base/managed_pointer.html#f_read_integer_32">read_integer_32</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="enumber">0</span><span class="esymbol">)</span> <a class="esymbol" href="../../base/integer_32.html#f_is_less">&lt;</a> <span class="enumber">1</span> <a class="ekeyword" href="../../base/boolean.html#f_conjuncted">and</a> <span class="elocal">rinfo</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_renderer_info_struct_api.html#f_max_texture_width">max_texture_width</a> <a class="esymbol" href="../../base/comparable.html#f_is_greater">&gt;</a> <span class="enumber">0</span><span class="esymbol">)</span> <a class="ekeyword" href="../../base/boolean.html#f_disjuncted">or</a> <span class="esymbol">(</span><span class="elocal">mp_h</span><span class="edot">.</span><a class="efeature" href="../../base/managed_pointer.html#f_read_integer_32">read_integer_32</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="enumber">0</span><span class="esymbol">)</span> <a class="esymbol" href="../../base/integer_32.html#f_is_less">&lt;</a> <span class="enumber">1</span> <a class="ekeyword" href="../../base/boolean.html#f_conjuncted">and</a> <span class="elocal">rinfo</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_renderer_info_struct_api.html#f_max_texture_height">max_texture_height</a> <a class="esymbol" href="../../base/comparable.html#f_is_greater">&gt;</a> <span class="enumber">0</span><span class="esymbol">)</span> <span class="ekeyword">then</span>
				<span class="esymbol">{</span><a class="eclass" href="../../brie_doom/i_main.html">I_MAIN</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/i_main.html#f_i_error">i_error</a> <span class="esymbol">(</span>&quot;[
						CreateUpscaledTexture: Can't create a texture big enough for
						the whole screen! Maximum texture size
					]<span class="estring">&quot;</span> <a class="esymbol" href="../../base/string_8.html#f_plus">+</a> <span class="elocal">rinfo</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_renderer_info_struct_api.html#f_max_texture_width">max_texture_width</a><span class="edot">.</span><a class="efeature" href="../../base/integer_32_ref.html#f_out">out</a> <a class="esymbol" href="../../base/string_8.html#f_plus">+</a> &quot;x&quot; <a class="esymbol" href="../../base/string_8.html#f_plus">+</a> <span class="elocal">rinfo</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_renderer_info_struct_api.html#f_max_texture_height">max_texture_height</a><span class="edot">.</span><a class="efeature" href="../../base/integer_32_ref.html#f_out">out</a><span class="esymbol">)</span>
			<span class="ekeyword">end</span>
			<span class="ekeyword">if</span> <span class="esymbol">(</span><a class="efeature" href="../../brie_doom/render/i_video.html#f_max_scaling_buffer_pixels">Max_scaling_buffer_pixels</a> <a class="esymbol" href="../../base/integer_32.html#f_is_less">&lt;</a> <span class="esymbol">{</span><a class="eclass" href="../../brie_doom/doomdef_h.html">DOOMDEF_H</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/doomdef_h.html#f_screenwidth">screenwidth</a> <a class="esymbol" href="../../base/integer_32.html#f_product">*</a> <span class="esymbol">{</span><a class="eclass" href="../../brie_doom/doomdef_h.html">DOOMDEF_H</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/doomdef_h.html#f_screenheight">screenheight</a><span class="esymbol">)</span> <span class="ekeyword">then</span>
				<span class="esymbol">{</span><a class="eclass" href="../../brie_doom/i_main.html">I_MAIN</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/i_main.html#f_i_error">i_error</a> <span class="esymbol">(</span>&quot;[
						CreateUpscaledTexture: max_scaling_buffer_pixels too small
						        to create a texture buffer:
					]<span class="estring">&quot;</span> <a class="esymbol" href="../../base/string_8.html#f_plus">+</a> <a class="efeature" href="../../brie_doom/render/i_video.html#f_max_scaling_buffer_pixels">Max_scaling_buffer_pixels</a><span class="edot">.</span><a class="efeature" href="../../base/integer_32_ref.html#f_out">out</a> <a class="esymbol" href="../../base/string_8.html#f_plus">+</a> &quot; &lt; &quot; <a class="esymbol" href="../../base/string_8.html#f_plus">+</a> <span class="esymbol">(</span><span class="esymbol">{</span><a class="eclass" href="../../brie_doom/doomdef_h.html">DOOMDEF_H</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/doomdef_h.html#f_screenwidth">screenwidth</a> <a class="esymbol" href="../../base/integer_32.html#f_product">*</a> <span class="esymbol">{</span><a class="eclass" href="../../brie_doom/doomdef_h.html">DOOMDEF_H</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/doomdef_h.html#f_screenheight">screenheight</a><span class="esymbol">)</span><span class="edot">.</span><a class="efeature" href="../../base/integer_32_ref.html#f_out">out</a><span class="esymbol">)</span>
			<span class="ekeyword">end</span>
			<span class="ekeyword">from</span>
			<span class="ekeyword">until</span>
				<span class="esymbol">(</span><span class="elocal">mp_w</span><span class="edot">.</span><a class="efeature" href="../../base/managed_pointer.html#f_read_integer_32">read_integer_32</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="enumber">0</span><span class="esymbol">)</span> <a class="esymbol" href="../../base/integer_32.html#f_product">*</a> <span class="elocal">mp_h</span><span class="edot">.</span><a class="efeature" href="../../base/managed_pointer.html#f_read_integer_32">read_integer_32</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="enumber">0</span><span class="esymbol">)</span> <a class="esymbol" href="../../base/integer_32.html#f_product">*</a> <span class="esymbol">{</span><a class="eclass" href="../../brie_doom/doomdef_h.html">DOOMDEF_H</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/doomdef_h.html#f_screenwidth">screenwidth</a> <a class="esymbol" href="../../base/integer_32.html#f_product">*</a> <span class="esymbol">{</span><a class="eclass" href="../../brie_doom/doomdef_h.html">DOOMDEF_H</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/doomdef_h.html#f_screenheight">screenheight</a><span class="esymbol">)</span> <a class="esymbol" href="../../base/comparable.html#f_is_less_equal">&lt;=</a> <a class="efeature" href="../../brie_doom/render/i_video.html#f_max_scaling_buffer_pixels">Max_scaling_buffer_pixels</a>
			<span class="ekeyword">loop</span>
				<span class="ekeyword">if</span> <span class="elocal">mp_w</span><span class="edot">.</span><a class="efeature" href="../../base/managed_pointer.html#f_read_integer_32">read_integer_32</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="enumber">0</span><span class="esymbol">)</span> <a class="esymbol" href="../../base/comparable.html#f_is_greater">&gt;</a> <span class="elocal">mp_h</span><span class="edot">.</span><a class="efeature" href="../../base/managed_pointer.html#f_read_integer_32">read_integer_32</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="enumber">0</span><span class="esymbol">)</span> <span class="ekeyword">then</span>
					<span class="elocal">mp_w</span><span class="edot">.</span><a class="efeature" href="../../base/managed_pointer.html#f_put_integer_32">put_integer_32</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">mp_w</span><span class="edot">.</span><a class="efeature" href="../../base/managed_pointer.html#f_read_integer_32">read_integer_32</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="enumber">0</span><span class="esymbol">)</span> <a class="esymbol" href="../../base/integer_32.html#f_minus">-</a> <span class="enumber">1</span><span class="esymbol">,</span> <span class="enumber">0</span><span class="esymbol">)</span>
				<span class="ekeyword">else</span>
					<span class="elocal">mp_h</span><span class="edot">.</span><a class="efeature" href="../../base/managed_pointer.html#f_put_integer_32">put_integer_32</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">mp_h</span><span class="edot">.</span><a class="efeature" href="../../base/managed_pointer.html#f_read_integer_32">read_integer_32</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="enumber">0</span><span class="esymbol">)</span> <a class="esymbol" href="../../base/integer_32.html#f_minus">-</a> <span class="enumber">1</span><span class="esymbol">,</span> <span class="enumber">0</span><span class="esymbol">)</span>
				<span class="ekeyword">end</span>
			<span class="ekeyword">end</span>
			<span class="ekeyword">if</span> <span class="elocal">mp_w</span><span class="edot">.</span><a class="efeature" href="../../base/managed_pointer.html#f_read_integer_32">read_integer_32</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="enumber">0</span><span class="esymbol">)</span> <span class="esymbol">/=</span> <span class="elocal">orig_w</span> <a class="ekeyword" href="../../base/boolean.html#f_disjuncted">or</a> <span class="elocal">mp_h</span><span class="edot">.</span><a class="efeature" href="../../base/managed_pointer.html#f_read_integer_32">read_integer_32</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="enumber">0</span><span class="esymbol">)</span> <span class="esymbol">/=</span> <span class="elocal">orig_h</span> <span class="ekeyword">then</span>
				<a class="efeature" href="../../base/any.html#f_print">print</a><span class="esymbol"> </span><span class="esymbol">(</span>&quot;CreateUpscaledTexture: Limited texture size to &quot; <a class="esymbol" href="../../base/string_8.html#f_plus">+</a> <span class="esymbol">(</span><span class="elocal">mp_w</span><span class="edot">.</span><a class="efeature" href="../../base/managed_pointer.html#f_read_integer_32">read_integer_32</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="enumber">0</span><span class="esymbol">)</span> <a class="esymbol" href="../../base/integer_32.html#f_product">*</a> <span class="esymbol">{</span><a class="eclass" href="../../brie_doom/doomdef_h.html">DOOMDEF_H</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/doomdef_h.html#f_screenwidth">screenwidth</a><span class="esymbol">)</span><span class="edot">.</span><a class="efeature" href="../../base/integer_32_ref.html#f_out">out</a> <a class="esymbol" href="../../base/string_8.html#f_plus">+</a> &quot;x&quot; <a class="esymbol" href="../../base/string_8.html#f_plus">+</a> <span class="esymbol">(</span><span class="elocal">mp_h</span><span class="edot">.</span><a class="efeature" href="../../base/managed_pointer.html#f_read_integer_32">read_integer_32</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="enumber">0</span><span class="esymbol">)</span> <a class="esymbol" href="../../base/integer_32.html#f_product">*</a> <span class="esymbol">{</span><a class="eclass" href="../../brie_doom/doomdef_h.html">DOOMDEF_H</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/doomdef_h.html#f_screenheight">screenheight</a><span class="esymbol">)</span><span class="edot">.</span><a class="efeature" href="../../base/integer_32_ref.html#f_out">out</a><span class="esymbol">)</span>
			<span class="ekeyword">end</span>
		<span class="ekeyword">end</span>
	
<span class="ekeyword">feature</span> <span class="ecomment">--</span><span class="ecomment"> I_FinishUpdate</span>

	<a name="f_lasttic"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_lasttic">lasttic</a><span class="esymbol">:</span> <a class="eclass" href="../../base/integer_32.html">INTEGER_32</a>

	<a name="f_i_finishupdate"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_i_finishupdate">i_finishupdate</a>
		<span class="ekeyword">do</span>
			<span class="esymbol">{</span><a class="eclass" href="../../brie_doom/not_implemented.html">NOT_IMPLEMENTED</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/not_implemented.html#f_not_implemented">not_implemented</a> <span class="esymbol">(</span>&quot;I_FinishUpdate&quot;<span class="esymbol">,</span> <span class="ekeyword">False</span><span class="esymbol">)</span>
			<a class="efeature" href="../../brie_doom/render/i_video.html#f_updategrab">updategrab</a>
			<span class="ekeyword">check</span>
					<span class="ekeyword">attached</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_screenbuffer">screenbuffer</a> <span class="ekeyword">as</span> sb
			<span class="ekeyword">then</span>
				<span class="ekeyword">if</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_palette_to_set">palette_to_set</a> <span class="ekeyword">then</span>
					<span class="ekeyword">check</span>
							<span class="ekeyword">attached</span> <span class="elocal">sb</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_surface_struct_api.html#f_format">format</a> <span class="ekeyword">as</span> f <a class="ekeyword" href="../../base/boolean.html#f_conjuncted_semistrict">and then</a> <span class="ekeyword">attached</span> <span class="elocal">f</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_pixel_format_struct_api.html#f_palette">palette</a> <span class="ekeyword">as</span> p
					<span class="ekeyword">then</span>
						<a class="efeature" href="../../brie_doom/render/i_video.html#f_set_sdl_palette">set_sdl_palette</a>
						<a class="efeature" href="../../brie_doom/render/i_video.html#f_palette_to_set">palette_to_set</a> <span class="esymbol">:=</span> <span class="ekeyword">False</span>
					<span class="ekeyword">end</span>
				<span class="ekeyword">end</span>
			<span class="ekeyword">end</span>
			<span class="ekeyword">check</span>
					<span class="ekeyword">attached</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_screenbuffer">screenbuffer</a> <span class="ekeyword">as</span> sb <a class="ekeyword" href="../../base/boolean.html#f_conjuncted_semistrict">and then</a> <span class="ekeyword">attached</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_argbbuffer">argbbuffer</a> <span class="ekeyword">as</span> abb <a class="ekeyword" href="../../base/boolean.html#f_conjuncted_semistrict">and then</a> <span class="ekeyword">attached</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_texture">texture</a> <span class="ekeyword">as</span> t
			<span class="ekeyword">then</span>
				<span class="ekeyword">check</span>
						<span class="ekeyword">attached</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_renderer">renderer</a> <span class="ekeyword">as</span> r <a class="ekeyword" href="../../base/boolean.html#f_conjuncted_semistrict">and then</a> <span class="ekeyword">attached</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_texture_upscaled">texture_upscaled</a> <span class="ekeyword">as</span> tu
				<span class="ekeyword">then</span>
					<span class="ekeyword">if</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_surface_functions_api.html">SDL_SURFACE_FUNCTIONS_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_surface_functions_api.html#f_sdl_lower_blit">sdl_lower_blit</a> <span class="esymbol">(</span><span class="elocal">sb</span><span class="esymbol">,</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_blit_rect">Blit_rect</a><span class="esymbol">,</span> <span class="elocal">abb</span><span class="esymbol">,</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_blit_rect">Blit_rect</a><span class="esymbol">)</span> <a class="esymbol" href="../../base/integer_32.html#f_is_less">&lt;</a> <span class="enumber">0</span> <span class="ekeyword">then</span>
						<a class="efeature" href="../../brie_doom/render/i_video.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../../brie_doom/i_main.html#f_i_error">i_error</a><span class="esymbol"> </span><span class="esymbol">(</span>&quot;From 8bit blit error &quot; <a class="esymbol" href="../../base/string_8.html#f_plus">+</a> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_error.html">SDL_ERROR</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_error.html#f_sdl_get_error">sdl_get_error</a><span class="esymbol">)</span>
					<span class="ekeyword">end</span>
					<span class="ekeyword">if</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_render.html">SDL_RENDER</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_render.html#f_sdl_update_texture">sdl_update_texture</a> <span class="esymbol">(</span><span class="elocal">t</span><span class="esymbol">,</span> <span class="ekeyword">Void</span><span class="esymbol">,</span> <span class="elocal">abb</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_surface_struct_api.html#f_pixels">pixels</a><span class="esymbol">,</span> <span class="elocal">abb</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_surface_struct_api.html#f_pitch">pitch</a><span class="esymbol">)</span> <a class="esymbol" href="../../base/integer_32.html#f_is_less">&lt;</a> <span class="enumber">0</span> <span class="ekeyword">then</span>
						<a class="efeature" href="../../brie_doom/render/i_video.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../../brie_doom/i_main.html#f_i_error">i_error</a><span class="esymbol"> </span><span class="esymbol">(</span>&quot;Upd intermediate with RGBA buffer &quot; <a class="esymbol" href="../../base/string_8.html#f_plus">+</a> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_error.html">SDL_ERROR</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_error.html#f_sdl_get_error">sdl_get_error</a><span class="esymbol">)</span>
					<span class="ekeyword">end</span>
					<span class="ekeyword">if</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_render_functions_api.html">SDL_RENDER_FUNCTIONS_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_render_functions_api.html#f_sdl_render_clear">sdl_render_clear</a> <span class="esymbol">(</span><span class="elocal">r</span><span class="esymbol">)</span> <a class="esymbol" href="../../base/integer_32.html#f_is_less">&lt;</a> <span class="enumber">0</span> <span class="ekeyword">then</span>
						<a class="efeature" href="../../brie_doom/render/i_video.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../../brie_doom/i_main.html#f_i_error">i_error</a><span class="esymbol"> </span><span class="esymbol">(</span>&quot;render clear &quot; <a class="esymbol" href="../../base/string_8.html#f_plus">+</a> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_error.html">SDL_ERROR</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_error.html#f_sdl_get_error">sdl_get_error</a><span class="esymbol">)</span>
					<span class="ekeyword">end</span>
					<span class="ekeyword">if</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_render.html">SDL_RENDER</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_render.html#f_sdl_set_render_target">sdl_set_render_target</a> <span class="esymbol">(</span><span class="elocal">r</span><span class="esymbol">,</span> <span class="elocal">tu</span><span class="esymbol">)</span> <a class="esymbol" href="../../base/integer_32.html#f_is_less">&lt;</a> <span class="enumber">0</span> <span class="ekeyword">then</span>
						<a class="efeature" href="../../brie_doom/render/i_video.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../../brie_doom/i_main.html#f_i_error">i_error</a><span class="esymbol"> </span><span class="esymbol">(</span>&quot;render target &quot; <a class="esymbol" href="../../base/string_8.html#f_plus">+</a> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_error.html">SDL_ERROR</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_error.html#f_sdl_get_error">sdl_get_error</a><span class="esymbol">)</span>
					<span class="ekeyword">end</span>
					<span class="ekeyword">if</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_render.html">SDL_RENDER</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_render.html#f_sdl_render_copy">sdl_render_copy</a> <span class="esymbol">(</span><span class="elocal">r</span><span class="esymbol">,</span> <span class="elocal">t</span><span class="esymbol">,</span> <span class="ekeyword">Void</span><span class="esymbol">,</span> <span class="ekeyword">Void</span><span class="esymbol">)</span> <a class="esymbol" href="../../base/integer_32.html#f_is_less">&lt;</a> <span class="enumber">0</span> <span class="ekeyword">then</span>
						<a class="efeature" href="../../brie_doom/render/i_video.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../../brie_doom/i_main.html#f_i_error">i_error</a><span class="esymbol"> </span><span class="esymbol">(</span>&quot;render copy &quot; <a class="esymbol" href="../../base/string_8.html#f_plus">+</a> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_error.html">SDL_ERROR</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_error.html#f_sdl_get_error">sdl_get_error</a><span class="esymbol">)</span>
					<span class="ekeyword">end</span>
					<span class="ekeyword">if</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_render.html">SDL_RENDER</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_render.html#f_sdl_set_render_target">sdl_set_render_target</a> <span class="esymbol">(</span><span class="elocal">r</span><span class="esymbol">,</span> <span class="ekeyword">Void</span><span class="esymbol">)</span> <a class="esymbol" href="../../base/integer_32.html#f_is_less">&lt;</a> <span class="enumber">0</span> <span class="ekeyword">then</span>
						<a class="efeature" href="../../brie_doom/render/i_video.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../../brie_doom/i_main.html#f_i_error">i_error</a><span class="esymbol"> </span><span class="esymbol">(</span>&quot;render target &quot; <a class="esymbol" href="../../base/string_8.html#f_plus">+</a> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_error.html">SDL_ERROR</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_error.html#f_sdl_get_error">sdl_get_error</a><span class="esymbol">)</span>
					<span class="ekeyword">end</span>
					<span class="ekeyword">if</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_render.html">SDL_RENDER</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_render.html#f_sdl_render_copy">sdl_render_copy</a> <span class="esymbol">(</span><span class="elocal">r</span><span class="esymbol">,</span> <span class="elocal">tu</span><span class="esymbol">,</span> <span class="ekeyword">Void</span><span class="esymbol">,</span> <span class="ekeyword">Void</span><span class="esymbol">)</span> <a class="esymbol" href="../../base/integer_32.html#f_is_less">&lt;</a> <span class="enumber">0</span> <span class="ekeyword">then</span>
						<a class="efeature" href="../../brie_doom/render/i_video.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../../brie_doom/i_main.html#f_i_error">i_error</a><span class="esymbol"> </span><span class="esymbol">(</span>&quot;render copy &quot; <a class="esymbol" href="../../base/string_8.html#f_plus">+</a> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_error.html">SDL_ERROR</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_error.html#f_sdl_get_error">sdl_get_error</a><span class="esymbol">)</span>
					<span class="ekeyword">end</span>
					<span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_render_functions_api.html">SDL_RENDER_FUNCTIONS_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_render_functions_api.html#f_sdl_render_present">sdl_render_present</a> <span class="esymbol">(</span><span class="elocal">r</span><span class="esymbol">)</span>
				<span class="ekeyword">end</span>
			<span class="ekeyword">end</span>
		<span class="ekeyword">end</span>
	
<span class="ekeyword">feature</span> <span class="ecomment">--</span><span class="ecomment"> Mouse grab</span>

	<a name="f_currently_grabbed"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_currently_grabbed">currently_grabbed</a><span class="esymbol">:</span> <a class="eclass" href="../../base/boolean.html">BOOLEAN</a>

	<a name="f_nograbmouse_override"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_nograbmouse_override">nograbmouse_override</a><span class="esymbol">:</span> <a class="eclass" href="../../base/boolean.html">BOOLEAN</a>

	<a name="f_grabmouse"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_grabmouse">grabmouse</a><span class="esymbol">:</span> <a class="eclass" href="../../base/integer_32.html">INTEGER_32</a>

	<a name="f_grabmouse_callback"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_grabmouse_callback">grabmouse_callback</a><span class="esymbol">:</span> <span class="ekeyword">detachable</span> <a class="eclass" href="../../base/predicate.html">PREDICATE</a> <span class="ekeyword">assign</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_set_grabmouse_callback">set_grabmouse_callback</a>

	<a name="f_set_grabmouse_callback"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_set_grabmouse_callback">set_grabmouse_callback</a> <span class="esymbol">(</span><span class="elocal">a_grabmouse_callback</span><span class="esymbol">:</span> <span class="ekeyword">like</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_grabmouse_callback">grabmouse_callback</a><span class="esymbol">)</span>
		<span class="ekeyword">do</span>
			<a class="efeature" href="../../brie_doom/render/i_video.html#f_grabmouse_callback">grabmouse_callback</a> <span class="esymbol">:=</span> <span class="elocal">a_grabmouse_callback</span>
		<span class="ekeyword">end</span>

	<a name="f_mouseshouldbegrabbed"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_mouseshouldbegrabbed">mouseshouldbegrabbed</a><span class="esymbol">:</span> <a class="eclass" href="../../base/boolean.html">BOOLEAN</a>
		<span class="ekeyword">do</span>
			<span class="ekeyword">if</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_screensaver_mode">screensaver_mode</a> <span class="ekeyword">then</span>
				<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">False</span>
			<span class="ekeyword">elseif</span> <a class="ekeyword" href="../../base/boolean.html#f_negated">not</a> <a class="efeature" href="../../brie_doom/render/i_video.html#f_window_focused">window_focused</a> <span class="ekeyword">then</span>
				<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">False</span>
			<span class="ekeyword">elseif</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_fullscreen">fullscreen</a> <span class="ekeyword">then</span>
				<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
			<span class="ekeyword">elseif</span> <a class="ekeyword" href="../../base/boolean.html#f_negated">not</a> <a class="efeature" href="../../brie_doom/render/i_video.html#f_usemouse">Usemouse</a> <a class="ekeyword" href="../../base/boolean.html#f_disjuncted">or</a> <a class="efeature" href="../../brie_doom/render/i_video.html#f_nomouse">nomouse</a> <span class="ekeyword">then</span>
				<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">False</span>
			<span class="ekeyword">elseif</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_nograbmouse_override">nograbmouse_override</a> <a class="ekeyword" href="../../base/boolean.html#f_disjuncted">or</a> <a class="ekeyword" href="../../base/boolean.html#f_negated">not</a> <a class="efeature" href="../../brie_doom/render/i_video.html#f_grabmouse">grabmouse</a><span class="edot">.</span><a class="efeature" href="../../base/integer_32_ref.html#f_to_boolean">to_boolean</a> <span class="ekeyword">then</span>
				<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">False</span>
			<span class="ekeyword">elseif</span> <span class="ekeyword">attached</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_grabmouse_callback">grabmouse_callback</a> <span class="ekeyword">as</span> cb <span class="ekeyword">then</span>
				<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="elocal">cb</span><span class="edot">.</span><a class="efeature" href="../../base/function.html#f_item">item</a>
			<span class="ekeyword">else</span>
				<span class="ekeyword">Result</span> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
			<span class="ekeyword">end</span>
		<span class="ekeyword">end</span>

	<a name="f_updategrab"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_updategrab">updategrab</a>
		<span class="ekeyword">local</span>
			<span class="elocal">grab</span><span class="esymbol">:</span> <a class="eclass" href="../../base/boolean.html">BOOLEAN</a>
			<span class="elocal">screen_w</span><span class="esymbol">,</span> <span class="elocal">screen_h</span><span class="esymbol">:</span> <a class="eclass" href="../../base/integer_32.html">INTEGER_32</a>
		<span class="ekeyword">do</span>
			<span class="elocal">grab</span> <span class="esymbol">:=</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_mouseshouldbegrabbed">mouseshouldbegrabbed</a>
			<span class="ekeyword">if</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_screensaver_mode">screensaver_mode</a> <span class="ekeyword">then</span>
				<a class="efeature" href="../../brie_doom/render/i_video.html#f_setshowcursor">setshowcursor</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="ekeyword">False</span><span class="esymbol">)</span>
			<span class="ekeyword">elseif</span> <span class="elocal">grab</span> <a class="ekeyword" href="../../base/boolean.html#f_conjuncted">and</a> <a class="ekeyword" href="../../base/boolean.html#f_negated">not</a> <a class="efeature" href="../../brie_doom/render/i_video.html#f_currently_grabbed">currently_grabbed</a> <span class="ekeyword">then</span>
				<a class="efeature" href="../../brie_doom/render/i_video.html#f_setshowcursor">setshowcursor</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="ekeyword">False</span><span class="esymbol">)</span>
			<span class="ekeyword">elseif</span> <a class="ekeyword" href="../../base/boolean.html#f_negated">not</a> <span class="elocal">grab</span> <a class="ekeyword" href="../../base/boolean.html#f_conjuncted">and</a> <a class="efeature" href="../../brie_doom/render/i_video.html#f_currently_grabbed">currently_grabbed</a> <span class="ekeyword">then</span>
				<a class="efeature" href="../../brie_doom/render/i_video.html#f_setshowcursor">setshowcursor</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="ekeyword">True</span><span class="esymbol">)</span>
				<span class="ekeyword">check</span>
						<span class="ekeyword">attached</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_screen">screen</a> <span class="ekeyword">as</span> s
				<span class="ekeyword">then</span>
					<span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_video_functions_api.html">SDL_VIDEO_FUNCTIONS_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_video_functions_api.html#f_sdl_get_window_size">sdl_get_window_size</a> <span class="esymbol">(</span><span class="elocal">s</span><span class="esymbol">,</span> <span class="esymbol">$</span><span class="elocal">screen_w</span><span class="esymbol">,</span> <span class="esymbol">$</span><span class="elocal">screen_h</span><span class="esymbol">)</span>
					<span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_mouse_functions_api.html">SDL_MOUSE_FUNCTIONS_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_mouse_functions_api.html#f_sdl_warp_mouse_in_window">sdl_warp_mouse_in_window</a> <span class="esymbol">(</span><span class="elocal">s</span><span class="esymbol">,</span> <span class="elocal">screen_w</span> <a class="esymbol" href="../../base/integer_32.html#f_minus">-</a> <span class="enumber">16</span><span class="esymbol">,</span> <span class="elocal">screen_h</span> <a class="esymbol" href="../../base/integer_32.html#f_minus">-</a> <span class="enumber">16</span><span class="esymbol">)</span>
				<span class="ekeyword">end</span>
				<span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_mouse_functions_api.html">SDL_MOUSE_FUNCTIONS_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_mouse_functions_api.html#f_sdl_get_relative_mouse_state">sdl_get_relative_mouse_state</a> <span class="esymbol">(</span><span class="ekeyword">create</span><span class="esymbol"> </span><span class="esymbol">{</span><a class="eclass" href="../../base/typed_pointer.html">TYPED_POINTER</a> <span class="esymbol">[</span><a class="eclass" href="../../base/integer_32.html">INTEGER_32</a><span class="esymbol">]</span><span class="esymbol">}</span><span class="esymbol">,</span> <span class="ekeyword">create</span><span class="esymbol"> </span><span class="esymbol">{</span><a class="eclass" href="../../base/typed_pointer.html">TYPED_POINTER</a> <span class="esymbol">[</span><a class="eclass" href="../../base/integer_32.html">INTEGER_32</a><span class="esymbol">]</span><span class="esymbol">}</span><span class="esymbol">)</span><span class="edot">.</span><a class="efeature" href="../../base/any.html#f_do_nothing">do_nothing</a>
			<span class="ekeyword">end</span>
			<a class="efeature" href="../../brie_doom/render/i_video.html#f_currently_grabbed">currently_grabbed</a> <span class="esymbol">:=</span> <span class="elocal">grab</span>
		<span class="ekeyword">end</span>

	<a name="f_setshowcursor"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_setshowcursor">setshowcursor</a> <span class="esymbol">(</span><span class="elocal">show</span><span class="esymbol">:</span> <a class="eclass" href="../../base/boolean.html">BOOLEAN</a><span class="esymbol">)</span>
		<span class="ekeyword">do</span>
			<span class="ekeyword">if</span> <a class="ekeyword" href="../../base/boolean.html#f_negated">not</a> <a class="efeature" href="../../brie_doom/render/i_video.html#f_screensaver_mode">screensaver_mode</a> <span class="ekeyword">then</span>
				<span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_mouse_functions_api.html">SDL_MOUSE_FUNCTIONS_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_mouse_functions_api.html#f_sdl_set_relative_mouse_mode">sdl_set_relative_mouse_mode</a> <span class="esymbol">(</span><span class="esymbol">(</span><a class="ekeyword" href="../../base/boolean.html#f_negated">not</a> <span class="elocal">show</span><span class="esymbol">)</span><span class="edot">.</span><a class="efeature" href="../../base/boolean_ref.html#f_to_integer">to_integer</a><span class="esymbol">)</span><span class="edot">.</span><a class="efeature" href="../../base/any.html#f_do_nothing">do_nothing</a>
				<span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_mouse_functions_api.html">SDL_MOUSE_FUNCTIONS_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_mouse_functions_api.html#f_sdl_get_relative_mouse_state">sdl_get_relative_mouse_state</a> <span class="esymbol">(</span><span class="ekeyword">create</span><span class="esymbol"> </span><span class="esymbol">{</span><a class="eclass" href="../../base/typed_pointer.html">TYPED_POINTER</a> <span class="esymbol">[</span><a class="eclass" href="../../base/integer_32.html">INTEGER_32</a><span class="esymbol">]</span><span class="esymbol">}</span><span class="esymbol">,</span> <span class="ekeyword">create</span><span class="esymbol"> </span><span class="esymbol">{</span><a class="eclass" href="../../base/typed_pointer.html">TYPED_POINTER</a> <span class="esymbol">[</span><a class="eclass" href="../../base/integer_32.html">INTEGER_32</a><span class="esymbol">]</span><span class="esymbol">}</span><span class="esymbol">)</span><span class="edot">.</span><a class="efeature" href="../../base/any.html#f_do_nothing">do_nothing</a>
			<span class="ekeyword">end</span>
		<span class="ekeyword">end</span>
	
<span class="ekeyword">feature</span> 

	<a name="f_i_setpalette"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_i_setpalette">i_setpalette</a> <span class="esymbol">(</span><span class="elocal">doompalette</span><span class="esymbol">:</span> <a class="eclass" href="../../base/managed_pointer.html">MANAGED_POINTER</a><span class="esymbol">)</span>
			<span class="ecomment">--</span><span class="ecomment"> originally took void* palette</span>
			<span class="ecomment">--</span><span class="ecomment"> from </span><a class="ecomment" href="https://github.com/chocolate-doom/chocolate-doom/blob/7a0db31614ec187e363e7664036d95ec56242e44/src/i_video.c#L822">https://github.com/chocolate-doom/chocolate-doom/blob/7a0db31614ec187e363e7664036d95ec56242e44/src/i_video.c#L822</a>
		<span class="ekeyword">local</span>
			<span class="elocal">i</span><span class="esymbol">:</span> <a class="eclass" href="../../base/integer_32.html">INTEGER_32</a>
			<span class="elocal">d</span><span class="esymbol">:</span> <a class="eclass" href="../../base/integer_32.html">INTEGER_32</a>
			<span class="elocal">not_3</span><span class="esymbol">:</span> <a class="eclass" href="../../base/natural_8.html">NATURAL_8</a>
		<span class="ekeyword">do</span>
			<span class="elocal">not_3</span> <span class="esymbol">:=</span> <span class="esymbol">(</span><span class="enumber">3</span><span class="esymbol">)</span><span class="edot">.</span><a class="efeature" href="../../base/integer_32_ref.html#f_to_natural_8">to_natural_8</a><span class="edot">.</span><a class="efeature" href="../../base/natural_8.html#f_bit_not">bit_not</a>
			<span class="ekeyword">from</span>
				<span class="elocal">i</span> <span class="esymbol">:=</span> <span class="enumber">0</span>
				<span class="elocal">d</span> <span class="esymbol">:=</span> <span class="enumber">0</span>
			<span class="ekeyword">until</span>
				<span class="elocal">i</span> <a class="esymbol" href="../../base/comparable.html#f_is_greater_equal">&gt;=</a> <span class="enumber">256</span>
			<span class="ekeyword">loop</span>
				<a class="efeature" href="../../brie_doom/render/i_video.html#f_palette">Palette</a> <a class="esymbol" href="../../base/array.html#f_item">[</a><span class="elocal">i</span><a class="esymbol" href="../../base/array.html#f_item">]</a><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_color_struct_api.html#f_set_r">set_r</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="esymbol">(</span><a class="efeature" href="../../brie_doom/render/i_video.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../../brie_doom/i_main.html#f_v_video">V_video</a><span class="edot">.</span><a class="efeature" href="../../brie_doom/render/v_video.html#f_gammatable">Gammatable</a> <a class="esymbol" href="../../base/array.html#f_item">[</a><a class="efeature" href="../../brie_doom/render/i_video.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../../brie_doom/i_main.html#f_v_video">V_video</a><span class="edot">.</span><a class="efeature" href="../../brie_doom/render/v_video.html#f_usegamma">usegamma</a><a class="esymbol" href="../../base/array.html#f_item">]</a> <a class="esymbol" href="../../base/array.html#f_item">[</a><span class="elocal">doompalette</span><span class="edot">.</span><a class="efeature" href="../../base/managed_pointer.html#f_read_natural_8_le">read_natural_8_le</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">d</span><span class="esymbol">)</span><span class="edot">.</span><a class="efeature" href="../../base/natural_8_ref.html#f_to_integer_32">to_integer_32</a> <a class="esymbol" href="../../base/integer_32.html#f_plus">+</a> <span class="enumber">1</span><a class="esymbol" href="../../base/array.html#f_item">]</a> <a class="esymbol" href="../../base/natural_8.html#f_bit_and">&#38;</a> <span class="elocal">not_3</span><span class="esymbol">)</span><span class="edot">.</span><a class="efeature" href="../../base/natural_8.html#f_to_character_8">to_character_8</a><span class="esymbol">)</span>
				<span class="elocal">d</span> <span class="esymbol">:=</span> <span class="elocal">d</span> <a class="esymbol" href="../../base/integer_32.html#f_plus">+</a> <span class="enumber">1</span><span class="esymbol">;</span>
				<a class="efeature" href="../../brie_doom/render/i_video.html#f_palette">Palette</a> <a class="esymbol" href="../../base/array.html#f_item">[</a><span class="elocal">i</span><a class="esymbol" href="../../base/array.html#f_item">]</a><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_color_struct_api.html#f_set_g">set_g</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="esymbol">(</span><a class="efeature" href="../../brie_doom/render/i_video.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../../brie_doom/i_main.html#f_v_video">V_video</a><span class="edot">.</span><a class="efeature" href="../../brie_doom/render/v_video.html#f_gammatable">Gammatable</a> <a class="esymbol" href="../../base/array.html#f_item">[</a><a class="efeature" href="../../brie_doom/render/i_video.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../../brie_doom/i_main.html#f_v_video">V_video</a><span class="edot">.</span><a class="efeature" href="../../brie_doom/render/v_video.html#f_usegamma">usegamma</a><a class="esymbol" href="../../base/array.html#f_item">]</a> <a class="esymbol" href="../../base/array.html#f_item">[</a><span class="elocal">doompalette</span><span class="edot">.</span><a class="efeature" href="../../base/managed_pointer.html#f_read_natural_8_le">read_natural_8_le</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">d</span><span class="esymbol">)</span><span class="edot">.</span><a class="efeature" href="../../base/natural_8_ref.html#f_to_integer_32">to_integer_32</a> <a class="esymbol" href="../../base/integer_32.html#f_plus">+</a> <span class="enumber">1</span><a class="esymbol" href="../../base/array.html#f_item">]</a> <a class="esymbol" href="../../base/natural_8.html#f_bit_and">&#38;</a> <span class="elocal">not_3</span><span class="esymbol">)</span><span class="edot">.</span><a class="efeature" href="../../base/natural_8.html#f_to_character_8">to_character_8</a><span class="esymbol">)</span>
				<span class="elocal">d</span> <span class="esymbol">:=</span> <span class="elocal">d</span> <a class="esymbol" href="../../base/integer_32.html#f_plus">+</a> <span class="enumber">1</span><span class="esymbol">;</span>
				<a class="efeature" href="../../brie_doom/render/i_video.html#f_palette">Palette</a> <a class="esymbol" href="../../base/array.html#f_item">[</a><span class="elocal">i</span><a class="esymbol" href="../../base/array.html#f_item">]</a><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_color_struct_api.html#f_set_b">set_b</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="esymbol">(</span><a class="efeature" href="../../brie_doom/render/i_video.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../../brie_doom/i_main.html#f_v_video">V_video</a><span class="edot">.</span><a class="efeature" href="../../brie_doom/render/v_video.html#f_gammatable">Gammatable</a> <a class="esymbol" href="../../base/array.html#f_item">[</a><a class="efeature" href="../../brie_doom/render/i_video.html#f_i_main">i_main</a><span class="edot">.</span><a class="efeature" href="../../brie_doom/i_main.html#f_v_video">V_video</a><span class="edot">.</span><a class="efeature" href="../../brie_doom/render/v_video.html#f_usegamma">usegamma</a><a class="esymbol" href="../../base/array.html#f_item">]</a> <a class="esymbol" href="../../base/array.html#f_item">[</a><span class="elocal">doompalette</span><span class="edot">.</span><a class="efeature" href="../../base/managed_pointer.html#f_read_natural_8_le">read_natural_8_le</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="elocal">d</span><span class="esymbol">)</span><span class="edot">.</span><a class="efeature" href="../../base/natural_8_ref.html#f_to_integer_32">to_integer_32</a> <a class="esymbol" href="../../base/integer_32.html#f_plus">+</a> <span class="enumber">1</span><a class="esymbol" href="../../base/array.html#f_item">]</a> <a class="esymbol" href="../../base/natural_8.html#f_bit_and">&#38;</a> <span class="elocal">not_3</span><span class="esymbol">)</span><span class="edot">.</span><a class="efeature" href="../../base/natural_8.html#f_to_character_8">to_character_8</a><span class="esymbol">)</span>
				<span class="elocal">d</span> <span class="esymbol">:=</span> <span class="elocal">d</span> <a class="esymbol" href="../../base/integer_32.html#f_plus">+</a> <span class="enumber">1</span>
				<span class="elocal">i</span> <span class="esymbol">:=</span> <span class="elocal">i</span> <a class="esymbol" href="../../base/integer_32.html#f_plus">+</a> <span class="enumber">1</span>
			<span class="ekeyword">end</span>
			<a class="efeature" href="../../brie_doom/render/i_video.html#f_palette_to_set">palette_to_set</a> <span class="esymbol">:=</span> <span class="ekeyword">True</span>
		<span class="ekeyword">end</span>

	<a name="f_set_sdl_palette"></a><a class="efeature" href="../../brie_doom/render/i_video.html#f_set_sdl_palette">set_sdl_palette</a>
		<span class="ekeyword">local</span>
			<span class="elocal">mp</span><span class="esymbol">:</span> <a class="eclass" href="../../base/managed_pointer.html">MANAGED_POINTER</a>
			<span class="elocal">i</span><span class="esymbol">:</span> <a class="eclass" href="../../base/integer_32.html">INTEGER_32</a>
		<span class="ekeyword">do</span>
			<span class="ekeyword">check</span>
					<span class="ekeyword">attached</span> <a class="efeature" href="../../brie_doom/render/i_video.html#f_screenbuffer">screenbuffer</a> <span class="ekeyword">as</span> sb <a class="ekeyword" href="../../base/boolean.html#f_conjuncted_semistrict">and then</a> <span class="ekeyword">attached</span> <span class="elocal">sb</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_surface_struct_api.html#f_format">format</a> <span class="ekeyword">as</span> f <a class="ekeyword" href="../../base/boolean.html#f_conjuncted_semistrict">and then</a> <span class="ekeyword">attached</span> <span class="elocal">f</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_pixel_format_struct_api.html#f_palette">palette</a> <span class="ekeyword">as</span> p
			<span class="ekeyword">then</span>
				<span class="ekeyword">create</span> <span class="elocal">mp</span><span class="edot">.</span><a class="efeature" href="../../base/managed_pointer.html#f_make">make</a><span class="esymbol"> </span><span class="esymbol">(</span><span class="enumber">256</span> <a class="esymbol" href="../../base/integer_32.html#f_product">*</a> <span class="enumber">4</span><span class="esymbol">)</span>
				<span class="ekeyword">from</span>
					<span class="elocal">i</span> <span class="esymbol">:=</span> <span class="enumber">0</span>
				<span class="ekeyword">until</span>
					<span class="elocal">i</span> <a class="esymbol" href="../../base/comparable.html#f_is_greater_equal">&gt;=</a> <span class="enumber">256</span>
				<span class="ekeyword">loop</span>
					<span class="elocal">mp</span><span class="edot">.</span><a class="efeature" href="../../base/managed_pointer.html#f_put_natural_8">put_natural_8</a><span class="esymbol"> </span><span class="esymbol">(</span><a class="efeature" href="../../brie_doom/render/i_video.html#f_palette">Palette</a> <a class="esymbol" href="../../base/array.html#f_item">[</a><span class="elocal">i</span><a class="esymbol" href="../../base/array.html#f_item">]</a><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_color_struct_api.html#f_r">r</a><span class="edot">.</span><a class="efeature" href="../../base/character_8.html#f_code">code</a><span class="edot">.</span><a class="efeature" href="../../base/integer_32_ref.html#f_to_natural_8">to_natural_8</a><span class="esymbol">,</span> <span class="enumber">4</span> <a class="esymbol" href="../../base/integer_32.html#f_product">*</a> <span class="elocal">i</span> <a class="esymbol" href="../../base/integer_32.html#f_plus">+</a> <span class="enumber">0</span><span class="esymbol">)</span>
					<span class="elocal">mp</span><span class="edot">.</span><a class="efeature" href="../../base/managed_pointer.html#f_put_natural_8">put_natural_8</a><span class="esymbol"> </span><span class="esymbol">(</span><a class="efeature" href="../../brie_doom/render/i_video.html#f_palette">Palette</a> <a class="esymbol" href="../../base/array.html#f_item">[</a><span class="elocal">i</span><a class="esymbol" href="../../base/array.html#f_item">]</a><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_color_struct_api.html#f_g">g</a><span class="edot">.</span><a class="efeature" href="../../base/character_8.html#f_code">code</a><span class="edot">.</span><a class="efeature" href="../../base/integer_32_ref.html#f_to_natural_8">to_natural_8</a><span class="esymbol">,</span> <span class="enumber">4</span> <a class="esymbol" href="../../base/integer_32.html#f_product">*</a> <span class="elocal">i</span> <a class="esymbol" href="../../base/integer_32.html#f_plus">+</a> <span class="enumber">1</span><span class="esymbol">)</span>
					<span class="elocal">mp</span><span class="edot">.</span><a class="efeature" href="../../base/managed_pointer.html#f_put_natural_8">put_natural_8</a><span class="esymbol"> </span><span class="esymbol">(</span><a class="efeature" href="../../brie_doom/render/i_video.html#f_palette">Palette</a> <a class="esymbol" href="../../base/array.html#f_item">[</a><span class="elocal">i</span><a class="esymbol" href="../../base/array.html#f_item">]</a><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_color_struct_api.html#f_b">b</a><span class="edot">.</span><a class="efeature" href="../../base/character_8.html#f_code">code</a><span class="edot">.</span><a class="efeature" href="../../base/integer_32_ref.html#f_to_natural_8">to_natural_8</a><span class="esymbol">,</span> <span class="enumber">4</span> <a class="esymbol" href="../../base/integer_32.html#f_product">*</a> <span class="elocal">i</span> <a class="esymbol" href="../../base/integer_32.html#f_plus">+</a> <span class="enumber">2</span><span class="esymbol">)</span>
					<span class="elocal">mp</span><span class="edot">.</span><a class="efeature" href="../../base/managed_pointer.html#f_put_natural_8">put_natural_8</a><span class="esymbol"> </span><span class="esymbol">(</span><a class="efeature" href="../../brie_doom/render/i_video.html#f_palette">Palette</a> <a class="esymbol" href="../../base/array.html#f_item">[</a><span class="elocal">i</span><a class="esymbol" href="../../base/array.html#f_item">]</a><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_color_struct_api.html#f_a">a</a><span class="edot">.</span><a class="efeature" href="../../base/character_8.html#f_code">code</a><span class="edot">.</span><a class="efeature" href="../../base/integer_32_ref.html#f_to_natural_8">to_natural_8</a><span class="esymbol">,</span> <span class="enumber">4</span> <a class="esymbol" href="../../base/integer_32.html#f_product">*</a> <span class="elocal">i</span> <a class="esymbol" href="../../base/integer_32.html#f_plus">+</a> <span class="enumber">3</span><span class="esymbol">)</span>
					<span class="elocal">i</span> <span class="esymbol">:=</span> <span class="elocal">i</span> <a class="esymbol" href="../../base/integer_32.html#f_plus">+</a> <span class="enumber">1</span>
				<span class="ekeyword">end</span>
				<span class="ekeyword">if</span> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_pixels_functions_api.html">SDL_PIXELS_FUNCTIONS_API</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_pixels_functions_api.html#f_c_sdl_set_palette_colors">c_sdl_set_palette_colors</a> <span class="esymbol">(</span><span class="elocal">p</span><span class="edot">.</span><a class="efeature" href="../../base/memory_structure.html#f_item">item</a><span class="esymbol">,</span> <span class="elocal">mp</span><span class="edot">.</span><a class="efeature" href="../../base/managed_pointer.html#f_item">item</a><span class="esymbol">,</span> <span class="enumber">0</span><span class="esymbol">,</span> <span class="enumber">256</span><span class="esymbol">)</span> <a class="esymbol" href="../../base/integer_32.html#f_is_less">&lt;</a> <span class="enumber">0</span> <span class="ekeyword">then</span>
					<span class="esymbol">{</span><a class="eclass" href="../../brie_doom/i_main.html">I_MAIN</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../brie_doom/i_main.html#f_i_error">i_error</a> <span class="esymbol">(</span>&quot;SDL_SetPaletteColors failed &quot; <a class="esymbol" href="../../base/string_8.html#f_plus">+</a> <span class="esymbol">{</span><a class="eclass" href="../../wrap_sdl2/sdl_error.html">SDL_ERROR</a><span class="esymbol">}</span><span class="edot">.</span><a class="efeature" href="../../wrap_sdl2/sdl_error.html#f_sdl_get_error">sdl_get_error</a><span class="esymbol">)</span>
				<span class="ekeyword">end</span>
			<span class="ekeyword">end</span>
		<span class="ekeyword">end</span>
	
<span class="ekeyword">end</span> <span class="ecomment">--</span> <span class="ecomment">class </span><a class="eclass" href="../../brie_doom/render/i_video.html">I_VIDEO</a></pre><form class="nav" onsubmit="go_to('../../',this.c.value);return false;">
<div class="nav">
<a class="nav hierarchy" href="../../class_list.html">Classes</a>
<a class="nav hierarchy" href="../../cluster_list.html">Clusters</a>
<a class="nav hierarchy" href="../../cluster_hierarchy.html">Cluster hierarchy</a>
<a class="nav class" href="i_video_chart.html">Chart</a>
<a class="nav class" href="i_video_links.html">Relations</a>
<span class="nav class selected">Text</span>
<span class="nav class goto">Go to: <input name="c" value="i_video"></span>
</div></form><pre></pre>
<p style="text-align:center;">Generated by <a href="http://www.eiffel.com">ISE EiffelStudio</a></p>
</body>
</html>

